(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var We=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xh(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var cu={exports:{}},pi={},uu={exports:{}},z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zn=Symbol.for("react.element"),Zh=Symbol.for("react.portal"),ef=Symbol.for("react.fragment"),tf=Symbol.for("react.strict_mode"),rf=Symbol.for("react.profiler"),nf=Symbol.for("react.provider"),sf=Symbol.for("react.context"),af=Symbol.for("react.forward_ref"),of=Symbol.for("react.suspense"),lf=Symbol.for("react.memo"),cf=Symbol.for("react.lazy"),Tl=Symbol.iterator;function uf(t){return t===null||typeof t!="object"?null:(t=Tl&&t[Tl]||t["@@iterator"],typeof t=="function"?t:null)}var du={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hu=Object.assign,fu={};function Zr(t,e,r){this.props=t,this.context=e,this.refs=fu,this.updater=r||du}Zr.prototype.isReactComponent={};Zr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mu(){}mu.prototype=Zr.prototype;function Co(t,e,r){this.props=t,this.context=e,this.refs=fu,this.updater=r||du}var Eo=Co.prototype=new mu;Eo.constructor=Co;hu(Eo,Zr.prototype);Eo.isPureReactComponent=!0;var Ol=Array.isArray,pu=Object.prototype.hasOwnProperty,Po={current:null},gu={key:!0,ref:!0,__self:!0,__source:!0};function xu(t,e,r){var n,s={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)pu.call(e,n)&&!gu.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Zn,type:t,key:a,ref:o,props:s,_owner:Po.current}}function df(t,e){return{$$typeof:Zn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function To(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zn}function hf(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Al=/\/+/g;function Bi(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hf(""+t.key):e.toString(36)}function Ts(t,e,r,n,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zn:case Zh:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+Bi(o,0):n,Ol(s)?(r="",t!=null&&(r=t.replace(Al,"$&/")+"/"),Ts(s,e,r,"",function(u){return u})):s!=null&&(To(s)&&(s=df(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Al,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",Ol(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+Bi(a,l);o+=Ts(a,e,r,c,s)}else if(c=uf(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+Bi(a,l++),o+=Ts(a,e,r,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function cs(t,e,r){if(t==null)return t;var n=[],s=0;return Ts(t,n,"","",function(a){return e.call(r,a,s++)}),n}function ff(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ne={current:null},Os={transition:null},mf={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:Os,ReactCurrentOwner:Po};function yu(){throw Error("act(...) is not supported in production builds of React.")}z.Children={map:cs,forEach:function(t,e,r){cs(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return cs(t,function(){e++}),e},toArray:function(t){return cs(t,function(e){return e})||[]},only:function(t){if(!To(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};z.Component=Zr;z.Fragment=ef;z.Profiler=rf;z.PureComponent=Co;z.StrictMode=tf;z.Suspense=of;z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mf;z.act=yu;z.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=hu({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Po.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)pu.call(e,c)&&!gu.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Zn,type:t.type,key:s,ref:a,props:n,_owner:o}};z.createContext=function(t){return t={$$typeof:sf,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nf,_context:t},t.Consumer=t};z.createElement=xu;z.createFactory=function(t){var e=xu.bind(null,t);return e.type=t,e};z.createRef=function(){return{current:null}};z.forwardRef=function(t){return{$$typeof:af,render:t}};z.isValidElement=To;z.lazy=function(t){return{$$typeof:cf,_payload:{_status:-1,_result:t},_init:ff}};z.memo=function(t,e){return{$$typeof:lf,type:t,compare:e===void 0?null:e}};z.startTransition=function(t){var e=Os.transition;Os.transition={};try{t()}finally{Os.transition=e}};z.unstable_act=yu;z.useCallback=function(t,e){return Ne.current.useCallback(t,e)};z.useContext=function(t){return Ne.current.useContext(t)};z.useDebugValue=function(){};z.useDeferredValue=function(t){return Ne.current.useDeferredValue(t)};z.useEffect=function(t,e){return Ne.current.useEffect(t,e)};z.useId=function(){return Ne.current.useId()};z.useImperativeHandle=function(t,e,r){return Ne.current.useImperativeHandle(t,e,r)};z.useInsertionEffect=function(t,e){return Ne.current.useInsertionEffect(t,e)};z.useLayoutEffect=function(t,e){return Ne.current.useLayoutEffect(t,e)};z.useMemo=function(t,e){return Ne.current.useMemo(t,e)};z.useReducer=function(t,e,r){return Ne.current.useReducer(t,e,r)};z.useRef=function(t){return Ne.current.useRef(t)};z.useState=function(t){return Ne.current.useState(t)};z.useSyncExternalStore=function(t,e,r){return Ne.current.useSyncExternalStore(t,e,r)};z.useTransition=function(){return Ne.current.useTransition()};z.version="18.3.1";uu.exports=z;var N=uu.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pf=N,gf=Symbol.for("react.element"),xf=Symbol.for("react.fragment"),yf=Object.prototype.hasOwnProperty,vf=pf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wf={key:!0,ref:!0,__self:!0,__source:!0};function vu(t,e,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)yf.call(e,n)&&!wf.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:gf,type:t,key:a,ref:o,props:s,_owner:vf.current}}pi.Fragment=xf;pi.jsx=vu;pi.jsxs=vu;cu.exports=pi;var i=cu.exports,wu={exports:{}},Ue={},bu={exports:{}},ju={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,$){var U=O.length;O.push($);e:for(;0<U;){var Z=U-1>>>1,ue=O[Z];if(0<s(ue,$))O[Z]=$,O[U]=ue,U=Z;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var $=O[0],U=O.pop();if(U!==$){O[0]=U;e:for(var Z=0,ue=O.length,os=ue>>>1;Z<os;){var Xt=2*(Z+1)-1,Fi=O[Xt],Zt=Xt+1,ls=O[Zt];if(0>s(Fi,U))Zt<ue&&0>s(ls,Fi)?(O[Z]=ls,O[Zt]=U,Z=Zt):(O[Z]=Fi,O[Xt]=U,Z=Xt);else if(Zt<ue&&0>s(ls,U))O[Z]=ls,O[Zt]=U,Z=Zt;else break e}}return $}function s(O,$){var U=O.sortIndex-$.sortIndex;return U!==0?U:O.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,v=!1,b=!1,f=!1,j=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(O){for(var $=r(u);$!==null;){if($.callback===null)n(u);else if($.startTime<=O)n(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=r(u)}}function w(O){if(f=!1,g(O),!b)if(r(c)!==null)b=!0,an(k);else{var $=r(u);$!==null&&zi(w,$.startTime-O)}}function k(O,$){b=!1,f&&(f=!1,m(C),C=-1),v=!0;var U=p;try{for(g($),h=r(c);h!==null&&(!(h.expirationTime>$)||O&&!I());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,p=h.priorityLevel;var ue=Z(h.expirationTime<=$);$=t.unstable_now(),typeof ue=="function"?h.callback=ue:h===r(c)&&n(c),g($)}else n(c);h=r(c)}if(h!==null)var os=!0;else{var Xt=r(u);Xt!==null&&zi(w,Xt.startTime-$),os=!1}return os}finally{h=null,p=U,v=!1}}var _=!1,x=null,C=-1,A=5,S=-1;function I(){return!(t.unstable_now()-S<A)}function re(){if(x!==null){var O=t.unstable_now();S=O;var $=!0;try{$=x(!0,O)}finally{$?St():(_=!1,x=null)}}else _=!1}var St;if(typeof y=="function")St=function(){y(re)};else if(typeof MessageChannel<"u"){var sn=new MessageChannel,Mi=sn.port2;sn.port1.onmessage=re,St=function(){Mi.postMessage(null)}}else St=function(){j(re,0)};function an(O){x=O,_||(_=!0,St())}function zi(O,$){C=j(function(){O(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){b||v||(b=!0,an(k))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var U=p;p=$;try{return O()}finally{p=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var U=p;p=O;try{return $()}finally{p=U}},t.unstable_scheduleCallback=function(O,$,U){var Z=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?Z+U:Z):U=Z,O){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=U+ue,O={id:d++,callback:$,priorityLevel:O,startTime:U,expirationTime:ue,sortIndex:-1},U>Z?(O.sortIndex=U,e(u,O),r(c)===null&&O===r(u)&&(f?(m(C),C=-1):f=!0,zi(w,U-Z))):(O.sortIndex=ue,e(c,O),b||v||(b=!0,an(k))),O},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(O){var $=p;return function(){var U=p;p=$;try{return O.apply(this,arguments)}finally{p=U}}}})(ju);bu.exports=ju;var bf=bu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jf=N,Ie=bf;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _u=new Set,Ln={};function gr(t,e){Wr(t,e),Wr(t+"Capture",e)}function Wr(t,e){for(Ln[t]=e,t=0;t<e.length;t++)_u.add(e[t])}var bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,_f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rl={},Ll={};function Nf(t){return ja.call(Ll,t)?!0:ja.call(Rl,t)?!1:_f.test(t)?Ll[t]=!0:(Rl[t]=!0,!1)}function kf(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Sf(t,e,r,n){if(e===null||typeof e>"u"||kf(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ke(t,e,r,n,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ge[t]=new ke(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ge[e]=new ke(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ge[t]=new ke(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ge[t]=new ke(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ge[t]=new ke(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ge[t]=new ke(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ge[t]=new ke(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ge[t]=new ke(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ge[t]=new ke(t,5,!1,t.toLowerCase(),null,!1,!1)});var Oo=/[\-:]([a-z])/g;function Ao(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Oo,Ao);ge[e]=new ke(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Oo,Ao);ge[e]=new ke(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Oo,Ao);ge[e]=new ke(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ge[t]=new ke(t,1,!1,t.toLowerCase(),null,!1,!1)});ge.xlinkHref=new ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ge[t]=new ke(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ro(t,e,r,n){var s=ge.hasOwnProperty(e)?ge[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Sf(e,r,s,n)&&(r=null),n||s===null?Nf(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var kt=jf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,us=Symbol.for("react.element"),Cr=Symbol.for("react.portal"),Er=Symbol.for("react.fragment"),Lo=Symbol.for("react.strict_mode"),_a=Symbol.for("react.profiler"),Nu=Symbol.for("react.provider"),ku=Symbol.for("react.context"),$o=Symbol.for("react.forward_ref"),Na=Symbol.for("react.suspense"),ka=Symbol.for("react.suspense_list"),Do=Symbol.for("react.memo"),Tt=Symbol.for("react.lazy"),Su=Symbol.for("react.offscreen"),$l=Symbol.iterator;function on(t){return t===null||typeof t!="object"?null:(t=$l&&t[$l]||t["@@iterator"],typeof t=="function"?t:null)}var Y=Object.assign,qi;function gn(t){if(qi===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);qi=e&&e[1]||""}return`
`+qi+t}var Vi=!1;function Wi(t,e){if(!t||Vi)return"";Vi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Vi=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?gn(t):""}function Cf(t){switch(t.tag){case 5:return gn(t.type);case 16:return gn("Lazy");case 13:return gn("Suspense");case 19:return gn("SuspenseList");case 0:case 2:case 15:return t=Wi(t.type,!1),t;case 11:return t=Wi(t.type.render,!1),t;case 1:return t=Wi(t.type,!0),t;default:return""}}function Sa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Er:return"Fragment";case Cr:return"Portal";case _a:return"Profiler";case Lo:return"StrictMode";case Na:return"Suspense";case ka:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ku:return(t.displayName||"Context")+".Consumer";case Nu:return(t._context.displayName||"Context")+".Provider";case $o:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Do:return e=t.displayName||null,e!==null?e:Sa(t.type)||"Memo";case Tt:e=t._payload,t=t._init;try{return Sa(t(e))}catch{}}return null}function Ef(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sa(e);case 8:return e===Lo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ht(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cu(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Pf(t){var e=Cu(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ds(t){t._valueTracker||(t._valueTracker=Pf(t))}function Eu(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Cu(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Bs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ca(t,e){var r=e.checked;return Y({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Dl(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ht(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Pu(t,e){e=e.checked,e!=null&&Ro(t,"checked",e,!1)}function Ea(t,e){Pu(t,e);var r=Ht(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Pa(t,e.type,r):e.hasOwnProperty("defaultValue")&&Pa(t,e.type,Ht(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Il(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Pa(t,e,r){(e!=="number"||Bs(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var xn=Array.isArray;function Mr(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ht(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ta(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return Y({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ul(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(E(92));if(xn(r)){if(1<r.length)throw Error(E(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ht(r)}}function Tu(t,e){var r=Ht(e.value),n=Ht(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Ml(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ou(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ou(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hs,Au=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hs=hs||document.createElement("div"),hs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $n(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var bn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tf=["Webkit","ms","Moz","O"];Object.keys(bn).forEach(function(t){Tf.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bn[e]=bn[t]})});function Ru(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||bn.hasOwnProperty(t)&&bn[t]?(""+e).trim():e+"px"}function Lu(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Ru(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Of=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Aa(t,e){if(e){if(Of[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function Ra(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var La=null;function Io(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $a=null,zr=null,Fr=null;function zl(t){if(t=rs(t)){if(typeof $a!="function")throw Error(E(280));var e=t.stateNode;e&&(e=wi(e),$a(t.stateNode,t.type,e))}}function $u(t){zr?Fr?Fr.push(t):Fr=[t]:zr=t}function Du(){if(zr){var t=zr,e=Fr;if(Fr=zr=null,zl(t),e)for(t=0;t<e.length;t++)zl(e[t])}}function Iu(t,e){return t(e)}function Uu(){}var Hi=!1;function Mu(t,e,r){if(Hi)return t(e,r);Hi=!0;try{return Iu(t,e,r)}finally{Hi=!1,(zr!==null||Fr!==null)&&(Uu(),Du())}}function Dn(t,e){var r=t.stateNode;if(r===null)return null;var n=wi(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(E(231,e,typeof r));return r}var Da=!1;if(bt)try{var ln={};Object.defineProperty(ln,"passive",{get:function(){Da=!0}}),window.addEventListener("test",ln,ln),window.removeEventListener("test",ln,ln)}catch{Da=!1}function Af(t,e,r,n,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var jn=!1,qs=null,Vs=!1,Ia=null,Rf={onError:function(t){jn=!0,qs=t}};function Lf(t,e,r,n,s,a,o,l,c){jn=!1,qs=null,Af.apply(Rf,arguments)}function $f(t,e,r,n,s,a,o,l,c){if(Lf.apply(this,arguments),jn){if(jn){var u=qs;jn=!1,qs=null}else throw Error(E(198));Vs||(Vs=!0,Ia=u)}}function xr(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function zu(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fl(t){if(xr(t)!==t)throw Error(E(188))}function Df(t){var e=t.alternate;if(!e){if(e=xr(t),e===null)throw Error(E(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return Fl(s),t;if(a===n)return Fl(s),e;a=a.sibling}throw Error(E(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(E(189))}}if(r.alternate!==n)throw Error(E(190))}if(r.tag!==3)throw Error(E(188));return r.stateNode.current===r?t:e}function Fu(t){return t=Df(t),t!==null?Bu(t):null}function Bu(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Bu(t);if(e!==null)return e;t=t.sibling}return null}var qu=Ie.unstable_scheduleCallback,Bl=Ie.unstable_cancelCallback,If=Ie.unstable_shouldYield,Uf=Ie.unstable_requestPaint,te=Ie.unstable_now,Mf=Ie.unstable_getCurrentPriorityLevel,Uo=Ie.unstable_ImmediatePriority,Vu=Ie.unstable_UserBlockingPriority,Ws=Ie.unstable_NormalPriority,zf=Ie.unstable_LowPriority,Wu=Ie.unstable_IdlePriority,gi=null,dt=null;function Ff(t){if(dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(gi,t,void 0,(t.current.flags&128)===128)}catch{}}var tt=Math.clz32?Math.clz32:Vf,Bf=Math.log,qf=Math.LN2;function Vf(t){return t>>>=0,t===0?32:31-(Bf(t)/qf|0)|0}var fs=64,ms=4194304;function yn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hs(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=yn(l):(a&=o,a!==0&&(n=yn(a)))}else o=r&~s,o!==0?n=yn(o):a!==0&&(n=yn(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-tt(e),s=1<<r,n|=t[r],e&=~s;return n}function Wf(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hf(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-tt(a),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=Wf(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function Ua(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hu(){var t=fs;return fs<<=1,!(fs&4194240)&&(fs=64),t}function Ki(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function es(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tt(e),t[e]=r}function Kf(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-tt(r),a=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~a}}function Mo(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-tt(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var q=0;function Ku(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Qu,zo,Gu,Ju,Yu,Ma=!1,ps=[],Ut=null,Mt=null,zt=null,In=new Map,Un=new Map,At=[],Qf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ql(t,e){switch(t){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":zt=null;break;case"pointerover":case"pointerout":In.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Un.delete(e.pointerId)}}function cn(t,e,r,n,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},e!==null&&(e=rs(e),e!==null&&zo(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Gf(t,e,r,n,s){switch(e){case"focusin":return Ut=cn(Ut,t,e,r,n,s),!0;case"dragenter":return Mt=cn(Mt,t,e,r,n,s),!0;case"mouseover":return zt=cn(zt,t,e,r,n,s),!0;case"pointerover":var a=s.pointerId;return In.set(a,cn(In.get(a)||null,t,e,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Un.set(a,cn(Un.get(a)||null,t,e,r,n,s)),!0}return!1}function Xu(t){var e=ar(t.target);if(e!==null){var r=xr(e);if(r!==null){if(e=r.tag,e===13){if(e=zu(r),e!==null){t.blockedOn=e,Yu(t.priority,function(){Gu(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function As(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=za(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);La=n,r.target.dispatchEvent(n),La=null}else return e=rs(r),e!==null&&zo(e),t.blockedOn=r,!1;e.shift()}return!0}function Vl(t,e,r){As(t)&&r.delete(e)}function Jf(){Ma=!1,Ut!==null&&As(Ut)&&(Ut=null),Mt!==null&&As(Mt)&&(Mt=null),zt!==null&&As(zt)&&(zt=null),In.forEach(Vl),Un.forEach(Vl)}function un(t,e){t.blockedOn===e&&(t.blockedOn=null,Ma||(Ma=!0,Ie.unstable_scheduleCallback(Ie.unstable_NormalPriority,Jf)))}function Mn(t){function e(s){return un(s,t)}if(0<ps.length){un(ps[0],t);for(var r=1;r<ps.length;r++){var n=ps[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ut!==null&&un(Ut,t),Mt!==null&&un(Mt,t),zt!==null&&un(zt,t),In.forEach(e),Un.forEach(e),r=0;r<At.length;r++)n=At[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<At.length&&(r=At[0],r.blockedOn===null);)Xu(r),r.blockedOn===null&&At.shift()}var Br=kt.ReactCurrentBatchConfig,Ks=!0;function Yf(t,e,r,n){var s=q,a=Br.transition;Br.transition=null;try{q=1,Fo(t,e,r,n)}finally{q=s,Br.transition=a}}function Xf(t,e,r,n){var s=q,a=Br.transition;Br.transition=null;try{q=4,Fo(t,e,r,n)}finally{q=s,Br.transition=a}}function Fo(t,e,r,n){if(Ks){var s=za(t,e,r,n);if(s===null)na(t,e,n,Qs,r),ql(t,n);else if(Gf(s,t,e,r,n))n.stopPropagation();else if(ql(t,n),e&4&&-1<Qf.indexOf(t)){for(;s!==null;){var a=rs(s);if(a!==null&&Qu(a),a=za(t,e,r,n),a===null&&na(t,e,n,Qs,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else na(t,e,n,null,r)}}var Qs=null;function za(t,e,r,n){if(Qs=null,t=Io(n),t=ar(t),t!==null)if(e=xr(t),e===null)t=null;else if(r=e.tag,r===13){if(t=zu(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qs=t,null}function Zu(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mf()){case Uo:return 1;case Vu:return 4;case Ws:case zf:return 16;case Wu:return 536870912;default:return 16}default:return 16}}var $t=null,Bo=null,Rs=null;function ed(){if(Rs)return Rs;var t,e=Bo,r=e.length,n,s="value"in $t?$t.value:$t.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[a-n];n++);return Rs=s.slice(t,1<n?1-n:void 0)}function Ls(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gs(){return!0}function Wl(){return!1}function Me(t){function e(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?gs:Wl,this.isPropagationStopped=Wl,this}return Y(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=gs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=gs)},persist:function(){},isPersistent:gs}),e}var en={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qo=Me(en),ts=Y({},en,{view:0,detail:0}),Zf=Me(ts),Qi,Gi,dn,xi=Y({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==dn&&(dn&&t.type==="mousemove"?(Qi=t.screenX-dn.screenX,Gi=t.screenY-dn.screenY):Gi=Qi=0,dn=t),Qi)},movementY:function(t){return"movementY"in t?t.movementY:Gi}}),Hl=Me(xi),em=Y({},xi,{dataTransfer:0}),tm=Me(em),rm=Y({},ts,{relatedTarget:0}),Ji=Me(rm),nm=Y({},en,{animationName:0,elapsedTime:0,pseudoElement:0}),sm=Me(nm),im=Y({},en,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),am=Me(im),om=Y({},en,{data:0}),Kl=Me(om),lm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},um={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=um[t])?!!e[t]:!1}function Vo(){return dm}var hm=Y({},ts,{key:function(t){if(t.key){var e=lm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ls(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vo,charCode:function(t){return t.type==="keypress"?Ls(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ls(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fm=Me(hm),mm=Y({},xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ql=Me(mm),pm=Y({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vo}),gm=Me(pm),xm=Y({},en,{propertyName:0,elapsedTime:0,pseudoElement:0}),ym=Me(xm),vm=Y({},xi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wm=Me(vm),bm=[9,13,27,32],Wo=bt&&"CompositionEvent"in window,_n=null;bt&&"documentMode"in document&&(_n=document.documentMode);var jm=bt&&"TextEvent"in window&&!_n,td=bt&&(!Wo||_n&&8<_n&&11>=_n),Gl=" ",Jl=!1;function rd(t,e){switch(t){case"keyup":return bm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pr=!1;function _m(t,e){switch(t){case"compositionend":return nd(e);case"keypress":return e.which!==32?null:(Jl=!0,Gl);case"textInput":return t=e.data,t===Gl&&Jl?null:t;default:return null}}function Nm(t,e){if(Pr)return t==="compositionend"||!Wo&&rd(t,e)?(t=ed(),Rs=Bo=$t=null,Pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return td&&e.locale!=="ko"?null:e.data;default:return null}}var km={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!km[t.type]:e==="textarea"}function sd(t,e,r,n){$u(n),e=Gs(e,"onChange"),0<e.length&&(r=new qo("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Nn=null,zn=null;function Sm(t){pd(t,0)}function yi(t){var e=Ar(t);if(Eu(e))return t}function Cm(t,e){if(t==="change")return e}var id=!1;if(bt){var Yi;if(bt){var Xi="oninput"in document;if(!Xi){var Xl=document.createElement("div");Xl.setAttribute("oninput","return;"),Xi=typeof Xl.oninput=="function"}Yi=Xi}else Yi=!1;id=Yi&&(!document.documentMode||9<document.documentMode)}function Zl(){Nn&&(Nn.detachEvent("onpropertychange",ad),zn=Nn=null)}function ad(t){if(t.propertyName==="value"&&yi(zn)){var e=[];sd(e,zn,t,Io(t)),Mu(Sm,e)}}function Em(t,e,r){t==="focusin"?(Zl(),Nn=e,zn=r,Nn.attachEvent("onpropertychange",ad)):t==="focusout"&&Zl()}function Pm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yi(zn)}function Tm(t,e){if(t==="click")return yi(e)}function Om(t,e){if(t==="input"||t==="change")return yi(e)}function Am(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var st=typeof Object.is=="function"?Object.is:Am;function Fn(t,e){if(st(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!ja.call(e,s)||!st(t[s],e[s]))return!1}return!0}function ec(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tc(t,e){var r=ec(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ec(r)}}function od(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?od(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ld(){for(var t=window,e=Bs();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Bs(t.document)}return e}function Ho(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Rm(t){var e=ld(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&od(r.ownerDocument.documentElement,r)){if(n!==null&&Ho(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!t.extend&&a>n&&(s=n,n=a,a=s),s=tc(r,a);var o=tc(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Lm=bt&&"documentMode"in document&&11>=document.documentMode,Tr=null,Fa=null,kn=null,Ba=!1;function rc(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ba||Tr==null||Tr!==Bs(n)||(n=Tr,"selectionStart"in n&&Ho(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),kn&&Fn(kn,n)||(kn=n,n=Gs(Fa,"onSelect"),0<n.length&&(e=new qo("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Tr)))}function xs(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Or={animationend:xs("Animation","AnimationEnd"),animationiteration:xs("Animation","AnimationIteration"),animationstart:xs("Animation","AnimationStart"),transitionend:xs("Transition","TransitionEnd")},Zi={},cd={};bt&&(cd=document.createElement("div").style,"AnimationEvent"in window||(delete Or.animationend.animation,delete Or.animationiteration.animation,delete Or.animationstart.animation),"TransitionEvent"in window||delete Or.transitionend.transition);function vi(t){if(Zi[t])return Zi[t];if(!Or[t])return t;var e=Or[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in cd)return Zi[t]=e[r];return t}var ud=vi("animationend"),dd=vi("animationiteration"),hd=vi("animationstart"),fd=vi("transitionend"),md=new Map,nc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qt(t,e){md.set(t,e),gr(e,[t])}for(var ea=0;ea<nc.length;ea++){var ta=nc[ea],$m=ta.toLowerCase(),Dm=ta[0].toUpperCase()+ta.slice(1);Qt($m,"on"+Dm)}Qt(ud,"onAnimationEnd");Qt(dd,"onAnimationIteration");Qt(hd,"onAnimationStart");Qt("dblclick","onDoubleClick");Qt("focusin","onFocus");Qt("focusout","onBlur");Qt(fd,"onTransitionEnd");Wr("onMouseEnter",["mouseout","mouseover"]);Wr("onMouseLeave",["mouseout","mouseover"]);Wr("onPointerEnter",["pointerout","pointerover"]);Wr("onPointerLeave",["pointerout","pointerover"]);gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gr("onBeforeInput",["compositionend","keypress","textInput","paste"]);gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Im=new Set("cancel close invalid load scroll toggle".split(" ").concat(vn));function sc(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,$f(n,e,void 0,t),t.currentTarget=null}function pd(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;sc(s,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;sc(s,l,u),a=c}}}if(Vs)throw t=Ia,Vs=!1,Ia=null,t}function H(t,e){var r=e[Ka];r===void 0&&(r=e[Ka]=new Set);var n=t+"__bubble";r.has(n)||(gd(e,t,2,!1),r.add(n))}function ra(t,e,r){var n=0;e&&(n|=4),gd(r,t,n,e)}var ys="_reactListening"+Math.random().toString(36).slice(2);function Bn(t){if(!t[ys]){t[ys]=!0,_u.forEach(function(r){r!=="selectionchange"&&(Im.has(r)||ra(r,!1,t),ra(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ys]||(e[ys]=!0,ra("selectionchange",!1,e))}}function gd(t,e,r,n){switch(Zu(e)){case 1:var s=Yf;break;case 4:s=Xf;break;default:s=Fo}r=s.bind(null,e,r,t),s=void 0,!Da||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function na(t,e,r,n,s){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ar(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}Mu(function(){var u=a,d=Io(r),h=[];e:{var p=md.get(t);if(p!==void 0){var v=qo,b=t;switch(t){case"keypress":if(Ls(r)===0)break e;case"keydown":case"keyup":v=fm;break;case"focusin":b="focus",v=Ji;break;case"focusout":b="blur",v=Ji;break;case"beforeblur":case"afterblur":v=Ji;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Hl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=tm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=gm;break;case ud:case dd:case hd:v=sm;break;case fd:v=ym;break;case"scroll":v=Zf;break;case"wheel":v=wm;break;case"copy":case"cut":case"paste":v=am;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Ql}var f=(e&4)!==0,j=!f&&t==="scroll",m=f?p!==null?p+"Capture":null:p;f=[];for(var y=u,g;y!==null;){g=y;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,m!==null&&(w=Dn(y,m),w!=null&&f.push(qn(y,w,g)))),j)break;y=y.return}0<f.length&&(p=new v(p,b,null,r,d),h.push({event:p,listeners:f}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&r!==La&&(b=r.relatedTarget||r.fromElement)&&(ar(b)||b[jt]))break e;if((v||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,v?(b=r.relatedTarget||r.toElement,v=u,b=b?ar(b):null,b!==null&&(j=xr(b),b!==j||b.tag!==5&&b.tag!==6)&&(b=null)):(v=null,b=u),v!==b)){if(f=Hl,w="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(f=Ql,w="onPointerLeave",m="onPointerEnter",y="pointer"),j=v==null?p:Ar(v),g=b==null?p:Ar(b),p=new f(w,y+"leave",v,r,d),p.target=j,p.relatedTarget=g,w=null,ar(d)===u&&(f=new f(m,y+"enter",b,r,d),f.target=g,f.relatedTarget=j,w=f),j=w,v&&b)t:{for(f=v,m=b,y=0,g=f;g;g=vr(g))y++;for(g=0,w=m;w;w=vr(w))g++;for(;0<y-g;)f=vr(f),y--;for(;0<g-y;)m=vr(m),g--;for(;y--;){if(f===m||m!==null&&f===m.alternate)break t;f=vr(f),m=vr(m)}f=null}else f=null;v!==null&&ic(h,p,v,f,!1),b!==null&&j!==null&&ic(h,j,b,f,!0)}}e:{if(p=u?Ar(u):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var k=Cm;else if(Yl(p))if(id)k=Om;else{k=Pm;var _=Em}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=Tm);if(k&&(k=k(t,u))){sd(h,k,r,d);break e}_&&_(t,p,u),t==="focusout"&&(_=p._wrapperState)&&_.controlled&&p.type==="number"&&Pa(p,"number",p.value)}switch(_=u?Ar(u):window,t){case"focusin":(Yl(_)||_.contentEditable==="true")&&(Tr=_,Fa=u,kn=null);break;case"focusout":kn=Fa=Tr=null;break;case"mousedown":Ba=!0;break;case"contextmenu":case"mouseup":case"dragend":Ba=!1,rc(h,r,d);break;case"selectionchange":if(Lm)break;case"keydown":case"keyup":rc(h,r,d)}var x;if(Wo)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Pr?rd(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(td&&r.locale!=="ko"&&(Pr||C!=="onCompositionStart"?C==="onCompositionEnd"&&Pr&&(x=ed()):($t=d,Bo="value"in $t?$t.value:$t.textContent,Pr=!0)),_=Gs(u,C),0<_.length&&(C=new Kl(C,t,null,r,d),h.push({event:C,listeners:_}),x?C.data=x:(x=nd(r),x!==null&&(C.data=x)))),(x=jm?_m(t,r):Nm(t,r))&&(u=Gs(u,"onBeforeInput"),0<u.length&&(d=new Kl("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=x))}pd(h,e)})}function qn(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Gs(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Dn(t,r),a!=null&&n.unshift(qn(t,a,s)),a=Dn(t,e),a!=null&&n.push(qn(t,a,s))),t=t.return}return n}function vr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ic(t,e,r,n,s){for(var a=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Dn(r,a),c!=null&&o.unshift(qn(r,c,l))):s||(c=Dn(r,a),c!=null&&o.push(qn(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Um=/\r\n?/g,Mm=/\u0000|\uFFFD/g;function ac(t){return(typeof t=="string"?t:""+t).replace(Um,`
`).replace(Mm,"")}function vs(t,e,r){if(e=ac(e),ac(t)!==e&&r)throw Error(E(425))}function Js(){}var qa=null,Va=null;function Wa(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ha=typeof setTimeout=="function"?setTimeout:void 0,zm=typeof clearTimeout=="function"?clearTimeout:void 0,oc=typeof Promise=="function"?Promise:void 0,Fm=typeof queueMicrotask=="function"?queueMicrotask:typeof oc<"u"?function(t){return oc.resolve(null).then(t).catch(Bm)}:Ha;function Bm(t){setTimeout(function(){throw t})}function sa(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Mn(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Mn(e)}function Ft(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function lc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var tn=Math.random().toString(36).slice(2),ut="__reactFiber$"+tn,Vn="__reactProps$"+tn,jt="__reactContainer$"+tn,Ka="__reactEvents$"+tn,qm="__reactListeners$"+tn,Vm="__reactHandles$"+tn;function ar(t){var e=t[ut];if(e)return e;for(var r=t.parentNode;r;){if(e=r[jt]||r[ut]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=lc(t);t!==null;){if(r=t[ut])return r;t=lc(t)}return e}t=r,r=t.parentNode}return null}function rs(t){return t=t[ut]||t[jt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ar(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function wi(t){return t[Vn]||null}var Qa=[],Rr=-1;function Gt(t){return{current:t}}function K(t){0>Rr||(t.current=Qa[Rr],Qa[Rr]=null,Rr--)}function W(t,e){Rr++,Qa[Rr]=t.current,t.current=e}var Kt={},we=Gt(Kt),Pe=Gt(!1),dr=Kt;function Hr(t,e){var r=t.type.contextTypes;if(!r)return Kt;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Te(t){return t=t.childContextTypes,t!=null}function Ys(){K(Pe),K(we)}function cc(t,e,r){if(we.current!==Kt)throw Error(E(168));W(we,e),W(Pe,r)}function xd(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(E(108,Ef(t)||"Unknown",s));return Y({},r,n)}function Xs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kt,dr=we.current,W(we,t),W(Pe,Pe.current),!0}function uc(t,e,r){var n=t.stateNode;if(!n)throw Error(E(169));r?(t=xd(t,e,dr),n.__reactInternalMemoizedMergedChildContext=t,K(Pe),K(we),W(we,t)):K(Pe),W(Pe,r)}var gt=null,bi=!1,ia=!1;function yd(t){gt===null?gt=[t]:gt.push(t)}function Wm(t){bi=!0,yd(t)}function Jt(){if(!ia&&gt!==null){ia=!0;var t=0,e=q;try{var r=gt;for(q=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}gt=null,bi=!1}catch(s){throw gt!==null&&(gt=gt.slice(t+1)),qu(Uo,Jt),s}finally{q=e,ia=!1}}return null}var Lr=[],$r=0,Zs=null,ei=0,ze=[],Fe=0,hr=null,xt=1,yt="";function rr(t,e){Lr[$r++]=ei,Lr[$r++]=Zs,Zs=t,ei=e}function vd(t,e,r){ze[Fe++]=xt,ze[Fe++]=yt,ze[Fe++]=hr,hr=t;var n=xt;t=yt;var s=32-tt(n)-1;n&=~(1<<s),r+=1;var a=32-tt(e)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,xt=1<<32-tt(e)+s|r<<s|n,yt=a+t}else xt=1<<a|r<<s|n,yt=t}function Ko(t){t.return!==null&&(rr(t,1),vd(t,1,0))}function Qo(t){for(;t===Zs;)Zs=Lr[--$r],Lr[$r]=null,ei=Lr[--$r],Lr[$r]=null;for(;t===hr;)hr=ze[--Fe],ze[Fe]=null,yt=ze[--Fe],ze[Fe]=null,xt=ze[--Fe],ze[Fe]=null}var De=null,Le=null,Q=!1,et=null;function wd(t,e){var r=Be(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function dc(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,De=t,Le=Ft(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,De=t,Le=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=hr!==null?{id:xt,overflow:yt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Be(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,De=t,Le=null,!0):!1;default:return!1}}function Ga(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ja(t){if(Q){var e=Le;if(e){var r=e;if(!dc(t,e)){if(Ga(t))throw Error(E(418));e=Ft(r.nextSibling);var n=De;e&&dc(t,e)?wd(n,r):(t.flags=t.flags&-4097|2,Q=!1,De=t)}}else{if(Ga(t))throw Error(E(418));t.flags=t.flags&-4097|2,Q=!1,De=t}}}function hc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;De=t}function ws(t){if(t!==De)return!1;if(!Q)return hc(t),Q=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wa(t.type,t.memoizedProps)),e&&(e=Le)){if(Ga(t))throw bd(),Error(E(418));for(;e;)wd(t,e),e=Ft(e.nextSibling)}if(hc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Le=Ft(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Le=null}}else Le=De?Ft(t.stateNode.nextSibling):null;return!0}function bd(){for(var t=Le;t;)t=Ft(t.nextSibling)}function Kr(){Le=De=null,Q=!1}function Go(t){et===null?et=[t]:et.push(t)}var Hm=kt.ReactCurrentBatchConfig;function hn(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(E(309));var n=r.stateNode}if(!n)throw Error(E(147,t));var s=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(E(284));if(!r._owner)throw Error(E(290,t))}return t}function bs(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fc(t){var e=t._init;return e(t._payload)}function jd(t){function e(m,y){if(t){var g=m.deletions;g===null?(m.deletions=[y],m.flags|=16):g.push(y)}}function r(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function n(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function s(m,y){return m=Wt(m,y),m.index=0,m.sibling=null,m}function a(m,y,g){return m.index=g,t?(g=m.alternate,g!==null?(g=g.index,g<y?(m.flags|=2,y):g):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,y,g,w){return y===null||y.tag!==6?(y=ha(g,m.mode,w),y.return=m,y):(y=s(y,g),y.return=m,y)}function c(m,y,g,w){var k=g.type;return k===Er?d(m,y,g.props.children,w,g.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Tt&&fc(k)===y.type)?(w=s(y,g.props),w.ref=hn(m,y,g),w.return=m,w):(w=Fs(g.type,g.key,g.props,null,m.mode,w),w.ref=hn(m,y,g),w.return=m,w)}function u(m,y,g,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==g.containerInfo||y.stateNode.implementation!==g.implementation?(y=fa(g,m.mode,w),y.return=m,y):(y=s(y,g.children||[]),y.return=m,y)}function d(m,y,g,w,k){return y===null||y.tag!==7?(y=ur(g,m.mode,w,k),y.return=m,y):(y=s(y,g),y.return=m,y)}function h(m,y,g){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ha(""+y,m.mode,g),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case us:return g=Fs(y.type,y.key,y.props,null,m.mode,g),g.ref=hn(m,null,y),g.return=m,g;case Cr:return y=fa(y,m.mode,g),y.return=m,y;case Tt:var w=y._init;return h(m,w(y._payload),g)}if(xn(y)||on(y))return y=ur(y,m.mode,g,null),y.return=m,y;bs(m,y)}return null}function p(m,y,g,w){var k=y!==null?y.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:l(m,y,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case us:return g.key===k?c(m,y,g,w):null;case Cr:return g.key===k?u(m,y,g,w):null;case Tt:return k=g._init,p(m,y,k(g._payload),w)}if(xn(g)||on(g))return k!==null?null:d(m,y,g,w,null);bs(m,g)}return null}function v(m,y,g,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(g)||null,l(y,m,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case us:return m=m.get(w.key===null?g:w.key)||null,c(y,m,w,k);case Cr:return m=m.get(w.key===null?g:w.key)||null,u(y,m,w,k);case Tt:var _=w._init;return v(m,y,g,_(w._payload),k)}if(xn(w)||on(w))return m=m.get(g)||null,d(y,m,w,k,null);bs(y,w)}return null}function b(m,y,g,w){for(var k=null,_=null,x=y,C=y=0,A=null;x!==null&&C<g.length;C++){x.index>C?(A=x,x=null):A=x.sibling;var S=p(m,x,g[C],w);if(S===null){x===null&&(x=A);break}t&&x&&S.alternate===null&&e(m,x),y=a(S,y,C),_===null?k=S:_.sibling=S,_=S,x=A}if(C===g.length)return r(m,x),Q&&rr(m,C),k;if(x===null){for(;C<g.length;C++)x=h(m,g[C],w),x!==null&&(y=a(x,y,C),_===null?k=x:_.sibling=x,_=x);return Q&&rr(m,C),k}for(x=n(m,x);C<g.length;C++)A=v(x,m,C,g[C],w),A!==null&&(t&&A.alternate!==null&&x.delete(A.key===null?C:A.key),y=a(A,y,C),_===null?k=A:_.sibling=A,_=A);return t&&x.forEach(function(I){return e(m,I)}),Q&&rr(m,C),k}function f(m,y,g,w){var k=on(g);if(typeof k!="function")throw Error(E(150));if(g=k.call(g),g==null)throw Error(E(151));for(var _=k=null,x=y,C=y=0,A=null,S=g.next();x!==null&&!S.done;C++,S=g.next()){x.index>C?(A=x,x=null):A=x.sibling;var I=p(m,x,S.value,w);if(I===null){x===null&&(x=A);break}t&&x&&I.alternate===null&&e(m,x),y=a(I,y,C),_===null?k=I:_.sibling=I,_=I,x=A}if(S.done)return r(m,x),Q&&rr(m,C),k;if(x===null){for(;!S.done;C++,S=g.next())S=h(m,S.value,w),S!==null&&(y=a(S,y,C),_===null?k=S:_.sibling=S,_=S);return Q&&rr(m,C),k}for(x=n(m,x);!S.done;C++,S=g.next())S=v(x,m,C,S.value,w),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?C:S.key),y=a(S,y,C),_===null?k=S:_.sibling=S,_=S);return t&&x.forEach(function(re){return e(m,re)}),Q&&rr(m,C),k}function j(m,y,g,w){if(typeof g=="object"&&g!==null&&g.type===Er&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case us:e:{for(var k=g.key,_=y;_!==null;){if(_.key===k){if(k=g.type,k===Er){if(_.tag===7){r(m,_.sibling),y=s(_,g.props.children),y.return=m,m=y;break e}}else if(_.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Tt&&fc(k)===_.type){r(m,_.sibling),y=s(_,g.props),y.ref=hn(m,_,g),y.return=m,m=y;break e}r(m,_);break}else e(m,_);_=_.sibling}g.type===Er?(y=ur(g.props.children,m.mode,w,g.key),y.return=m,m=y):(w=Fs(g.type,g.key,g.props,null,m.mode,w),w.ref=hn(m,y,g),w.return=m,m=w)}return o(m);case Cr:e:{for(_=g.key;y!==null;){if(y.key===_)if(y.tag===4&&y.stateNode.containerInfo===g.containerInfo&&y.stateNode.implementation===g.implementation){r(m,y.sibling),y=s(y,g.children||[]),y.return=m,m=y;break e}else{r(m,y);break}else e(m,y);y=y.sibling}y=fa(g,m.mode,w),y.return=m,m=y}return o(m);case Tt:return _=g._init,j(m,y,_(g._payload),w)}if(xn(g))return b(m,y,g,w);if(on(g))return f(m,y,g,w);bs(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,y!==null&&y.tag===6?(r(m,y.sibling),y=s(y,g),y.return=m,m=y):(r(m,y),y=ha(g,m.mode,w),y.return=m,m=y),o(m)):r(m,y)}return j}var Qr=jd(!0),_d=jd(!1),ti=Gt(null),ri=null,Dr=null,Jo=null;function Yo(){Jo=Dr=ri=null}function Xo(t){var e=ti.current;K(ti),t._currentValue=e}function Ya(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function qr(t,e){ri=t,Jo=Dr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ee=!0),t.firstContext=null)}function He(t){var e=t._currentValue;if(Jo!==t)if(t={context:t,memoizedValue:e,next:null},Dr===null){if(ri===null)throw Error(E(308));Dr=t,ri.dependencies={lanes:0,firstContext:t}}else Dr=Dr.next=t;return e}var or=null;function Zo(t){or===null?or=[t]:or.push(t)}function Nd(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Zo(e)):(r.next=s.next,s.next=r),e.interleaved=r,_t(t,n)}function _t(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ot=!1;function el(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bt(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,F&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,_t(t,r)}return s=n.interleaved,s===null?(e.next=e,Zo(n)):(e.next=s.next,s.next=e),n.interleaved=e,_t(t,r)}function $s(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Mo(t,r)}}function mc(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ni(t,e,r,n){var s=t.updateQueue;Ot=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;o=0,d=u=c=null,l=a;do{var p=l.lane,v=l.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,f=l;switch(p=e,v=r,f.tag){case 1:if(b=f.payload,typeof b=="function"){h=b.call(v,h,p);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=f.payload,p=typeof b=="function"?b.call(v,h,p):b,p==null)break e;h=Y({},h,p);break e;case 2:Ot=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else v={eventTime:v,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=v,c=h):d=d.next=v,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);mr|=o,t.lanes=o,t.memoizedState=h}}function pc(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(E(191,s));s.call(n)}}}var ns={},ht=Gt(ns),Wn=Gt(ns),Hn=Gt(ns);function lr(t){if(t===ns)throw Error(E(174));return t}function tl(t,e){switch(W(Hn,e),W(Wn,t),W(ht,ns),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Oa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Oa(e,t)}K(ht),W(ht,e)}function Gr(){K(ht),K(Wn),K(Hn)}function Sd(t){lr(Hn.current);var e=lr(ht.current),r=Oa(e,t.type);e!==r&&(W(Wn,t),W(ht,r))}function rl(t){Wn.current===t&&(K(ht),K(Wn))}var G=Gt(0);function si(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var aa=[];function nl(){for(var t=0;t<aa.length;t++)aa[t]._workInProgressVersionPrimary=null;aa.length=0}var Ds=kt.ReactCurrentDispatcher,oa=kt.ReactCurrentBatchConfig,fr=0,J=null,ae=null,de=null,ii=!1,Sn=!1,Kn=0,Km=0;function xe(){throw Error(E(321))}function sl(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!st(t[r],e[r]))return!1;return!0}function il(t,e,r,n,s,a){if(fr=a,J=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ds.current=t===null||t.memoizedState===null?Ym:Xm,t=r(n,s),Sn){a=0;do{if(Sn=!1,Kn=0,25<=a)throw Error(E(301));a+=1,de=ae=null,e.updateQueue=null,Ds.current=Zm,t=r(n,s)}while(Sn)}if(Ds.current=ai,e=ae!==null&&ae.next!==null,fr=0,de=ae=J=null,ii=!1,e)throw Error(E(300));return t}function al(){var t=Kn!==0;return Kn=0,t}function lt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?J.memoizedState=de=t:de=de.next=t,de}function Ke(){if(ae===null){var t=J.alternate;t=t!==null?t.memoizedState:null}else t=ae.next;var e=de===null?J.memoizedState:de.next;if(e!==null)de=e,ae=t;else{if(t===null)throw Error(E(310));ae=t,t={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},de===null?J.memoizedState=de=t:de=de.next=t}return de}function Qn(t,e){return typeof e=="function"?e(t):e}function la(t){var e=Ke(),r=e.queue;if(r===null)throw Error(E(311));r.lastRenderedReducer=t;var n=ae,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((fr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,J.lanes|=d,mr|=d}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,st(n,e.memoizedState)||(Ee=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do a=s.lane,J.lanes|=a,mr|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function ca(t){var e=Ke(),r=e.queue;if(r===null)throw Error(E(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);st(a,e.memoizedState)||(Ee=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function Cd(){}function Ed(t,e){var r=J,n=Ke(),s=e(),a=!st(n.memoizedState,s);if(a&&(n.memoizedState=s,Ee=!0),n=n.queue,ol(Od.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||de!==null&&de.memoizedState.tag&1){if(r.flags|=2048,Gn(9,Td.bind(null,r,n,s,e),void 0,null),he===null)throw Error(E(349));fr&30||Pd(r,e,s)}return s}function Pd(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=J.updateQueue,e===null?(e={lastEffect:null,stores:null},J.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Td(t,e,r,n){e.value=r,e.getSnapshot=n,Ad(e)&&Rd(t)}function Od(t,e,r){return r(function(){Ad(e)&&Rd(t)})}function Ad(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!st(t,r)}catch{return!0}}function Rd(t){var e=_t(t,1);e!==null&&rt(e,t,1,-1)}function gc(t){var e=lt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:t},e.queue=t,t=t.dispatch=Jm.bind(null,J,t),[e.memoizedState,t]}function Gn(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=J.updateQueue,e===null?(e={lastEffect:null,stores:null},J.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Ld(){return Ke().memoizedState}function Is(t,e,r,n){var s=lt();J.flags|=t,s.memoizedState=Gn(1|e,r,void 0,n===void 0?null:n)}function ji(t,e,r,n){var s=Ke();n=n===void 0?null:n;var a=void 0;if(ae!==null){var o=ae.memoizedState;if(a=o.destroy,n!==null&&sl(n,o.deps)){s.memoizedState=Gn(e,r,a,n);return}}J.flags|=t,s.memoizedState=Gn(1|e,r,a,n)}function xc(t,e){return Is(8390656,8,t,e)}function ol(t,e){return ji(2048,8,t,e)}function $d(t,e){return ji(4,2,t,e)}function Dd(t,e){return ji(4,4,t,e)}function Id(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ud(t,e,r){return r=r!=null?r.concat([t]):null,ji(4,4,Id.bind(null,e,t),r)}function ll(){}function Md(t,e){var r=Ke();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&sl(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function zd(t,e){var r=Ke();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&sl(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Fd(t,e,r){return fr&21?(st(r,e)||(r=Hu(),J.lanes|=r,mr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ee=!0),t.memoizedState=r)}function Qm(t,e){var r=q;q=r!==0&&4>r?r:4,t(!0);var n=oa.transition;oa.transition={};try{t(!1),e()}finally{q=r,oa.transition=n}}function Bd(){return Ke().memoizedState}function Gm(t,e,r){var n=Vt(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},qd(t))Vd(e,r);else if(r=Nd(t,e,r,n),r!==null){var s=_e();rt(r,t,n,s),Wd(r,e,n)}}function Jm(t,e,r){var n=Vt(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(qd(t))Vd(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,st(l,o)){var c=e.interleaved;c===null?(s.next=s,Zo(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=Nd(t,e,s,n),r!==null&&(s=_e(),rt(r,t,n,s),Wd(r,e,n))}}function qd(t){var e=t.alternate;return t===J||e!==null&&e===J}function Vd(t,e){Sn=ii=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Wd(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Mo(t,r)}}var ai={readContext:He,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useInsertionEffect:xe,useLayoutEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useMutableSource:xe,useSyncExternalStore:xe,useId:xe,unstable_isNewReconciler:!1},Ym={readContext:He,useCallback:function(t,e){return lt().memoizedState=[t,e===void 0?null:e],t},useContext:He,useEffect:xc,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Is(4194308,4,Id.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Is(4194308,4,t,e)},useInsertionEffect:function(t,e){return Is(4,2,t,e)},useMemo:function(t,e){var r=lt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=lt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Gm.bind(null,J,t),[n.memoizedState,t]},useRef:function(t){var e=lt();return t={current:t},e.memoizedState=t},useState:gc,useDebugValue:ll,useDeferredValue:function(t){return lt().memoizedState=t},useTransition:function(){var t=gc(!1),e=t[0];return t=Qm.bind(null,t[1]),lt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=J,s=lt();if(Q){if(r===void 0)throw Error(E(407));r=r()}else{if(r=e(),he===null)throw Error(E(349));fr&30||Pd(n,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,xc(Od.bind(null,n,a,t),[t]),n.flags|=2048,Gn(9,Td.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=lt(),e=he.identifierPrefix;if(Q){var r=yt,n=xt;r=(n&~(1<<32-tt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Kn++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Km++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Xm={readContext:He,useCallback:Md,useContext:He,useEffect:ol,useImperativeHandle:Ud,useInsertionEffect:$d,useLayoutEffect:Dd,useMemo:zd,useReducer:la,useRef:Ld,useState:function(){return la(Qn)},useDebugValue:ll,useDeferredValue:function(t){var e=Ke();return Fd(e,ae.memoizedState,t)},useTransition:function(){var t=la(Qn)[0],e=Ke().memoizedState;return[t,e]},useMutableSource:Cd,useSyncExternalStore:Ed,useId:Bd,unstable_isNewReconciler:!1},Zm={readContext:He,useCallback:Md,useContext:He,useEffect:ol,useImperativeHandle:Ud,useInsertionEffect:$d,useLayoutEffect:Dd,useMemo:zd,useReducer:ca,useRef:Ld,useState:function(){return ca(Qn)},useDebugValue:ll,useDeferredValue:function(t){var e=Ke();return ae===null?e.memoizedState=t:Fd(e,ae.memoizedState,t)},useTransition:function(){var t=ca(Qn)[0],e=Ke().memoizedState;return[t,e]},useMutableSource:Cd,useSyncExternalStore:Ed,useId:Bd,unstable_isNewReconciler:!1};function Ye(t,e){if(t&&t.defaultProps){e=Y({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Xa(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Y({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var _i={isMounted:function(t){return(t=t._reactInternals)?xr(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=_e(),s=Vt(t),a=vt(n,s);a.payload=e,r!=null&&(a.callback=r),e=Bt(t,a,s),e!==null&&(rt(e,t,s,n),$s(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=_e(),s=Vt(t),a=vt(n,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Bt(t,a,s),e!==null&&(rt(e,t,s,n),$s(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=_e(),n=Vt(t),s=vt(r,n);s.tag=2,e!=null&&(s.callback=e),e=Bt(t,s,n),e!==null&&(rt(e,t,n,r),$s(e,t,n))}};function yc(t,e,r,n,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Fn(r,n)||!Fn(s,a):!0}function Hd(t,e,r){var n=!1,s=Kt,a=e.contextType;return typeof a=="object"&&a!==null?a=He(a):(s=Te(e)?dr:we.current,n=e.contextTypes,a=(n=n!=null)?Hr(t,s):Kt),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_i,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function vc(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&_i.enqueueReplaceState(e,e.state,null)}function Za(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},el(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=He(a):(a=Te(e)?dr:we.current,s.context=Hr(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Xa(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&_i.enqueueReplaceState(s,s.state,null),ni(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Jr(t,e){try{var r="",n=e;do r+=Cf(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function ua(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function eo(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var ep=typeof WeakMap=="function"?WeakMap:Map;function Kd(t,e,r){r=vt(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){li||(li=!0,uo=n),eo(t,e)},r}function Qd(t,e,r){r=vt(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){eo(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){eo(t,e),typeof n!="function"&&(qt===null?qt=new Set([this]):qt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function wc(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new ep;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=mp.bind(null,t,e,r),e.then(t,t))}function bc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jc(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=vt(-1,1),e.tag=2,Bt(r,e,1))),r.lanes|=1),t)}var tp=kt.ReactCurrentOwner,Ee=!1;function je(t,e,r,n){e.child=t===null?_d(e,null,r,n):Qr(e,t.child,r,n)}function _c(t,e,r,n,s){r=r.render;var a=e.ref;return qr(e,s),n=il(t,e,r,n,a,s),r=al(),t!==null&&!Ee?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nt(t,e,s)):(Q&&r&&Ko(e),e.flags|=1,je(t,e,n,s),e.child)}function Nc(t,e,r,n,s){if(t===null){var a=r.type;return typeof a=="function"&&!gl(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,Gd(t,e,a,n,s)):(t=Fs(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Fn,r(o,n)&&t.ref===e.ref)return Nt(t,e,s)}return e.flags|=1,t=Wt(a,n),t.ref=e.ref,t.return=e,e.child=t}function Gd(t,e,r,n,s){if(t!==null){var a=t.memoizedProps;if(Fn(a,n)&&t.ref===e.ref)if(Ee=!1,e.pendingProps=n=a,(t.lanes&s)!==0)t.flags&131072&&(Ee=!0);else return e.lanes=t.lanes,Nt(t,e,s)}return to(t,e,r,n,s)}function Jd(t,e,r){var n=e.pendingProps,s=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},W(Ur,Re),Re|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,W(Ur,Re),Re|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,W(Ur,Re),Re|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,W(Ur,Re),Re|=n;return je(t,e,s,r),e.child}function Yd(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function to(t,e,r,n,s){var a=Te(r)?dr:we.current;return a=Hr(e,a),qr(e,s),r=il(t,e,r,n,a,s),n=al(),t!==null&&!Ee?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nt(t,e,s)):(Q&&n&&Ko(e),e.flags|=1,je(t,e,r,s),e.child)}function kc(t,e,r,n,s){if(Te(r)){var a=!0;Xs(e)}else a=!1;if(qr(e,s),e.stateNode===null)Us(t,e),Hd(e,r,n),Za(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=He(u):(u=Te(r)?dr:we.current,u=Hr(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&vc(e,o,n,u),Ot=!1;var p=e.memoizedState;o.state=p,ni(e,n,o,s),c=e.memoizedState,l!==n||p!==c||Pe.current||Ot?(typeof d=="function"&&(Xa(e,r,d,n),c=e.memoizedState),(l=Ot||yc(e,r,l,n,p,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,kd(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ye(e.type,l),o.props=u,h=e.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=He(c):(c=Te(r)?dr:we.current,c=Hr(e,c));var v=r.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==c)&&vc(e,o,n,c),Ot=!1,p=e.memoizedState,o.state=p,ni(e,n,o,s);var b=e.memoizedState;l!==h||p!==b||Pe.current||Ot?(typeof v=="function"&&(Xa(e,r,v,n),b=e.memoizedState),(u=Ot||yc(e,r,u,n,p,b,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=b),o.props=n,o.state=b,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return ro(t,e,r,n,a,s)}function ro(t,e,r,n,s,a){Yd(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&uc(e,r,!1),Nt(t,e,a);n=e.stateNode,tp.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Qr(e,t.child,null,a),e.child=Qr(e,null,l,a)):je(t,e,l,a),e.memoizedState=n.state,s&&uc(e,r,!0),e.child}function Xd(t){var e=t.stateNode;e.pendingContext?cc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cc(t,e.context,!1),tl(t,e.containerInfo)}function Sc(t,e,r,n,s){return Kr(),Go(s),e.flags|=256,je(t,e,r,n),e.child}var no={dehydrated:null,treeContext:null,retryLane:0};function so(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zd(t,e,r){var n=e.pendingProps,s=G.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),W(G,s&1),t===null)return Ja(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Si(o,n,0,null),t=ur(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=so(r),e.memoizedState=no,t):cl(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return rp(t,e,o,n,l,s,r);if(a){a=n.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Wt(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Wt(l,a):(a=ur(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?so(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=no,n}return a=t.child,t=a.sibling,n=Wt(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function cl(t,e){return e=Si({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function js(t,e,r,n){return n!==null&&Go(n),Qr(e,t.child,null,r),t=cl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rp(t,e,r,n,s,a,o){if(r)return e.flags&256?(e.flags&=-257,n=ua(Error(E(422))),js(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,s=e.mode,n=Si({mode:"visible",children:n.children},s,0,null),a=ur(a,s,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Qr(e,t.child,null,o),e.child.memoizedState=so(o),e.memoizedState=no,a);if(!(e.mode&1))return js(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(E(419)),n=ua(a,n,void 0),js(t,e,o,n)}if(l=(o&t.childLanes)!==0,Ee||l){if(n=he,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,_t(t,s),rt(n,t,s,-1))}return pl(),n=ua(Error(E(421))),js(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=pp.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Le=Ft(s.nextSibling),De=e,Q=!0,et=null,t!==null&&(ze[Fe++]=xt,ze[Fe++]=yt,ze[Fe++]=hr,xt=t.id,yt=t.overflow,hr=e),e=cl(e,n.children),e.flags|=4096,e)}function Cc(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ya(t.return,e,r)}function da(t,e,r,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function eh(t,e,r){var n=e.pendingProps,s=n.revealOrder,a=n.tail;if(je(t,e,n.children,r),n=G.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cc(t,r,e);else if(t.tag===19)Cc(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(W(G,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&si(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),da(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&si(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}da(e,!0,r,null,a);break;case"together":da(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Us(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),mr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,r=Wt(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Wt(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function np(t,e,r){switch(e.tag){case 3:Xd(e),Kr();break;case 5:Sd(e);break;case 1:Te(e.type)&&Xs(e);break;case 4:tl(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;W(ti,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(W(G,G.current&1),e.flags|=128,null):r&e.child.childLanes?Zd(t,e,r):(W(G,G.current&1),t=Nt(t,e,r),t!==null?t.sibling:null);W(G,G.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return eh(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),W(G,G.current),n)break;return null;case 22:case 23:return e.lanes=0,Jd(t,e,r)}return Nt(t,e,r)}var th,io,rh,nh;th=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};io=function(){};rh=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,lr(ht.current);var a=null;switch(r){case"input":s=Ca(t,s),n=Ca(t,n),a=[];break;case"select":s=Y({},s,{value:void 0}),n=Y({},n,{value:void 0}),a=[];break;case"textarea":s=Ta(t,s),n=Ta(t,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Js)}Aa(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ln.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ln.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&H("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};nh=function(t,e,r,n){r!==n&&(e.flags|=4)};function fn(t,e){if(!Q)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ye(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function sp(t,e,r){var n=e.pendingProps;switch(Qo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ye(e),null;case 1:return Te(e.type)&&Ys(),ye(e),null;case 3:return n=e.stateNode,Gr(),K(Pe),K(we),nl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ws(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,et!==null&&(mo(et),et=null))),io(t,e),ye(e),null;case 5:rl(e);var s=lr(Hn.current);if(r=e.type,t!==null&&e.stateNode!=null)rh(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(E(166));return ye(e),null}if(t=lr(ht.current),ws(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[ut]=e,n[Vn]=a,t=(e.mode&1)!==0,r){case"dialog":H("cancel",n),H("close",n);break;case"iframe":case"object":case"embed":H("load",n);break;case"video":case"audio":for(s=0;s<vn.length;s++)H(vn[s],n);break;case"source":H("error",n);break;case"img":case"image":case"link":H("error",n),H("load",n);break;case"details":H("toggle",n);break;case"input":Dl(n,a),H("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},H("invalid",n);break;case"textarea":Ul(n,a),H("invalid",n)}Aa(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&vs(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&vs(n.textContent,l,t),s=["children",""+l]):Ln.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&H("scroll",n)}switch(r){case"input":ds(n),Il(n,a,!0);break;case"textarea":ds(n),Ml(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Js)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ou(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[ut]=e,t[Vn]=n,th(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ra(r,n),r){case"dialog":H("cancel",t),H("close",t),s=n;break;case"iframe":case"object":case"embed":H("load",t),s=n;break;case"video":case"audio":for(s=0;s<vn.length;s++)H(vn[s],t);s=n;break;case"source":H("error",t),s=n;break;case"img":case"image":case"link":H("error",t),H("load",t),s=n;break;case"details":H("toggle",t),s=n;break;case"input":Dl(t,n),s=Ca(t,n),H("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Y({},n,{value:void 0}),H("invalid",t);break;case"textarea":Ul(t,n),s=Ta(t,n),H("invalid",t);break;default:s=n}Aa(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Lu(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Au(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&$n(t,c):typeof c=="number"&&$n(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ln.hasOwnProperty(a)?c!=null&&a==="onScroll"&&H("scroll",t):c!=null&&Ro(t,a,c,o))}switch(r){case"input":ds(t),Il(t,n,!1);break;case"textarea":ds(t),Ml(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ht(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Mr(t,!!n.multiple,a,!1):n.defaultValue!=null&&Mr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Js)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ye(e),null;case 6:if(t&&e.stateNode!=null)nh(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(E(166));if(r=lr(Hn.current),lr(ht.current),ws(e)){if(n=e.stateNode,r=e.memoizedProps,n[ut]=e,(a=n.nodeValue!==r)&&(t=De,t!==null))switch(t.tag){case 3:vs(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vs(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ut]=e,e.stateNode=n}return ye(e),null;case 13:if(K(G),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Q&&Le!==null&&e.mode&1&&!(e.flags&128))bd(),Kr(),e.flags|=98560,a=!1;else if(a=ws(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(E(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(E(317));a[ut]=e}else Kr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ye(e),a=!1}else et!==null&&(mo(et),et=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||G.current&1?le===0&&(le=3):pl())),e.updateQueue!==null&&(e.flags|=4),ye(e),null);case 4:return Gr(),io(t,e),t===null&&Bn(e.stateNode.containerInfo),ye(e),null;case 10:return Xo(e.type._context),ye(e),null;case 17:return Te(e.type)&&Ys(),ye(e),null;case 19:if(K(G),a=e.memoizedState,a===null)return ye(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)fn(a,!1);else{if(le!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=si(t),o!==null){for(e.flags|=128,fn(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return W(G,G.current&1|2),e.child}t=t.sibling}a.tail!==null&&te()>Yr&&(e.flags|=128,n=!0,fn(a,!1),e.lanes=4194304)}else{if(!n)if(t=si(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),fn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Q)return ye(e),null}else 2*te()-a.renderingStartTime>Yr&&r!==1073741824&&(e.flags|=128,n=!0,fn(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=te(),e.sibling=null,r=G.current,W(G,n?r&1|2:r&1),e):(ye(e),null);case 22:case 23:return ml(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Re&1073741824&&(ye(e),e.subtreeFlags&6&&(e.flags|=8192)):ye(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function ip(t,e){switch(Qo(e),e.tag){case 1:return Te(e.type)&&Ys(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gr(),K(Pe),K(we),nl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rl(e),null;case 13:if(K(G),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));Kr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return K(G),null;case 4:return Gr(),null;case 10:return Xo(e.type._context),null;case 22:case 23:return ml(),null;case 24:return null;default:return null}}var _s=!1,ve=!1,ap=typeof WeakSet=="function"?WeakSet:Set,T=null;function Ir(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){X(t,e,n)}else r.current=null}function ao(t,e,r){try{r()}catch(n){X(t,e,n)}}var Ec=!1;function op(t,e){if(qa=Ks,t=ld(),Ho(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,p=null;t:for(;;){for(var v;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==a||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)p=h,h=v;for(;;){if(h===t)break t;if(p===r&&++u===s&&(l=o),p===a&&++d===n&&(c=o),(v=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=v}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Va={focusedElem:t,selectionRange:r},Ks=!1,T=e;T!==null;)if(e=T,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,T=t;else for(;T!==null;){e=T;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var f=b.memoizedProps,j=b.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?f:Ye(e.type,f),j);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(w){X(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,T=t;break}T=e.return}return b=Ec,Ec=!1,b}function Cn(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&ao(e,r,a)}s=s.next}while(s!==n)}}function Ni(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function oo(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function sh(t){var e=t.alternate;e!==null&&(t.alternate=null,sh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ut],delete e[Vn],delete e[Ka],delete e[qm],delete e[Vm])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ih(t){return t.tag===5||t.tag===3||t.tag===4}function Pc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ih(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lo(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Js));else if(n!==4&&(t=t.child,t!==null))for(lo(t,e,r),t=t.sibling;t!==null;)lo(t,e,r),t=t.sibling}function co(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(co(t,e,r),t=t.sibling;t!==null;)co(t,e,r),t=t.sibling}var me=null,Xe=!1;function Ct(t,e,r){for(r=r.child;r!==null;)ah(t,e,r),r=r.sibling}function ah(t,e,r){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(gi,r)}catch{}switch(r.tag){case 5:ve||Ir(r,e);case 6:var n=me,s=Xe;me=null,Ct(t,e,r),me=n,Xe=s,me!==null&&(Xe?(t=me,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):me.removeChild(r.stateNode));break;case 18:me!==null&&(Xe?(t=me,r=r.stateNode,t.nodeType===8?sa(t.parentNode,r):t.nodeType===1&&sa(t,r),Mn(t)):sa(me,r.stateNode));break;case 4:n=me,s=Xe,me=r.stateNode.containerInfo,Xe=!0,Ct(t,e,r),me=n,Xe=s;break;case 0:case 11:case 14:case 15:if(!ve&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&ao(r,e,o),s=s.next}while(s!==n)}Ct(t,e,r);break;case 1:if(!ve&&(Ir(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){X(r,e,l)}Ct(t,e,r);break;case 21:Ct(t,e,r);break;case 22:r.mode&1?(ve=(n=ve)||r.memoizedState!==null,Ct(t,e,r),ve=n):Ct(t,e,r);break;default:Ct(t,e,r)}}function Tc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new ap),e.forEach(function(n){var s=gp.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ge(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:me=l.stateNode,Xe=!1;break e;case 3:me=l.stateNode.containerInfo,Xe=!0;break e;case 4:me=l.stateNode.containerInfo,Xe=!0;break e}l=l.return}if(me===null)throw Error(E(160));ah(a,o,s),me=null,Xe=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){X(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oh(e,t),e=e.sibling}function oh(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ge(e,t),ot(t),n&4){try{Cn(3,t,t.return),Ni(3,t)}catch(f){X(t,t.return,f)}try{Cn(5,t,t.return)}catch(f){X(t,t.return,f)}}break;case 1:Ge(e,t),ot(t),n&512&&r!==null&&Ir(r,r.return);break;case 5:if(Ge(e,t),ot(t),n&512&&r!==null&&Ir(r,r.return),t.flags&32){var s=t.stateNode;try{$n(s,"")}catch(f){X(t,t.return,f)}}if(n&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Pu(s,a),Ra(l,o);var u=Ra(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Lu(s,h):d==="dangerouslySetInnerHTML"?Au(s,h):d==="children"?$n(s,h):Ro(s,d,h,u)}switch(l){case"input":Ea(s,a);break;case"textarea":Tu(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?Mr(s,!!a.multiple,v,!1):p!==!!a.multiple&&(a.defaultValue!=null?Mr(s,!!a.multiple,a.defaultValue,!0):Mr(s,!!a.multiple,a.multiple?[]:"",!1))}s[Vn]=a}catch(f){X(t,t.return,f)}}break;case 6:if(Ge(e,t),ot(t),n&4){if(t.stateNode===null)throw Error(E(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(f){X(t,t.return,f)}}break;case 3:if(Ge(e,t),ot(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Mn(e.containerInfo)}catch(f){X(t,t.return,f)}break;case 4:Ge(e,t),ot(t);break;case 13:Ge(e,t),ot(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(hl=te())),n&4&&Tc(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(ve=(u=ve)||d,Ge(e,t),ve=u):Ge(e,t),ot(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(T=t,d=t.child;d!==null;){for(h=T=d;T!==null;){switch(p=T,v=p.child,p.tag){case 0:case 11:case 14:case 15:Cn(4,p,p.return);break;case 1:Ir(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(f){X(n,r,f)}}break;case 5:Ir(p,p.return);break;case 22:if(p.memoizedState!==null){Ac(h);continue}}v!==null?(v.return=p,T=v):Ac(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ru("display",o))}catch(f){X(t,t.return,f)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(f){X(t,t.return,f)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ge(e,t),ot(t),n&4&&Tc(t);break;case 21:break;default:Ge(e,t),ot(t)}}function ot(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(ih(r)){var n=r;break e}r=r.return}throw Error(E(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&($n(s,""),n.flags&=-33);var a=Pc(t);co(t,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Pc(t);lo(t,l,o);break;default:throw Error(E(161))}}catch(c){X(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lp(t,e,r){T=t,lh(t)}function lh(t,e,r){for(var n=(t.mode&1)!==0;T!==null;){var s=T,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||_s;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ve;l=_s;var u=ve;if(_s=o,(ve=c)&&!u)for(T=s;T!==null;)o=T,c=o.child,o.tag===22&&o.memoizedState!==null?Rc(s):c!==null?(c.return=o,T=c):Rc(s);for(;a!==null;)T=a,lh(a),a=a.sibling;T=s,_s=l,ve=u}Oc(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,T=a):Oc(t)}}function Oc(t){for(;T!==null;){var e=T;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ve||Ni(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ve)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Ye(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&pc(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}pc(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Mn(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}ve||e.flags&512&&oo(e)}catch(p){X(e,e.return,p)}}if(e===t){T=null;break}if(r=e.sibling,r!==null){r.return=e.return,T=r;break}T=e.return}}function Ac(t){for(;T!==null;){var e=T;if(e===t){T=null;break}var r=e.sibling;if(r!==null){r.return=e.return,T=r;break}T=e.return}}function Rc(t){for(;T!==null;){var e=T;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Ni(4,e)}catch(c){X(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){X(e,s,c)}}var a=e.return;try{oo(e)}catch(c){X(e,a,c)}break;case 5:var o=e.return;try{oo(e)}catch(c){X(e,o,c)}}}catch(c){X(e,e.return,c)}if(e===t){T=null;break}var l=e.sibling;if(l!==null){l.return=e.return,T=l;break}T=e.return}}var cp=Math.ceil,oi=kt.ReactCurrentDispatcher,ul=kt.ReactCurrentOwner,Ve=kt.ReactCurrentBatchConfig,F=0,he=null,ne=null,pe=0,Re=0,Ur=Gt(0),le=0,Jn=null,mr=0,ki=0,dl=0,En=null,Se=null,hl=0,Yr=1/0,mt=null,li=!1,uo=null,qt=null,Ns=!1,Dt=null,ci=0,Pn=0,ho=null,Ms=-1,zs=0;function _e(){return F&6?te():Ms!==-1?Ms:Ms=te()}function Vt(t){return t.mode&1?F&2&&pe!==0?pe&-pe:Hm.transition!==null?(zs===0&&(zs=Hu()),zs):(t=q,t!==0||(t=window.event,t=t===void 0?16:Zu(t.type)),t):1}function rt(t,e,r,n){if(50<Pn)throw Pn=0,ho=null,Error(E(185));es(t,r,n),(!(F&2)||t!==he)&&(t===he&&(!(F&2)&&(ki|=r),le===4&&Rt(t,pe)),Oe(t,n),r===1&&F===0&&!(e.mode&1)&&(Yr=te()+500,bi&&Jt()))}function Oe(t,e){var r=t.callbackNode;Hf(t,e);var n=Hs(t,t===he?pe:0);if(n===0)r!==null&&Bl(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Bl(r),e===1)t.tag===0?Wm(Lc.bind(null,t)):yd(Lc.bind(null,t)),Fm(function(){!(F&6)&&Jt()}),r=null;else{switch(Ku(n)){case 1:r=Uo;break;case 4:r=Vu;break;case 16:r=Ws;break;case 536870912:r=Wu;break;default:r=Ws}r=gh(r,ch.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function ch(t,e){if(Ms=-1,zs=0,F&6)throw Error(E(327));var r=t.callbackNode;if(Vr()&&t.callbackNode!==r)return null;var n=Hs(t,t===he?pe:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=ui(t,n);else{e=n;var s=F;F|=2;var a=dh();(he!==t||pe!==e)&&(mt=null,Yr=te()+500,cr(t,e));do try{hp();break}catch(l){uh(t,l)}while(!0);Yo(),oi.current=a,F=s,ne!==null?e=0:(he=null,pe=0,e=le)}if(e!==0){if(e===2&&(s=Ua(t),s!==0&&(n=s,e=fo(t,s))),e===1)throw r=Jn,cr(t,0),Rt(t,n),Oe(t,te()),r;if(e===6)Rt(t,n);else{if(s=t.current.alternate,!(n&30)&&!up(s)&&(e=ui(t,n),e===2&&(a=Ua(t),a!==0&&(n=a,e=fo(t,a))),e===1))throw r=Jn,cr(t,0),Rt(t,n),Oe(t,te()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(E(345));case 2:nr(t,Se,mt);break;case 3:if(Rt(t,n),(n&130023424)===n&&(e=hl+500-te(),10<e)){if(Hs(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){_e(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ha(nr.bind(null,t,Se,mt),e);break}nr(t,Se,mt);break;case 4:if(Rt(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-tt(n);a=1<<o,o=e[o],o>s&&(s=o),n&=~a}if(n=s,n=te()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*cp(n/1960))-n,10<n){t.timeoutHandle=Ha(nr.bind(null,t,Se,mt),n);break}nr(t,Se,mt);break;case 5:nr(t,Se,mt);break;default:throw Error(E(329))}}}return Oe(t,te()),t.callbackNode===r?ch.bind(null,t):null}function fo(t,e){var r=En;return t.current.memoizedState.isDehydrated&&(cr(t,e).flags|=256),t=ui(t,e),t!==2&&(e=Se,Se=r,e!==null&&mo(e)),t}function mo(t){Se===null?Se=t:Se.push.apply(Se,t)}function up(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!st(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rt(t,e){for(e&=~dl,e&=~ki,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-tt(e),n=1<<r;t[r]=-1,e&=~n}}function Lc(t){if(F&6)throw Error(E(327));Vr();var e=Hs(t,0);if(!(e&1))return Oe(t,te()),null;var r=ui(t,e);if(t.tag!==0&&r===2){var n=Ua(t);n!==0&&(e=n,r=fo(t,n))}if(r===1)throw r=Jn,cr(t,0),Rt(t,e),Oe(t,te()),r;if(r===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,nr(t,Se,mt),Oe(t,te()),null}function fl(t,e){var r=F;F|=1;try{return t(e)}finally{F=r,F===0&&(Yr=te()+500,bi&&Jt())}}function pr(t){Dt!==null&&Dt.tag===0&&!(F&6)&&Vr();var e=F;F|=1;var r=Ve.transition,n=q;try{if(Ve.transition=null,q=1,t)return t()}finally{q=n,Ve.transition=r,F=e,!(F&6)&&Jt()}}function ml(){Re=Ur.current,K(Ur)}function cr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,zm(r)),ne!==null)for(r=ne.return;r!==null;){var n=r;switch(Qo(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ys();break;case 3:Gr(),K(Pe),K(we),nl();break;case 5:rl(n);break;case 4:Gr();break;case 13:K(G);break;case 19:K(G);break;case 10:Xo(n.type._context);break;case 22:case 23:ml()}r=r.return}if(he=t,ne=t=Wt(t.current,null),pe=Re=e,le=0,Jn=null,dl=ki=mr=0,Se=En=null,or!==null){for(e=0;e<or.length;e++)if(r=or[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}or=null}return t}function uh(t,e){do{var r=ne;try{if(Yo(),Ds.current=ai,ii){for(var n=J.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ii=!1}if(fr=0,de=ae=J=null,Sn=!1,Kn=0,ul.current=null,r===null||r.return===null){le=1,Jn=e,ne=null;break}e:{var a=t,o=r.return,l=r,c=e;if(e=pe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=bc(o);if(v!==null){v.flags&=-257,jc(v,o,l,a,e),v.mode&1&&wc(a,u,e),e=v,c=u;var b=e.updateQueue;if(b===null){var f=new Set;f.add(c),e.updateQueue=f}else b.add(c);break e}else{if(!(e&1)){wc(a,u,e),pl();break e}c=Error(E(426))}}else if(Q&&l.mode&1){var j=bc(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),jc(j,o,l,a,e),Go(Jr(c,l));break e}}a=c=Jr(c,l),le!==4&&(le=2),En===null?En=[a]:En.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var m=Kd(a,c,e);mc(a,m);break e;case 1:l=c;var y=a.type,g=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(qt===null||!qt.has(g)))){a.flags|=65536,e&=-e,a.lanes|=e;var w=Qd(a,l,e);mc(a,w);break e}}a=a.return}while(a!==null)}fh(r)}catch(k){e=k,ne===r&&r!==null&&(ne=r=r.return);continue}break}while(!0)}function dh(){var t=oi.current;return oi.current=ai,t===null?ai:t}function pl(){(le===0||le===3||le===2)&&(le=4),he===null||!(mr&268435455)&&!(ki&268435455)||Rt(he,pe)}function ui(t,e){var r=F;F|=2;var n=dh();(he!==t||pe!==e)&&(mt=null,cr(t,e));do try{dp();break}catch(s){uh(t,s)}while(!0);if(Yo(),F=r,oi.current=n,ne!==null)throw Error(E(261));return he=null,pe=0,le}function dp(){for(;ne!==null;)hh(ne)}function hp(){for(;ne!==null&&!If();)hh(ne)}function hh(t){var e=ph(t.alternate,t,Re);t.memoizedProps=t.pendingProps,e===null?fh(t):ne=e,ul.current=null}function fh(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=ip(r,e),r!==null){r.flags&=32767,ne=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{le=6,ne=null;return}}else if(r=sp(r,e,Re),r!==null){ne=r;return}if(e=e.sibling,e!==null){ne=e;return}ne=e=t}while(e!==null);le===0&&(le=5)}function nr(t,e,r){var n=q,s=Ve.transition;try{Ve.transition=null,q=1,fp(t,e,r,n)}finally{Ve.transition=s,q=n}return null}function fp(t,e,r,n){do Vr();while(Dt!==null);if(F&6)throw Error(E(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(Kf(t,a),t===he&&(ne=he=null,pe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ns||(Ns=!0,gh(Ws,function(){return Vr(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Ve.transition,Ve.transition=null;var o=q;q=1;var l=F;F|=4,ul.current=null,op(t,r),oh(r,t),Rm(Va),Ks=!!qa,Va=qa=null,t.current=r,lp(r),Uf(),F=l,q=o,Ve.transition=a}else t.current=r;if(Ns&&(Ns=!1,Dt=t,ci=s),a=t.pendingLanes,a===0&&(qt=null),Ff(r.stateNode),Oe(t,te()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(li)throw li=!1,t=uo,uo=null,t;return ci&1&&t.tag!==0&&Vr(),a=t.pendingLanes,a&1?t===ho?Pn++:(Pn=0,ho=t):Pn=0,Jt(),null}function Vr(){if(Dt!==null){var t=Ku(ci),e=Ve.transition,r=q;try{if(Ve.transition=null,q=16>t?16:t,Dt===null)var n=!1;else{if(t=Dt,Dt=null,ci=0,F&6)throw Error(E(331));var s=F;for(F|=4,T=t.current;T!==null;){var a=T,o=a.child;if(T.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(T=u;T!==null;){var d=T;switch(d.tag){case 0:case 11:case 15:Cn(8,d,a)}var h=d.child;if(h!==null)h.return=d,T=h;else for(;T!==null;){d=T;var p=d.sibling,v=d.return;if(sh(d),d===u){T=null;break}if(p!==null){p.return=v,T=p;break}T=v}}}var b=a.alternate;if(b!==null){var f=b.child;if(f!==null){b.child=null;do{var j=f.sibling;f.sibling=null,f=j}while(f!==null)}}T=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,T=o;else e:for(;T!==null;){if(a=T,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Cn(9,a,a.return)}var m=a.sibling;if(m!==null){m.return=a.return,T=m;break e}T=a.return}}var y=t.current;for(T=y;T!==null;){o=T;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,T=g;else e:for(o=y;T!==null;){if(l=T,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ni(9,l)}}catch(k){X(l,l.return,k)}if(l===o){T=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,T=w;break e}T=l.return}}if(F=s,Jt(),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(gi,t)}catch{}n=!0}return n}finally{q=r,Ve.transition=e}}return!1}function $c(t,e,r){e=Jr(r,e),e=Kd(t,e,1),t=Bt(t,e,1),e=_e(),t!==null&&(es(t,1,e),Oe(t,e))}function X(t,e,r){if(t.tag===3)$c(t,t,r);else for(;e!==null;){if(e.tag===3){$c(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(qt===null||!qt.has(n))){t=Jr(r,t),t=Qd(e,t,1),e=Bt(e,t,1),t=_e(),e!==null&&(es(e,1,t),Oe(e,t));break}}e=e.return}}function mp(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=_e(),t.pingedLanes|=t.suspendedLanes&r,he===t&&(pe&r)===r&&(le===4||le===3&&(pe&130023424)===pe&&500>te()-hl?cr(t,0):dl|=r),Oe(t,e)}function mh(t,e){e===0&&(t.mode&1?(e=ms,ms<<=1,!(ms&130023424)&&(ms=4194304)):e=1);var r=_e();t=_t(t,e),t!==null&&(es(t,e,r),Oe(t,r))}function pp(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),mh(t,r)}function gp(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(E(314))}n!==null&&n.delete(e),mh(t,r)}var ph;ph=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pe.current)Ee=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ee=!1,np(t,e,r);Ee=!!(t.flags&131072)}else Ee=!1,Q&&e.flags&1048576&&vd(e,ei,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Us(t,e),t=e.pendingProps;var s=Hr(e,we.current);qr(e,r),s=il(null,e,n,t,s,r);var a=al();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Te(n)?(a=!0,Xs(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,el(e),s.updater=_i,e.stateNode=s,s._reactInternals=e,Za(e,n,t,r),e=ro(null,e,n,!0,a,r)):(e.tag=0,Q&&a&&Ko(e),je(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Us(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=yp(n),t=Ye(n,t),s){case 0:e=to(null,e,n,t,r);break e;case 1:e=kc(null,e,n,t,r);break e;case 11:e=_c(null,e,n,t,r);break e;case 14:e=Nc(null,e,n,Ye(n.type,t),r);break e}throw Error(E(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ye(n,s),to(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ye(n,s),kc(t,e,n,s,r);case 3:e:{if(Xd(e),t===null)throw Error(E(387));n=e.pendingProps,a=e.memoizedState,s=a.element,kd(t,e),ni(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Jr(Error(E(423)),e),e=Sc(t,e,n,r,s);break e}else if(n!==s){s=Jr(Error(E(424)),e),e=Sc(t,e,n,r,s);break e}else for(Le=Ft(e.stateNode.containerInfo.firstChild),De=e,Q=!0,et=null,r=_d(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Kr(),n===s){e=Nt(t,e,r);break e}je(t,e,n,r)}e=e.child}return e;case 5:return Sd(e),t===null&&Ja(e),n=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Wa(n,s)?o=null:a!==null&&Wa(n,a)&&(e.flags|=32),Yd(t,e),je(t,e,o,r),e.child;case 6:return t===null&&Ja(e),null;case 13:return Zd(t,e,r);case 4:return tl(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Qr(e,null,n,r):je(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ye(n,s),_c(t,e,n,s,r);case 7:return je(t,e,e.pendingProps,r),e.child;case 8:return je(t,e,e.pendingProps.children,r),e.child;case 12:return je(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,W(ti,n._currentValue),n._currentValue=o,a!==null)if(st(a.value,o)){if(a.children===s.children&&!Pe.current){e=Nt(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=vt(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Ya(a.return,r,e),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(E(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Ya(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}je(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,qr(e,r),s=He(s),n=n(s),e.flags|=1,je(t,e,n,r),e.child;case 14:return n=e.type,s=Ye(n,e.pendingProps),s=Ye(n.type,s),Nc(t,e,n,s,r);case 15:return Gd(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ye(n,s),Us(t,e),e.tag=1,Te(n)?(t=!0,Xs(e)):t=!1,qr(e,r),Hd(e,n,s),Za(e,n,s,r),ro(null,e,n,!0,t,r);case 19:return eh(t,e,r);case 22:return Jd(t,e,r)}throw Error(E(156,e.tag))};function gh(t,e){return qu(t,e)}function xp(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Be(t,e,r,n){return new xp(t,e,r,n)}function gl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yp(t){if(typeof t=="function")return gl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$o)return 11;if(t===Do)return 14}return 2}function Wt(t,e){var r=t.alternate;return r===null?(r=Be(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Fs(t,e,r,n,s,a){var o=2;if(n=t,typeof t=="function")gl(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Er:return ur(r.children,s,a,e);case Lo:o=8,s|=8;break;case _a:return t=Be(12,r,e,s|2),t.elementType=_a,t.lanes=a,t;case Na:return t=Be(13,r,e,s),t.elementType=Na,t.lanes=a,t;case ka:return t=Be(19,r,e,s),t.elementType=ka,t.lanes=a,t;case Su:return Si(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Nu:o=10;break e;case ku:o=9;break e;case $o:o=11;break e;case Do:o=14;break e;case Tt:o=16,n=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=Be(o,r,e,s),e.elementType=t,e.type=n,e.lanes=a,e}function ur(t,e,r,n){return t=Be(7,t,n,e),t.lanes=r,t}function Si(t,e,r,n){return t=Be(22,t,n,e),t.elementType=Su,t.lanes=r,t.stateNode={isHidden:!1},t}function ha(t,e,r){return t=Be(6,t,null,e),t.lanes=r,t}function fa(t,e,r){return e=Be(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vp(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ki(0),this.expirationTimes=Ki(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ki(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function xl(t,e,r,n,s,a,o,l,c){return t=new vp(t,e,r,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Be(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},el(a),t}function wp(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function xh(t){if(!t)return Kt;t=t._reactInternals;e:{if(xr(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Te(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var r=t.type;if(Te(r))return xd(t,r,e)}return e}function yh(t,e,r,n,s,a,o,l,c){return t=xl(r,n,!0,t,s,a,o,l,c),t.context=xh(null),r=t.current,n=_e(),s=Vt(r),a=vt(n,s),a.callback=e??null,Bt(r,a,s),t.current.lanes=s,es(t,s,n),Oe(t,n),t}function Ci(t,e,r,n){var s=e.current,a=_e(),o=Vt(s);return r=xh(r),e.context===null?e.context=r:e.pendingContext=r,e=vt(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Bt(s,e,o),t!==null&&(rt(t,s,o,a),$s(t,s,o)),o}function di(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Dc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function yl(t,e){Dc(t,e),(t=t.alternate)&&Dc(t,e)}function bp(){return null}var vh=typeof reportError=="function"?reportError:function(t){console.error(t)};function vl(t){this._internalRoot=t}Ei.prototype.render=vl.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));Ci(t,e,null,null)};Ei.prototype.unmount=vl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pr(function(){Ci(null,t,null,null)}),e[jt]=null}};function Ei(t){this._internalRoot=t}Ei.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ju();t={blockedOn:null,target:t,priority:e};for(var r=0;r<At.length&&e!==0&&e<At[r].priority;r++);At.splice(r,0,t),r===0&&Xu(t)}};function wl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ic(){}function jp(t,e,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=di(o);a.call(u)}}var o=yh(e,n,t,0,null,!1,!1,"",Ic);return t._reactRootContainer=o,t[jt]=o.current,Bn(t.nodeType===8?t.parentNode:t),pr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=di(c);l.call(u)}}var c=xl(t,0,!1,null,null,!1,!1,"",Ic);return t._reactRootContainer=c,t[jt]=c.current,Bn(t.nodeType===8?t.parentNode:t),pr(function(){Ci(e,c,r,n)}),c}function Ti(t,e,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=di(o);l.call(c)}}Ci(e,o,t,s)}else o=jp(r,e,t,s,n);return di(o)}Qu=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=yn(e.pendingLanes);r!==0&&(Mo(e,r|1),Oe(e,te()),!(F&6)&&(Yr=te()+500,Jt()))}break;case 13:pr(function(){var n=_t(t,1);if(n!==null){var s=_e();rt(n,t,1,s)}}),yl(t,1)}};zo=function(t){if(t.tag===13){var e=_t(t,134217728);if(e!==null){var r=_e();rt(e,t,134217728,r)}yl(t,134217728)}};Gu=function(t){if(t.tag===13){var e=Vt(t),r=_t(t,e);if(r!==null){var n=_e();rt(r,t,e,n)}yl(t,e)}};Ju=function(){return q};Yu=function(t,e){var r=q;try{return q=t,e()}finally{q=r}};$a=function(t,e,r){switch(e){case"input":if(Ea(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=wi(n);if(!s)throw Error(E(90));Eu(n),Ea(n,s)}}}break;case"textarea":Tu(t,r);break;case"select":e=r.value,e!=null&&Mr(t,!!r.multiple,e,!1)}};Iu=fl;Uu=pr;var _p={usingClientEntryPoint:!1,Events:[rs,Ar,wi,$u,Du,fl]},mn={findFiberByHostInstance:ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Np={bundleType:mn.bundleType,version:mn.version,rendererPackageName:mn.rendererPackageName,rendererConfig:mn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fu(t),t===null?null:t.stateNode},findFiberByHostInstance:mn.findFiberByHostInstance||bp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ks=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ks.isDisabled&&ks.supportsFiber)try{gi=ks.inject(Np),dt=ks}catch{}}Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_p;Ue.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wl(e))throw Error(E(200));return wp(t,e,null,r)};Ue.createRoot=function(t,e){if(!wl(t))throw Error(E(299));var r=!1,n="",s=vh;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=xl(t,1,!1,null,null,r,!1,n,s),t[jt]=e.current,Bn(t.nodeType===8?t.parentNode:t),new vl(e)};Ue.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=Fu(e),t=t===null?null:t.stateNode,t};Ue.flushSync=function(t){return pr(t)};Ue.hydrate=function(t,e,r){if(!Pi(e))throw Error(E(200));return Ti(null,t,e,!0,r)};Ue.hydrateRoot=function(t,e,r){if(!wl(t))throw Error(E(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=vh;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=yh(e,null,t,1,r??null,s,!1,a,o),t[jt]=e.current,Bn(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Ei(e)};Ue.render=function(t,e,r){if(!Pi(e))throw Error(E(200));return Ti(null,t,e,!1,r)};Ue.unmountComponentAtNode=function(t){if(!Pi(t))throw Error(E(40));return t._reactRootContainer?(pr(function(){Ti(null,null,t,!1,function(){t._reactRootContainer=null,t[jt]=null})}),!0):!1};Ue.unstable_batchedUpdates=fl;Ue.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Pi(r))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return Ti(t,e,r,!1,n)};Ue.version="18.3.1-next-f1338f8080-20240426";function wh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wh)}catch(t){console.error(t)}}wh(),wu.exports=Ue;var kp=wu.exports,bh,Uc=kp;bh=Uc.createRoot,Uc.hydrateRoot;const Sp="modulepreload",Cp=function(t){return"/Vottish-Apartment-management-System-2/"+t},Mc={},ss=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=Cp(c),c in Mc)return;Mc[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Sp,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((p,v)=>{h.addEventListener("load",p),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},Ep=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ss(async()=>{const{default:n}=await Promise.resolve().then(()=>rn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class bl extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Pp extends bl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class zc extends bl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Fc extends bl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var po;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(po||(po={}));var Tp=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class Op{constructor(e,{headers:r={},customFetch:n,region:s=po.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=Ep(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return Tp(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(f=>{throw new Pp(f)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new zc(h);if(!h.ok)throw new Fc(h);let v=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),b;return v==="application/json"?b=yield h.json():v==="application/octet-stream"?b=yield h.blob():v==="text/event-stream"?b=h:v==="multipart/form-data"?b=yield h.formData():b=yield h.text(),{data:b,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof Fc||s instanceof zc?s.context:void 0}}})}}var Ce={},jl={},Oi={},is={},Ai={},Ri={},Ap=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Xr=Ap();const Rp=Xr.fetch,jh=Xr.fetch.bind(Xr),_h=Xr.Headers,Lp=Xr.Request,$p=Xr.Response,rn=Object.freeze(Object.defineProperty({__proto__:null,Headers:_h,Request:Lp,Response:$p,default:jh,fetch:Rp},Symbol.toStringTag,{value:"Module"})),Dp=Xh(rn);var Li={};Object.defineProperty(Li,"__esModule",{value:!0});let Ip=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Li.default=Ip;var Nh=We&&We.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ri,"__esModule",{value:!0});const Up=Nh(Dp),Mp=Nh(Li);let zp=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Up.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c,u;let d=null,h=null,p=null,v=a.status,b=a.statusText;if(a.ok){if(this.method!=="HEAD"){const y=await a.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=y:h=JSON.parse(y))}const j=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),m=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");j&&m&&m.length>1&&(p=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,v=406,b="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const j=await a.text();try{d=JSON.parse(j),Array.isArray(d)&&a.status===404&&(h=[],d=null,v=200,b="OK")}catch{a.status===404&&j===""?(v=204,b="No Content"):d={message:j}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,v=200,b="OK"),d&&this.shouldThrowOnError)throw new Mp.default(d)}return{error:d,data:h,count:p,status:v,statusText:b}});return this.shouldThrowOnError||(s=s.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};Ri.default=zp;var Fp=We&&We.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ai,"__esModule",{value:!0});const Bp=Fp(Ri);let qp=class extends Bp.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ai.default=qp;var Vp=We&&We.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(is,"__esModule",{value:!0});const Wp=Vp(Ai);let Hp=class extends Wp.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};is.default=Hp;var Kp=We&&We.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Oi,"__esModule",{value:!0});const pn=Kp(is);let Qp=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new pn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var s;const a="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new pn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new pn.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new pn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var r;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new pn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Oi.default=Qp;var kh=We&&We.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jl,"__esModule",{value:!0});const Gp=kh(Oi),Jp=kh(is);let Yp=class Sh{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new Gp.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Sh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:a}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{c.searchParams.append(h,p)})):(l="POST",u=r);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new Jp.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};jl.default=Yp;var nn=We&&We.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.PostgrestError=Ce.PostgrestBuilder=Ce.PostgrestTransformBuilder=Ce.PostgrestFilterBuilder=Ce.PostgrestQueryBuilder=Ce.PostgrestClient=void 0;const Ch=nn(jl);Ce.PostgrestClient=Ch.default;const Eh=nn(Oi);Ce.PostgrestQueryBuilder=Eh.default;const Ph=nn(is);Ce.PostgrestFilterBuilder=Ph.default;const Th=nn(Ai);Ce.PostgrestTransformBuilder=Th.default;const Oh=nn(Ri);Ce.PostgrestBuilder=Oh.default;const Ah=nn(Li);Ce.PostgrestError=Ah.default;var Xp=Ce.default={PostgrestClient:Ch.default,PostgrestQueryBuilder:Eh.default,PostgrestFilterBuilder:Ph.default,PostgrestTransformBuilder:Th.default,PostgrestBuilder:Oh.default,PostgrestError:Ah.default};const{PostgrestClient:Zp,PostgrestQueryBuilder:Dx,PostgrestFilterBuilder:Ix,PostgrestTransformBuilder:Ux,PostgrestBuilder:Mx,PostgrestError:zx}=Xp;class e0{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const t0="2.15.5",r0=`realtime-js/${t0}`,n0="1.0.0",go=1e4,s0=1e3,i0=100;var Tn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Tn||(Tn={}));var se;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(se||(se={}));var Ze;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ze||(Ze={}));var xo;(function(t){t.websocket="websocket"})(xo||(xo={}));var ir;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ir||(ir={}));class a0{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+s));o=o+s;const c=n.decode(e.slice(o,o+a));o=o+a;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Rh{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var V;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(V||(V={}));const Bc=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,o)=>(a[o]=o0(o,t,e,s),a),{})},o0=(t,e,r,n)=>{const s=e.find(l=>l.name===t),a=s==null?void 0:s.type,o=r[t];return a&&!n.includes(a)?Lh(a,o):yo(o)},Lh=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return d0(e,r)}switch(t){case V.bool:return l0(e);case V.float4:case V.float8:case V.int2:case V.int4:case V.int8:case V.numeric:case V.oid:return c0(e);case V.json:case V.jsonb:return u0(e);case V.timestamp:return h0(e);case V.abstime:case V.date:case V.daterange:case V.int4range:case V.int8range:case V.money:case V.reltime:case V.text:case V.time:case V.timestamptz:case V.timetz:case V.tsrange:case V.tstzrange:return yo(e);default:return yo(e)}},yo=t=>t,l0=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},c0=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},u0=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},d0=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>Lh(e,l))}return t},h0=t=>typeof t=="string"?t.replace(" ","T"):t,$h=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class ma{constructor(e,r,n={},s=go){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var qc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(qc||(qc={}));class On{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=On.syncState(this.state,s,a,o),this.pendingDiffs.forEach(c=>{this.state=On.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=On.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const a=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=a[u];if(h){const p=d.map(j=>j.presence_ref),v=h.map(j=>j.presence_ref),b=d.filter(j=>v.indexOf(j.presence_ref)<0),f=h.filter(j=>p.indexOf(j.presence_ref)<0);b.length>0&&(l[u]=b),f.length>0&&(c[u]=f)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(v=>v.presence_ref),p=d.filter(v=>h.indexOf(v.presence_ref)<0);e[l].unshift(...p)}n(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Vc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Vc||(Vc={}));var An;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(An||(An={}));var pt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(pt||(pt={}));class _l{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ma(this,Ze.join,this.params,this.timeout),this.rejoinTimer=new Rh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=se.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ze.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new On(this),this.broadcastEndpointURL=$h(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==se.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[An.PRESENCE]&&this.bindings[An.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(pt.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(pt.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var b;if(this.socket.setAuth(),v===void 0){e==null||e(pt.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,j=(b=f==null?void 0:f.length)!==null&&b!==void 0?b:0,m=[];for(let y=0;y<j;y++){const g=f[y],{filter:{event:w,schema:k,table:_,filter:x}}=g,C=v&&v[y];if(C&&C.event===w&&C.schema===k&&C.table===_&&C.filter===x)m.push(Object.assign(Object.assign({},g),{id:C.id}));else{this.unsubscribe(),this.state=se.errored,e==null||e(pt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(pt.SUBSCRIBED);return}}).receive("error",v=>{this.state=se.errored,e==null||e(pt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(pt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===se.joined&&e===An.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=se.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ze.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new ma(this,Ze.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=se.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ma(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>i0){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,a;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Ze;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let p=this._onMessage(o,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var b,f,j;return((b=v.filter)===null||b===void 0?void 0:b.event)==="*"||((j=(f=v.filter)===null||f===void 0?void 0:f.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(v=>v.callback(p,n)):(a=this.bindings[o])===null||a===void 0||a.filter(v=>{var b,f,j,m,y,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const w=v.id,k=(b=v.filter)===null||b===void 0?void 0:b.event;return w&&((f=r.ids)===null||f===void 0?void 0:f.includes(w))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const w=(y=(m=v==null?void 0:v.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return w==="*"||w===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof p=="object"&&"ids"in p){const b=p.data,{schema:f,table:j,commit_timestamp:m,type:y,errors:g}=b;p=Object.assign(Object.assign({},{schema:f,table:j,commit_timestamp:m,eventType:y,new:{},old:{},errors:g}),this._getPayloadRecords(b))}v.callback(p,n)})}_isClosed(){return this.state===se.closed}_isJoined(){return this.state===se.joined}_isJoining(){return this.state===se.joining}_isLeaving(){return this.state===se.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&_l.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ze.close,{},e)}_onError(e){this._on(Ze.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=se.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Bc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Bc(e.columns,e.old_record)),r}}const pa=()=>{},Ss={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},f0=[1e3,2e3,5e3,1e4],m0=1e4,p0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class g0{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=go,this.transport=null,this.heartbeatIntervalMs=Ss.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=pa,this.ref=0,this.reconnectTimer=null,this.logger=pa,this.conn=null,this.sendBuffer=[],this.serializer=new a0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>ss(async()=>{const{default:l}=await Promise.resolve().then(()=>rn);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${xo.websocket}`,this.httpEndpoint=$h(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=e0.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:n0}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Tn.connecting:return ir.Connecting;case Tn.open:return ir.Open;case Tn.closing:return ir.Closing;default:return ir.Closed}}isConnected(){return this.connectionState()===ir.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new _l(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:s,ref:a}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(s0,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ss.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:a,ref:o}=r,l=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ze.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([p0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:r0};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Ze.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Rh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ss.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,a,o,l,c,u,d;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:go,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Ss.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:pa,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>f0[h-1]||m0,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,p)=>p(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Nl extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ie(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class x0 extends Nl{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vo extends Nl{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var y0=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Dh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ss(async()=>{const{default:n}=await Promise.resolve().then(()=>rn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},v0=()=>y0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ss(()=>Promise.resolve().then(()=>rn),void 0)).Response:Response}),wo=t=>{if(Array.isArray(t))return t.map(r=>wo(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=wo(n)}),e},w0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var yr=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const ga=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),b0=(t,e,r)=>yr(void 0,void 0,void 0,function*(){const n=yield v0();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const a=t.status||500,o=(s==null?void 0:s.statusCode)||a+"";e(new x0(ga(s),a,o))}).catch(s=>{e(new vo(ga(s),s))}):e(new vo(ga(t),t))}),j0=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(w0(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function as(t,e,r,n,s,a){return yr(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,j0(e,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>b0(c,l,n))})})}function hi(t,e,r,n){return yr(this,void 0,void 0,function*(){return as(t,"GET",e,r,n)})}function ct(t,e,r,n,s){return yr(this,void 0,void 0,function*(){return as(t,"POST",e,n,s,r)})}function bo(t,e,r,n,s){return yr(this,void 0,void 0,function*(){return as(t,"PUT",e,n,s,r)})}function _0(t,e,r,n){return yr(this,void 0,void 0,function*(){return as(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Ih(t,e,r,n,s){return yr(this,void 0,void 0,function*(){return as(t,"DELETE",e,n,s,r)})}var be=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const N0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class k0{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Dh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return be(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Wc),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(e=="PUT"?bo:ct)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ie(a))return{data:null,error:a};throw a}})}upload(e,r,n){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return be(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Wc.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield bo(this.fetch,l.toString(),c,{headers:d});return{data:{path:a,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ie(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return be(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield ct(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new Nl("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}update(e,r,n){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return be(this,void 0,void 0,function*(){try{return{data:yield ct(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}copy(e,r,n){return be(this,void 0,void 0,function*(){try{return{data:{path:(yield ct(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return be(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield ct(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return be(this,void 0,void 0,function*(){try{const s=yield ct(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}download(e,r){return be(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield hi(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ie(l))return{data:null,error:l};throw l}})}info(e){return be(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield hi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:wo(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}exists(e){return be(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield _0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n)&&n instanceof vo){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return be(this,void 0,void 0,function*(){try{return{data:yield Ih(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}list(e,r,n){return be(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},N0),r),{prefix:e||""});return{data:yield ct(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}listV2(e,r){return be(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ct(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const S0="2.12.1",C0={"X-Client-Info":`storage-js/${S0}`};var wr=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class E0{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},C0),r),this.fetch=Dh(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return wr(this,void 0,void 0,function*(){try{return{data:yield hi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ie(e))return{data:null,error:e};throw e}})}getBucket(e){return wr(this,void 0,void 0,function*(){try{return{data:yield hi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return wr(this,void 0,void 0,function*(){try{return{data:yield ct(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return wr(this,void 0,void 0,function*(){try{return{data:yield bo(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}emptyBucket(e){return wr(this,void 0,void 0,function*(){try{return{data:yield ct(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}deleteBucket(e){return wr(this,void 0,void 0,function*(){try{return{data:yield Ih(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}}class P0 extends E0{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new k0(this.url,this.headers,e,this.fetch)}}const T0="2.57.4";let wn="";typeof Deno<"u"?wn="deno":typeof document<"u"?wn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wn="react-native":wn="node";const O0={"X-Client-Info":`supabase-js-${wn}/${T0}`},A0={headers:O0},R0={schema:"public"},L0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$0={};var D0=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const I0=t=>{let e;return t?e=t:typeof fetch>"u"?e=jh:e=fetch,(...r)=>e(...r)},U0=()=>typeof Headers>"u"?_h:Headers,M0=(t,e,r)=>{const n=I0(r),s=U0();return(a,o)=>D0(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:u}))})};var z0=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function F0(t){return t.endsWith("/")?t:t+"/"}function B0(t,e){var r,n;const{db:s,auth:a,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,p={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>z0(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function q0(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(F0(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Uh="2.71.1",kr=30*1e3,jo=3,xa=jo*kr,V0="http://localhost:9999",W0="supabase.auth.token",H0={"X-Client-Info":`gotrue-js/${Uh}`},_o="X-Supabase-Api-Version",Mh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},K0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Q0=10*60*1e3;class kl extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function L(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class G0 extends kl{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function J0(t){return L(t)&&t.name==="AuthApiError"}class zh extends kl{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Yt extends kl{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Pt extends Yt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Y0(t){return L(t)&&t.name==="AuthSessionMissingError"}class Cs extends Yt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Es extends Yt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ps extends Yt{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function X0(t){return L(t)&&t.name==="AuthImplicitGrantRedirectError"}class Hc extends Yt{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class No extends Yt{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function ya(t){return L(t)&&t.name==="AuthRetryableFetchError"}class Kc extends Yt{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class ko extends Yt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const fi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qc=` 	
\r=`.split(""),Z0=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Qc.length;e+=1)t[Qc[e].charCodeAt(0)]=-2;for(let e=0;e<fi.length;e+=1)t[fi[e].charCodeAt(0)]=e;return t})();function Gc(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(fi[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(fi[n]),e.queuedBits-=6}}function Fh(t,e,r){const n=Z0[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Jc(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{rg(o,n,r)};for(let o=0;o<t.length;o+=1)Fh(t.charCodeAt(o),s,a);return e.join("")}function eg(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function tg(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}eg(n,e)}}function rg(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ng(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Fh(t.charCodeAt(s),r,n);return new Uint8Array(e)}function sg(t){const e=[];return tg(t,r=>e.push(r)),new Uint8Array(e)}function ig(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>Gc(s,r,n)),Gc(null,r,n),e.join("")}function ag(t){return Math.round(Date.now()/1e3)+t}function og(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Je=()=>typeof window<"u"&&typeof document<"u",er={tested:!1,writable:!1},Bh=()=>{if(!Je())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(er.tested)return er.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),er.tested=!0,er.writable=!0}catch{er.tested=!0,er.writable=!1}return er.writable};function lg(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const qh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ss(async()=>{const{default:n}=await Promise.resolve().then(()=>rn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},cg=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Sr=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},tr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Et=async(t,e)=>{await t.removeItem(e)};class $i{constructor(){this.promise=new $i.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}$i.promiseConstructor=Promise;function va(t){const e=t.split(".");if(e.length!==3)throw new ko("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!K0.test(e[n]))throw new ko("JWT not in base64url format");return{header:JSON.parse(Jc(e[0])),payload:JSON.parse(Jc(e[1])),signature:ng(e[2]),raw:{header:e[0],payload:e[1]}}}async function ug(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function dg(t,e){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){s(o);return}}})()})}function hg(t){return("0"+t.toString(16)).substr(-2)}function fg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,hg).join("")}async function mg(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function pg(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await mg(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function br(t,e,r=!1){const n=fg();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Sr(t,`${e}-code-verifier`,s);const a=await pg(n);return[a,n===a?"plain":"s256"]}const gg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xg(t){const e=t.headers.get(_o);if(!e||!e.match(gg))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function yg(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function vg(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function jr(t){if(!wg.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wa(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Yc(t){return JSON.parse(JSON.stringify(t))}var bg=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const sr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),jg=[502,503,504];async function Xc(t){var e;if(!cg(t))throw new No(sr(t),0);if(jg.includes(t.status))throw new No(sr(t),t.status);let r;try{r=await t.json()}catch(a){throw new zh(sr(a),a)}let n;const s=xg(t);if(s&&s.getTime()>=Mh["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Kc(sr(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Pt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Kc(sr(r),t.status,r.weak_password.reasons);throw new G0(sr(r),t.status||500,n)}const _g=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function M(t,e,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[_o]||(a[_o]=Mh["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Ng(t,e,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Ng(t,e,r,n,s,a){const o=_g(e,n,s,a);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new No(sr(c),0)}if(l.ok||await Xc(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Xc(c)}}function ft(t){var e;let r=null;Eg(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=ag(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Zc(t){const e=ft(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Lt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function kg(t){return{data:t,error:null}}function Sg(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=t,o=bg(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Cg(t){return t}function Eg(t){return t.access_token&&t.refresh_token&&t.expires_in}const ba=["global","local","others"];var Pg=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class Tg{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=qh(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=ba[0]){if(ba.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ba.join(", ")}`);try{return await M(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(L(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await M(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Lt})}catch(n){if(L(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Pg(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await M(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Sg,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(L(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await M(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Lt})}catch(r){if(L(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await M(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Cg});if(d.error)throw d.error;const h=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(b=>{const f=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(b.split(";")[1].split("=")[1]);u[`${j}Page`]=f}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(L(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){jr(e);try{return await M(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Lt})}catch(r){if(L(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){jr(e);try{return await M(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Lt})}catch(n){if(L(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){jr(e);try{return await M(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Lt})}catch(n){if(L(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){jr(e.userId);try{const{data:r,error:n}=await M(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(L(r))return{data:null,error:r};throw r}}async _deleteFactor(e){jr(e.userId),jr(e.id);try{return{data:await M(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(L(r))return{data:null,error:r};throw r}}}function eu(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Og(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const _r={debug:!!(globalThis&&Bh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Vh extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ag extends Vh{}async function Rg(t,e,r){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),_r.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw _r.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Ag(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(_r.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Og();const Lg={url:V0,storageKey:W0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:H0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function tu(t,e,r){return await r()}const Nr={};class Yn{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Yn.nextInstanceID,Yn.nextInstanceID+=1,this.instanceID>0&&Je()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Lg),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Tg({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=qh(s.fetch),this.lock=s.lock||tu,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Je()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Rg:this.lock=tu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Bh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=eu(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=eu(this.memoryStorage)),Je()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Nr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Nr[this.storageKey]=Object.assign(Object.assign({},Nr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Nr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Nr[this.storageKey]=Object.assign(Object.assign({},Nr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Uh}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=lg(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Je()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),X0(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return L(r)?{error:r}:{error:new zh("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const a=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ft}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(L(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,n,s;try{let a;if("email"in e){const{email:d,password:h,options:p}=e;let v=null,b=null;this.flowType==="pkce"&&([v,b]=await br(this.storage,this.storageKey)),a=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:v,code_challenge_method:b},xform:ft})}else if("phone"in e){const{phone:d,password:h,options:p}=e;a=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:ft})}else throw new Es("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(L(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:l}=e;r=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Zc})}else if("phone"in e){const{phone:a,password:o,options:l}=e;r=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Zc})}else throw new Es("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Cs}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(L(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,a,o,l,c,u,d,h,p,v;let b,f;if("message"in e)b=e.message,f=e.signature;else{const{chain:j,wallet:m,statement:y,options:g}=e;let w;if(Je())if(typeof m=="object")w=m;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))w=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=m}const k=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const _=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),y?{statement:y}:null));let x;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")x=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)x=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in x&&"signature"in x&&(typeof x.signedMessage=="string"||x.signedMessage instanceof Uint8Array)&&x.signature instanceof Uint8Array)b=typeof x.signedMessage=="string"?x.signedMessage:new TextDecoder().decode(x.signedMessage),f=x.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${k.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(x=>`- ${x}`)]:[]].join(`
`);const _=await w.signMessage(new TextEncoder().encode(b),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=_}}try{const{data:j,error:m}=await M(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:ig(f)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:ft});if(m)throw m;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Cs}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:m})}catch(j){if(L(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const r=await tr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:o}=await M(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ft});if(await Et(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Cs}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(L(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:a,nonce:o}=e,l=await M(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ft}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Cs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(L(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,a,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await br(this.storage,this.storageKey));const{error:h}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Es("You must provide either an email or phone number.")}catch(l){if(L(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,a;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await M(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:ft});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(L(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await br(this.storage,this.storageKey)),await M(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:kg})}catch(a){if(L(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Pt;const{error:s}=await M(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(L(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:a}=e,{error:o}=await M(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:a}=e,{data:o,error:l}=await M(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Es("You must provide either an email or phone number and a type")}catch(r){if(L(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await tr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<xa:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await tr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=wa()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Lt}):await this._useSession(async r=>{var n,s,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pt}:await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Lt})})}catch(r){if(L(r))return Y0(r)&&(await this._removeSession(),await Et(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new Pt;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await br(this.storage,this.storageKey));const{data:u,error:d}=await M(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Lt});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(L(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pt;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:o}=va(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(L(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Pt;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(L(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Je())throw new Ps("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ps(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Hc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ps("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Hc("No code detected.");const{data:y,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!a||!l||!o||!u)throw new Ps("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let p=d+h;c&&(p=parseInt(c));const v=p-d;v*1e3<=kr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const b=p-h;d-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,d):d-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,p,d);const{data:f,error:j}=await this._getUser(a);if(j)throw j;const m={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:p,refresh_token:o,token_type:u,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(L(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await tr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(J0(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Et(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=og(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await br(this.storage,this.storageKey,!0));try{return await M(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(L(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(L(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var o,l,c,u,d;const{data:h,error:p}=a;if(p)throw p;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await M(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Je()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(L(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)throw o;return await M(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(L(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await dg(async s=>(s>0&&await ug(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await M(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ft})),(s,a)=>{const o=200*Math.pow(2,s);return a&&ya(a)&&Date.now()+o-n<kr})}catch(n){if(this._debug(r,"error",n),L(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Je()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await tr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await tr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Sr(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:wa()}else if(s&&!s.user&&!s.user){const o=await tr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Et(this.storage,this.storageKey+"-user"),await Sr(this.storage,this.storageKey,s)):s.user=wa()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<xa;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${xa}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),ya(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Pt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new $i;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new Pt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),L(a)){const o={session:null,error:a};return ya(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Sr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=Yc(s);await Sr(this.storage,this.storageKey,a)}else{const s=Yc(r);await Sr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Et(this.storage,this.storageKey),await Et(this.storage,this.storageKey+"-code-verifier"),await Et(this.storage,this.storageKey+"-user"),this.userStorage&&await Et(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Je()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),kr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/kr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${kr}ms, refresh threshold is ${jo} ticks`),s<=jo&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Vh)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Je()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await br(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await M(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(L(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await M(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(L(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:l}=await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(L(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(L(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=va(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+Q0>s)return n;const{data:a,error:o}=await M(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:v,error:b}=await this.getSession();if(b||!v.session)return{data:null,error:b};n=v.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:c}}=va(n);r!=null&&r.allowExpired||yg(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:a,header:s,signature:o},error:null}}const d=vg(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,sg(`${l}.${c}`)))throw new ko("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(n){if(L(n))return{data:null,error:n};throw n}}}Yn.nextInstanceID=0;const $g=Yn;class Dg extends $g{constructor(e){super(e)}}var Ig=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class Ug{constructor(e,r,n){var s,a,o;this.supabaseUrl=e,this.supabaseKey=r;const l=q0(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:R0,realtime:$0,auth:Object.assign(Object.assign({},L0),{storageKey:c}),global:A0},d=B0(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=M0(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Zp(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new P0(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Op(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Ig(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:o,flowType:l,lock:c,debug:u},d,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Dg({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new g0(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Mg=(t,e,r)=>new Ug(t,e,r);function zg(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}zg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Fg=void 0,Bg=void 0;throw new Error("Missing Supabase environment variables");const P=Mg(Fg,Bg),Wh=N.createContext(void 0);function qg({children:t}){const[e,r]=N.useState(null),[n,s]=N.useState(null),[a,o]=N.useState(!0);N.useEffect(()=>{P.auth.getSession().then(({data:{session:j}})=>{r(j),j!=null&&j.user?l(j.user.id):o(!1)});const{data:{subscription:f}}=P.auth.onAuthStateChange((j,m)=>{(async()=>(r(m),m!=null&&m.user?await l(m.user.id):(s(null),o(!1))))()});return()=>f.unsubscribe()},[]);const l=async f=>{try{const{data:j,error:m}=await P.from("users").select("*").eq("id",f).maybeSingle();if(m)throw m;s(j)}catch(j){console.error("Error loading user profile:",j)}finally{o(!1)}},b={session:e,user:n,loading:a,signUp:async(f,j,m,y)=>{const{data:g,error:w}=await P.auth.signUp({email:f,password:j});if(w)throw w.message.includes("already registered")?new Error("This email is already registered. Please sign in instead."):w;if(!g.user)throw new Error("No user returned from signup");const{error:k}=await P.from("users").insert({id:g.user.id,email:f,name:m,role:y});if(k)throw k.message.includes("duplicate key")?new Error("This account already exists. Please sign in instead."):k},signIn:async(f,j)=>{var w;const{data:m,error:y}=await P.auth.signInWithPassword({email:f,password:j});if(y)throw y;if(!m.user)throw new Error("No user returned from sign in");const{data:g}=await P.from("users").select("*").eq("id",m.user.id).maybeSingle();if(g)await P.from("users").update({last_login_at:new Date().toISOString()}).eq("id",m.user.id);else{const{error:k}=await P.from("users").insert({id:m.user.id,email:m.user.email,name:((w=m.user.user_metadata)==null?void 0:w.name)||m.user.email.split("@")[0],role:"owner"});if(k)throw k}},signOut:async()=>{const{error:f}=await P.auth.signOut();if(f)throw f;s(null)},updateProfile:async f=>{if(!n)throw new Error("No user logged in");const{error:j}=await P.from("users").update(f).eq("id",n.id);if(j)throw j;s({...n,...f})},resetPassword:async f=>{const{error:j}=await P.auth.resetPasswordForEmail(f,{redirectTo:`${window.location.origin}/reset-password`});if(j)throw j},updatePassword:async f=>{const{error:j}=await P.auth.updateUser({password:f});if(j)throw j}};return i.jsx(Wh.Provider,{value:b,children:t})}function ce(){const t=N.useContext(Wh);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const Hh=N.createContext(void 0);function Vg({children:t}){const{user:e}=ce(),[r,n]=N.useState(null),[s,a]=N.useState(null),[o,l]=N.useState([]),[c,u]=N.useState(!0);N.useEffect(()=>{e?d():(n(null),a(null),l([]),u(!1))},[e]);const d=async()=>{if(e)try{u(!0);const{data:f,error:j}=await P.from("org_members").select("*, organizations(*)").eq("user_id",e.id);if(j)throw j;const m=(f==null?void 0:f.map(w=>w.organizations))||[];l(m);const y=localStorage.getItem("currentOrgId");let g=m.find(w=>w.id===y)||m[0];if(g){const w=f==null?void 0:f.find(k=>k.org_id===g.id);n(g),a(w||null),localStorage.setItem("currentOrgId",g.id)}}catch(f){console.error("Error loading organizations:",f)}finally{u(!1)}},b={currentOrg:r,orgMember:s,organizations:o,loading:c,switchOrg:f=>{const j=o.find(m=>m.id===f);j&&(n(j),localStorage.setItem("currentOrgId",f),P.from("org_members").select("*").eq("org_id",f).eq("user_id",e==null?void 0:e.id).maybeSingle().then(({data:m})=>a(m)))},refreshOrgs:async()=>{await d()},canAccess:f=>s?f.includes(s.role):!1};return i.jsx(Hh.Provider,{value:b,children:t})}function at(){const t=N.useContext(Hh);if(t===void 0)throw new Error("useOrg must be used within an OrgProvider");return t}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),D=(t,e)=>{const r=N.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>N.createElement("svg",{ref:d,...Wg,width:s,height:s,stroke:n,strokeWidth:o?Number(a)*24/Number(s):a,className:["lucide",`lucide-${Hg(t)}`,l].join(" "),...u},[...e.map(([h,p])=>N.createElement(h,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=D("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=D("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=D("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=D("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=D("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=D("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=D("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=D("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=D("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=D("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=D("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=D("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=D("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=D("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=D("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=D("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=D("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=D("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=D("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=D("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=D("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=D("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=D("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=D("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=D("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=D("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=D("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=D("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=D("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=D("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=D("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=D("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=D("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=D("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=D("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=D("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=D("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=D("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=D("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=D("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=D("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),B=N.forwardRef(({label:t,error:e,className:r="",...n},s)=>i.jsxs("div",{className:"w-full",children:[t&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),i.jsx("input",{ref:s,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${e?"border-red-500":"border-gray-300"} ${r}`,...n}),e&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:e})]}));B.displayName="Input";const R=N.forwardRef(({children:t,variant:e="primary",size:r="md",isLoading:n,className:s="",...a},o)=>{const l="font-semibold rounded-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center justify-center transform active:scale-95",c={primary:"bg-gradient-to-r from-blue-600 to-violet-600 hover:from-blue-700 hover:to-violet-700 text-white shadow-lg hover:shadow-xl",secondary:"bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 text-gray-900 border border-gray-300",danger:"bg-gradient-to-r from-rose-600 to-pink-600 hover:from-rose-700 hover:to-pink-700 text-white shadow-lg hover:shadow-xl",ghost:"hover:bg-gradient-to-r hover:from-blue-50 hover:to-violet-50 text-gray-700"},u={sm:"px-3 py-2 text-sm",md:"px-5 py-2.5 text-base",lg:"px-7 py-3.5 text-lg"};return i.jsxs("button",{ref:o,className:`${l} ${c[e]} ${u[r]} ${s}`,disabled:n||a.disabled,...a,children:[n&&i.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]})});R.displayName="Button";function ix({onSwitch:t}){const{signIn:e,resetPassword:r}=ce(),[n,s]=N.useState(""),[a,o]=N.useState(""),[l,c]=N.useState(""),[u,d]=N.useState(""),[h,p]=N.useState(!1),[v,b]=N.useState(!1),f=async m=>{m.preventDefault(),c(""),d(""),p(!0);try{await e(n,a)}catch(y){console.error("Login error:",y);let g="Failed to sign in";y.message.includes("Invalid login credentials")?g="Invalid email or password. Please check your credentials and try again.":y.message.includes("Email not confirmed")?g="Please confirm your email address before signing in.":y.message&&(g=y.message),c(g)}finally{p(!1)}},j=async m=>{if(m.preventDefault(),c(""),d(""),!n){c("Please enter your email address");return}p(!0);try{await r(n),d("Password reset email sent! Check your inbox."),setTimeout(()=>{b(!1),d("")},3e3)}catch(y){console.error("Password reset error:",y),c(y.message||"Failed to send password reset email")}finally{p(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 flex items-center justify-center px-4",children:i.jsxs("div",{className:"max-w-md w-full",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center mb-4",children:i.jsx(Di,{className:"h-12 w-12 text-blue-600"})}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Vottsh AMS"}),i.jsx("p",{className:"mt-2 text-gray-600",children:"Sign in to your account"})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[v?i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Reset Password"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enter your email and we'll send you a reset link"})]}),l&&i.jsx("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg text-sm",children:l}),u&&i.jsx("div",{className:"bg-green-50 text-green-700 px-4 py-3 rounded-lg text-sm",children:u}),i.jsx(B,{type:"email",label:"Email",value:n,onChange:m=>s(m.target.value),placeholder:"you@example.com",required:!0}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx(R,{type:"submit",className:"flex-1",isLoading:h,children:"Send Reset Link"}),i.jsx(R,{type:"button",variant:"secondary",onClick:()=>{b(!1),c(""),d("")},className:"flex-1",children:"Back to Login"})]})]}):i.jsxs("form",{onSubmit:f,className:"space-y-4",children:[l&&i.jsx("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg text-sm",children:l}),u&&i.jsx("div",{className:"bg-green-50 text-green-700 px-4 py-3 rounded-lg text-sm",children:u}),i.jsx(B,{type:"email",label:"Email",value:n,onChange:m=>s(m.target.value),placeholder:"you@example.com",required:!0}),i.jsx(B,{type:"password",label:"Password",value:a,onChange:m=>o(m.target.value),placeholder:"",required:!0}),i.jsx(R,{type:"submit",className:"w-full",isLoading:h,children:"Sign In"}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"button",onClick:()=>b(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Forgot password?"})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",i.jsx("button",{onClick:()=>t("signup"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign up"})]})})]})]})})}function ax({onSwitch:t}){const[e,r]=N.useState({name:"",email:"",password:"",orgName:"",propertyName:"",propertyAddress:""}),[n,s]=N.useState(""),[a,o]=N.useState(!1),l=async c=>{c.preventDefault(),s(""),o(!0);try{const{data:u}=await P.auth.getUser();u!=null&&u.user&&await P.auth.signOut();const p=await fetch("undefined/functions/v1/auth-signup",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({email:e.email,password:e.password,name:e.name,orgName:e.orgName,propertyName:e.propertyName,propertyAddress:e.propertyAddress})}),v=await p.json();if(!p.ok)throw new Error(v.error||"Failed to create account");v.session&&await P.auth.setSession({access_token:v.session.access_token,refresh_token:v.session.refresh_token}),window.location.href="/dashboard"}catch(u){console.error("Signup error:",u),s(u.message||"Failed to create account"),o(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 flex items-center justify-center px-4 py-8",children:i.jsxs("div",{className:"max-w-md w-full",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center mb-4",children:i.jsx(Di,{className:"h-12 w-12 text-blue-600"})}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Vottsh AMS"}),i.jsx("p",{className:"mt-2 text-gray-600",children:"Create your account"})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[i.jsxs("form",{onSubmit:l,className:"space-y-4",children:[n&&i.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg text-sm",children:[n,(n.includes("already registered")||n.includes("already exists"))&&i.jsx("div",{className:"mt-2",children:i.jsx("button",{type:"button",onClick:()=>t("login"),className:"underline hover:text-red-800 font-semibold",children:"Click here to go to login page"})})]}),i.jsx(B,{label:"Full Name",value:e.name,onChange:c=>r({...e,name:c.target.value}),placeholder:"John Doe",required:!0}),i.jsx(B,{type:"email",label:"Email",value:e.email,onChange:c=>r({...e,email:c.target.value}),placeholder:"you@example.com",required:!0}),i.jsx(B,{type:"password",label:"Password",value:e.password,onChange:c=>r({...e,password:c.target.value}),placeholder:"",minLength:6,required:!0}),i.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Organization Details"}),i.jsx(B,{label:"Organization Name",value:e.orgName,onChange:c=>r({...e,orgName:c.target.value}),placeholder:"My Property Management Co.",required:!0})]}),i.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"First Property"}),i.jsx(B,{label:"Property Name",value:e.propertyName,onChange:c=>r({...e,propertyName:c.target.value}),placeholder:"Sunset Apartments",required:!0}),i.jsx(B,{label:"Address",value:e.propertyAddress,onChange:c=>r({...e,propertyAddress:c.target.value}),placeholder:"123 Main St, New York, NY 10001",required:!0,className:"mt-4"})]}),i.jsx(R,{type:"submit",className:"w-full",isLoading:a,children:"Create Account"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",i.jsx("button",{onClick:()=>t("login"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in"})]})})]})]})})}function ox({onComplete:t}){const{updatePassword:e}=ce(),[r,n]=N.useState(""),[s,a]=N.useState(""),[o,l]=N.useState(""),[c,u]=N.useState(""),[d,h]=N.useState(!1),p=async v=>{if(v.preventDefault(),l(""),u(""),r.length<6){l("Password must be at least 6 characters");return}if(r!==s){l("Passwords do not match");return}h(!0);try{await e(r),u("Password updated successfully! Redirecting..."),setTimeout(()=>{t()},2e3)}catch(b){console.error("Password update error:",b),l(b.message||"Failed to update password")}finally{h(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 flex items-center justify-center px-4",children:i.jsxs("div",{className:"max-w-md w-full",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center mb-4",children:i.jsx(Di,{className:"h-12 w-12 text-blue-600"})}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Vottsh AMS"}),i.jsx("p",{className:"mt-2 text-gray-600",children:"Create a new password"})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8",children:i.jsxs("form",{onSubmit:p,className:"space-y-4",children:[o&&i.jsx("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg text-sm",children:o}),c&&i.jsx("div",{className:"bg-green-50 text-green-700 px-4 py-3 rounded-lg text-sm",children:c}),i.jsx(B,{type:"password",label:"New Password",value:r,onChange:v=>n(v.target.value),placeholder:"",required:!0,minLength:6}),i.jsx(B,{type:"password",label:"Confirm Password",value:s,onChange:v=>a(v.target.value),placeholder:"",required:!0,minLength:6}),i.jsx(R,{type:"submit",className:"w-full",isLoading:d,children:"Update Password"})]})})]})})}function lx(){var d;const{user:t,signOut:e}=ce(),{currentOrg:r,organizations:n,switchOrg:s}=at(),[a,o]=N.useState(!1),[l,c]=N.useState(!1),u=async()=>{try{await e()}catch(h){console.error("Sign out error:",h)}};return i.jsx("nav",{className:"bg-white border-b border-gray-200 sticky top-0 z-40 backdrop-blur-lg bg-opacity-90",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between h-16",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-600 to-violet-600 rounded-xl",children:i.jsx(Di,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"ml-3 text-xl font-bold bg-gradient-to-r from-blue-600 to-violet-600 bg-clip-text text-transparent",children:"Vottsh AMS"})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[r&&i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>o(!a),className:"flex items-center space-x-2 px-4 py-2 rounded-xl hover:bg-gradient-to-r hover:from-blue-50 hover:to-violet-50 transition-all duration-200",children:[i.jsx("span",{className:"text-sm font-semibold text-gray-700",children:r.name}),i.jsx(Jg,{className:"h-4 w-4 text-gray-500"})]}),a&&n.length>1&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-100 py-2",children:n.map(h=>i.jsx("button",{onClick:()=>{s(h.id),o(!1)},className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-100 ${r.id===h.id?"bg-blue-50 text-blue-700":"text-gray-700"}`,children:h.name},h.id))})]}),i.jsxs("button",{className:"p-2 text-gray-400 hover:text-blue-600 rounded-xl hover:bg-gradient-to-r hover:from-blue-50 hover:to-violet-50 transition-all duration-200 relative",children:[i.jsx(Gg,{className:"h-5 w-5"}),i.jsx("span",{className:"absolute top-1 right-1 h-2 w-2 bg-gradient-to-r from-rose-500 to-pink-500 rounded-full animate-pulse"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:()=>c(!l),className:"flex items-center space-x-2 p-2 rounded-xl hover:bg-gradient-to-r hover:from-blue-50 hover:to-violet-50 transition-all duration-200",children:i.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-r from-blue-600 to-violet-600 flex items-center justify-center shadow-md",children:i.jsx("span",{className:"text-sm font-semibold text-white",children:(d=t==null?void 0:t.name)==null?void 0:d.charAt(0).toUpperCase()})})}),l&&i.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-gray-100 py-2",children:[i.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:t==null?void 0:t.name}),i.jsx("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.email})]}),i.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[i.jsx(sx,{className:"h-4 w-4 mr-2"}),"Profile"]}),i.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[i.jsx(Jh,{className:"h-4 w-4 mr-2"}),"Settings"]}),i.jsxs("button",{onClick:u,className:"w-full text-left px-4 py-2 text-sm text-red-700 hover:bg-red-50 flex items-center",children:[i.jsx(Zg,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})]})]})})})}function cx({currentPage:t,onNavigate:e}){const{orgMember:r}=at(),s=[{id:"dashboard",label:"Dashboard",icon:nu,roles:["owner","staff","tenant","security"]},{id:"properties",label:"Properties",icon:So,roles:["owner","staff"]},{id:"work-orders",label:"Work Orders",icon:Xn,roles:["owner","staff","tenant"]},{id:"vendors",label:"Vendors",icon:Ii,roles:["owner","staff"]},{id:"visitor-passes",label:"Visitor Passes",icon:rx,roles:["owner","staff","tenant","security"]},{id:"gas-store",label:"Gas Store",icon:Rn,roles:["owner","staff","tenant"]},{id:"analytics",label:"Analytics",icon:Kh,roles:["owner"]},{id:"settings",label:"Settings",icon:Jh,roles:["owner","staff"]},{id:"vendor-dashboard",label:"Vendor Dashboard",icon:nu,roles:["vendor"]},{id:"vendor-jobs-board",label:"Jobs Board",icon:qe,roles:["vendor"]},{id:"vendor-my-jobs",label:"My Jobs",icon:Xn,roles:["vendor"]},{id:"vendor-quotes",label:"My Quotes",icon:$e,roles:["vendor"]},{id:"vendor-invoices",label:"Invoices",icon:Rn,roles:["vendor"]},{id:"vendor-documents",label:"Documents",icon:Xg,roles:["vendor"]},{id:"vendor-inventory",label:"My Inventory",icon:nt,roles:["vendor"]}].filter(a=>!r||a.roles.includes(r.role));return i.jsx("aside",{className:"w-64 bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen",children:i.jsx("nav",{className:"px-4 py-6 space-y-1",children:s.map(a=>{const o=a.icon,l=t===a.id;return i.jsxs("button",{onClick:()=>e(a.id),className:`group w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200 ${l?"bg-gradient-to-r from-blue-600 to-violet-600 text-white shadow-lg shadow-blue-200":"text-gray-700 hover:bg-white hover:shadow-md"}`,children:[i.jsx(o,{className:`h-5 w-5 transition-transform duration-200 ${l?"":"group-hover:scale-110"}`}),i.jsx("span",{className:"font-medium",children:a.label})]},a.id)})})})}function ux({children:t,currentPage:e,onNavigate:r}){return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx(lx,{}),i.jsxs("div",{className:"flex",children:[i.jsx(cx,{currentPage:e,onNavigate:r}),i.jsx("main",{className:"flex-1 p-8",children:t})]})]})}function ee({children:t,className:e="",...r}){return i.jsx("div",{className:`bg-white rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200 ${e}`,...r,children:t})}function wt({children:t,className:e=""}){return i.jsx("div",{className:`px-6 py-5 ${e}`,children:t})}function oe({children:t,variant:e="default",className:r=""}){const n={default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"};return i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n[e]} ${r}`,children:t})}function dx({property:t,stats:e,onClick:r}){const n=a=>a.split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2),s=a=>{const o=["bg-blue-500","bg-green-500","bg-yellow-500","bg-red-500","bg-indigo-500","bg-pink-500","bg-teal-500"],l=a.charCodeAt(0)%o.length;return o[l]};return i.jsx(ee,{onClick:r,className:"cursor-pointer hover:shadow-lg transition-shadow duration-200",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:`w-16 h-16 rounded-lg ${s(t.name)} flex items-center justify-center flex-shrink-0`,children:i.jsx("span",{className:"text-white text-xl font-bold",children:n(t.name)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:t.name}),i.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.address})]}),i.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[t.type==="apartment"&&i.jsx(oe,{variant:"default",children:"Apartment"}),t.type==="estate"&&i.jsx(oe,{variant:"default",children:"Estate"})]})]}),e&&i.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xn,{className:"h-4 w-4 text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500",children:"Work Orders"}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.openWorkOrders,e.slaAtRisk>0&&i.jsxs("span",{className:"text-red-600 ml-1",children:["(",e.slaAtRisk," at risk)"]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ii,{className:"h-4 w-4 text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500",children:"Occupancy"}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.occupiedUnits,"/",e.totalUnits]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Kg,{className:"h-4 w-4 text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500",children:"Visitors Today"}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.visitorsToday})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(nt,{className:"h-4 w-4 text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500",children:"Gas Orders"}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.gasOrdersThisMonth})]})]})]})]})]})})}function hx({onPropertyClick:t}){const{currentOrg:e}=at(),[r,n]=N.useState([]),[s,a]=N.useState(!0),[o,l]=N.useState(""),[c,u]=N.useState("name");N.useEffect(()=>{e&&d()},[e]);const d=async()=>{if(e)try{a(!0);const{data:p,error:v}=await P.from("properties").select("*").eq("org_id",e.id).order("name");if(v)throw v;const b=await Promise.all((p||[]).map(async f=>{var x,C,A,S;const[j,m,y,g]=await Promise.all([P.from("work_orders").select("id, status, sla_due_at").eq("property_id",f.id).in("status",["new","triaged","assigned","in_progress"]),P.from("units").select("id, status").eq("property_id",f.id),P.from("visitor_events").select("id").eq("property_id",f.id).gte("created_at",new Date(Date.now()-864e5).toISOString()),P.from("orders").select("id").eq("property_id",f.id).gte("created_at",new Date(Date.now()-2592e6).toISOString())]),w=new Date,k=(j.data||[]).filter(I=>I.sla_due_at&&new Date(I.sla_due_at)<w).length,_=(m.data||[]).filter(I=>I.status==="occupied").length;return{...f,stats:{openWorkOrders:((x=j.data)==null?void 0:x.length)||0,slaAtRisk:k,visitorsToday:((C=y.data)==null?void 0:C.length)||0,gasOrdersThisMonth:((A=g.data)==null?void 0:A.length)||0,totalUnits:((S=m.data)==null?void 0:S.length)||0,occupiedUnits:_}}}));n(b)}catch(p){console.error("Error loading properties:",p)}finally{a(!1)}},h=r.filter(p=>p.name.toLowerCase().includes(o.toLowerCase())||p.address.toLowerCase().includes(o.toLowerCase())).sort((p,v)=>{var b,f;return c==="name"?p.name.localeCompare(v.name):c==="newest"?new Date(v.created_at).getTime()-new Date(p.created_at).getTime():c==="workorders"?(((b=v.stats)==null?void 0:b.openWorkOrders)||0)-(((f=p.stats)==null?void 0:f.openWorkOrders)||0):0});return s?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"h-10 w-64 bg-gray-200 rounded animate-pulse"}),i.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded animate-pulse"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((p,v)=>i.jsx("div",{className:"h-48 bg-gray-200 rounded-lg animate-pulse"},v))})]}):r.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:i.jsx(Cl,{className:"h-8 w-8 text-gray-400"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Properties Yet"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Get started by adding your first property to manage."}),i.jsxs(R,{onClick:()=>alert("Add property feature coming soon"),children:[i.jsx(fe,{className:"h-4 w-4 mr-2"}),"Add Property"]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Gh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(B,{type:"text",placeholder:"Search properties...",value:o,onChange:p=>l(p.target.value),className:"pl-10"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("select",{value:c,onChange:p=>u(p.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"name",children:"Sort by Name"}),i.jsx("option",{value:"newest",children:"Sort by Newest"}),i.jsx("option",{value:"workorders",children:"Sort by Work Orders"})]}),i.jsxs(R,{onClick:()=>alert("Add property feature coming soon"),children:[i.jsx(fe,{className:"h-4 w-4 mr-2"}),"Add Property"]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(p=>i.jsx(dx,{property:p,stats:p.stats,onClick:()=>t==null?void 0:t(p.id)},p.id))})]})}function lu({onPropertyClick:t}){return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Properties"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your property portfolio"})]}),i.jsx(hx,{onPropertyClick:t})]})}function it({isOpen:t,onClose:e,title:r,children:n,size:s="md"}){if(N.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const a={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:e}),i.jsxs("div",{className:`relative bg-white rounded-lg shadow-xl ${a[s]} w-full`,children:[r&&i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500 transition-colors",children:i.jsx(Ui,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"px-6 py-4",children:n})]})]})})}function fx(){const{currentOrg:t}=at(),[e,r]=N.useState([]),[n,s]=N.useState(!0),[a,o]=N.useState(!1),[l,c]=N.useState({name:"",type:"apartment",address:"",units_count:0}),[u,d]=N.useState(!1);N.useEffect(()=>{t&&h()},[t]);const h=async()=>{if(t)try{const{data:v,error:b}=await P.from("properties").select("*").eq("org_id",t.id).order("created_at",{ascending:!1});if(b)throw b;r(v||[])}catch(v){console.error("Error loading properties:",v)}finally{s(!1)}},p=async v=>{if(v.preventDefault(),!!t){d(!0);try{const{error:b}=await P.from("properties").insert({org_id:t.id,...l});if(b)throw b;o(!1),c({name:"",type:"apartment",address:"",units_count:0}),await h()}catch(b){console.error("Error creating property:",b),alert("Failed to create property")}finally{d(!1)}}};return n?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Properties"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your buildings and estates"})]}),i.jsxs(R,{onClick:()=>o(!0),children:[i.jsx(fe,{className:"h-4 w-4 mr-2"}),"Add Property"]})]}),e.length===0?i.jsx(ee,{children:i.jsxs(wt,{className:"py-12 text-center",children:[i.jsx(So,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No properties yet"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by adding your first property"}),i.jsxs(R,{onClick:()=>o(!0),children:[i.jsx(fe,{className:"h-4 w-4 mr-2"}),"Add Property"]})]})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(v=>i.jsx(ee,{className:"hover:shadow-md transition-shadow cursor-pointer",children:i.jsxs(wt,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(So,{className:"h-6 w-6 text-blue-600"})}),i.jsx(oe,{children:v.type})]}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:v.name}),i.jsxs("div",{className:"flex items-start text-sm text-gray-600 mb-4",children:[i.jsx(El,{className:"h-4 w-4 mr-1 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:v.address})]}),i.jsx("div",{className:"pt-4 border-t border-gray-200",children:i.jsxs("p",{className:"text-sm text-gray-600",children:[i.jsx("span",{className:"font-medium",children:v.units_count})," units"]})})]})},v.id))}),i.jsx(it,{isOpen:a,onClose:()=>o(!1),title:"Add New Property",children:i.jsxs("form",{onSubmit:p,className:"space-y-4",children:[i.jsx(B,{label:"Property Name",value:l.name,onChange:v=>c({...l,name:v.target.value}),placeholder:"Sunset Apartments",required:!0}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type"}),i.jsxs("select",{value:l.type,onChange:v=>c({...l,type:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[i.jsx("option",{value:"apartment",children:"Apartment"}),i.jsx("option",{value:"estate",children:"Estate"}),i.jsx("option",{value:"subdivision",children:"Subdivision"}),i.jsx("option",{value:"complex",children:"Complex"})]})]}),i.jsx(B,{label:"Address",value:l.address,onChange:v=>c({...l,address:v.target.value}),placeholder:"123 Main St, New York, NY 10001",required:!0}),i.jsx(B,{type:"number",label:"Number of Units",value:l.units_count,onChange:v=>c({...l,units_count:parseInt(v.target.value)||0}),placeholder:"0",min:"0",required:!0}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx(R,{type:"submit",isLoading:u,className:"flex-1",children:"Create Property"}),i.jsx(R,{type:"button",variant:"secondary",onClick:()=>o(!1),className:"flex-1",children:"Cancel"})]})]})})]})}function mx({propertyId:t,units:e,onClose:r,onSuccess:n}){const{user:s}=ce(),{currentOrg:a}=at(),[o,l]=N.useState(!1),[c,u]=N.useState(""),[d,h]=N.useState({title:"",description:"",category:"other",priority:"normal",unitId:""}),p=async v=>{if(v.preventDefault(),!(!a||!s)){l(!0),u("");try{const{error:b}=await P.from("work_orders").insert({org_id:a.id,property_id:t,unit_id:d.unitId||null,created_by:s.id,title:d.title,description:d.description,category:d.category,priority:d.priority,status:"new",cost:0,parts_used:[],before_photos:[],after_photos:[]});if(b)throw b;n()}catch(b){console.error("Error creating work order:",b),u(b.message||"Failed to create work order")}finally{l(!1)}}};return i.jsx(it,{isOpen:!0,onClose:r,children:i.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create Work Order"}),i.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:i.jsx(Ui,{className:"h-6 w-6"})})]}),i.jsxs("form",{onSubmit:p,className:"space-y-4",children:[c&&i.jsx("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg text-sm",children:c}),i.jsx(B,{label:"Title",value:d.title,onChange:v=>h({...d,title:v.target.value}),placeholder:"Leaking faucet in kitchen",required:!0}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("textarea",{value:d.description,onChange:v=>h({...d,description:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,placeholder:"Provide details about the issue...",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),i.jsxs("select",{value:d.category,onChange:v=>h({...d,category:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"plumbing",children:"Plumbing"}),i.jsx("option",{value:"electrical",children:"Electrical"}),i.jsx("option",{value:"hvac",children:"HVAC"}),i.jsx("option",{value:"painting",children:"Painting"}),i.jsx("option",{value:"carpentry",children:"Carpentry"}),i.jsx("option",{value:"appliance",children:"Appliance"}),i.jsx("option",{value:"pest",children:"Pest Control"}),i.jsx("option",{value:"landscaping",children:"Landscaping"}),i.jsx("option",{value:"other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),i.jsxs("select",{value:d.priority,onChange:v=>h({...d,priority:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"low",children:"Low"}),i.jsx("option",{value:"normal",children:"Normal"}),i.jsx("option",{value:"high",children:"High"}),i.jsx("option",{value:"critical",children:"Critical"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit (Optional)"}),i.jsxs("select",{value:d.unitId,onChange:v=>h({...d,unitId:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"-- Select Unit --"}),e.map(v=>i.jsxs("option",{value:v.id,children:["Unit ",v.unit_number]},v.id))]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx(R,{type:"submit",className:"flex-1",isLoading:o,children:"Create Work Order"}),i.jsx(R,{type:"button",variant:"secondary",onClick:r,children:"Cancel"})]})]})]})})}function px({propertyId:t,units:e,onClose:r,onSuccess:n}){const{user:s}=ce(),{currentOrg:a}=at(),[o,l]=N.useState(!1),[c,u]=N.useState([]),[d,h]=N.useState(""),[p,v]=N.useState({}),[b,f]=N.useState("");N.useEffect(()=>{j()},[]);const j=async()=>{try{const{data:w,error:k}=await P.from("products").select("*").eq("active",!0).eq("is_gas_cylinder",!0).order("name");if(k)throw k;u(w||[])}catch(w){console.error("Error loading products:",w),h("Failed to load products")}},m=(w,k)=>{v(_=>{const x=_[w]||0,C=Math.max(0,x+k);if(C===0){const{[w]:A,...S}=_;return S}return{..._,[w]:C}})},y=()=>Object.entries(p).reduce((w,[k,_])=>{const x=c.find(C=>C.id===k);return w+((x==null?void 0:x.price)||0)*_},0),g=async w=>{if(w.preventDefault(),!(!a||!s)){if(Object.keys(p).length===0){h("Please add at least one item to your order");return}l(!0),h("");try{const k=Object.entries(p).map(([x,C])=>{const A=c.find(S=>S.id===x);return{product_id:x,product_name:A==null?void 0:A.name,quantity:C,price:A==null?void 0:A.price}}),{error:_}=await P.from("orders").insert({org_id:a.id,property_id:t,unit_id:b||null,user_id:s.id,total:y(),status:"pending",items:k});if(_)throw _;n()}catch(k){console.error("Error creating order:",k),h(k.message||"Failed to create order")}finally{l(!1)}}};return i.jsx(it,{isOpen:!0,onClose:r,children:i.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Order Gas Cylinders"}),i.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:i.jsx(Ui,{className:"h-6 w-6"})})]}),i.jsxs("form",{onSubmit:g,className:"space-y-6",children:[d&&i.jsx("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg text-sm",children:d}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Unit (Optional)"}),i.jsxs("select",{value:b,onChange:w=>f(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"-- Select Unit --"}),e.map(w=>i.jsxs("option",{value:w.id,children:["Unit ",w.unit_number]},w.id))]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Available Products"}),i.jsx("div",{className:"space-y-3",children:c.map(w=>i.jsx(ee,{children:i.jsxs("div",{className:"p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:w.name}),w.size&&i.jsxs("p",{className:"text-sm text-gray-600",children:["Size: ",w.size]}),i.jsxs("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:["$",w.price.toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:()=>m(w.id,-1),className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50",disabled:!p[w.id],children:i.jsx(Qh,{className:"h-4 w-4"})}),i.jsx("span",{className:"w-8 text-center font-medium",children:p[w.id]||0}),i.jsx("button",{type:"button",onClick:()=>m(w.id,1),className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50",children:i.jsx(fe,{className:"h-4 w-4"})})]})]})},w.id))})]}),Object.keys(p).length>0&&i.jsx("div",{className:"border-t pt-4",children:i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total:"}),i.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["$",y().toFixed(2)]})]})}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx(R,{type:"submit",className:"flex-1",isLoading:o,children:"Place Order"}),i.jsx(R,{type:"button",variant:"secondary",onClick:r,children:"Cancel"})]})]})]})})}function gx({propertyId:t,units:e,onClose:r,onSuccess:n}){const{user:s}=ce(),[a,o]=N.useState(!1),[l,c]=N.useState(""),[u,d]=N.useState({unitId:"",startsAt:"",endsAt:"",maxUses:1,purpose:"",notes:""}),h=()=>Math.random().toString(36).substring(2,10).toUpperCase(),p=async v=>{if(v.preventDefault(),!!s){o(!0),c("");try{const{error:b}=await P.from("visitor_passes").insert({property_id:t,unit_id:u.unitId||null,code:h(),starts_at:u.startsAt,ends_at:u.endsAt,max_uses:u.maxUses,used_count:0,purpose:u.purpose||null,notes:u.notes||null,status:"active",created_by:s.id});if(b)throw b;n()}catch(b){console.error("Error creating visitor pass:",b),c(b.message||"Failed to create visitor pass")}finally{o(!1)}}};return i.jsx(it,{isOpen:!0,onClose:r,children:i.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create Visitor Pass"}),i.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:i.jsx(Ui,{className:"h-6 w-6"})})]}),i.jsxs("form",{onSubmit:p,className:"space-y-4",children:[l&&i.jsx("div",{className:"bg-red-50 text-red-700 px-4 py-3 rounded-lg text-sm",children:l}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit (Optional)"}),i.jsxs("select",{value:u.unitId,onChange:v=>d({...u,unitId:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"-- Select Unit --"}),e.map(v=>i.jsxs("option",{value:v.id,children:["Unit ",v.unit_number]},v.id))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(B,{label:"Start Date & Time",type:"datetime-local",value:u.startsAt,onChange:v=>d({...u,startsAt:v.target.value}),required:!0}),i.jsx(B,{label:"End Date & Time",type:"datetime-local",value:u.endsAt,onChange:v=>d({...u,endsAt:v.target.value}),required:!0})]}),i.jsx(B,{label:"Maximum Uses",type:"number",min:"1",value:u.maxUses,onChange:v=>d({...u,maxUses:parseInt(v.target.value)}),required:!0}),i.jsx(B,{label:"Purpose (Optional)",value:u.purpose,onChange:v=>d({...u,purpose:v.target.value}),placeholder:"Delivery, Guest visit, etc."}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),i.jsx("textarea",{value:u.notes,onChange:v=>d({...u,notes:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Additional notes..."})]}),i.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:i.jsx("p",{className:"text-sm text-blue-800",children:"A unique access code will be generated automatically when you create this pass."})}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx(R,{type:"submit",className:"flex-1",isLoading:a,children:"Create Pass"}),i.jsx(R,{type:"button",variant:"secondary",onClick:r,children:"Cancel"})]})]})]})})}function xx({propertyId:t,onBack:e}){const[r,n]=N.useState(null),[s,a]=N.useState("overview"),[o,l]=N.useState(!0),[c,u]=N.useState(!1),[d,h]=N.useState(!1),[p,v]=N.useState(!1),[b,f]=N.useState([]),[j,m]=N.useState([]),[y,g]=N.useState([]);N.useEffect(()=>{w()},[t]);const w=async()=>{try{l(!0);const[x,C,A,S]=await Promise.all([P.from("properties").select("*").eq("id",t).single(),P.from("work_orders").select("*").eq("property_id",t).order("created_at",{ascending:!1}),P.from("orders").select("*").eq("property_id",t).order("created_at",{ascending:!1}),P.from("units").select("*").eq("property_id",t).order("unit_number")]);x.data&&n(x.data),C.data&&f(C.data),A.data&&m(A.data),S.data&&g(S.data)}catch(x){console.error("Error loading property:",x)}finally{l(!1)}};if(o)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!r)return i.jsxs("div",{className:"text-center py-12",children:[i.jsx("p",{className:"text-gray-600",children:"Property not found"}),i.jsx(R,{onClick:e,className:"mt-4",children:"Go Back"})]});const k=[{id:"overview",label:"Overview",icon:Kh},{id:"work-orders",label:"Work Orders",icon:Xn},{id:"gas",label:"Gas Orders",icon:nt},{id:"units",label:"Units",icon:Ii},{id:"visitor-passes",label:"Visitor Passes",icon:iu},{id:"leases",label:"Leases",icon:$e}],_=x=>{const C={new:"info",in_progress:"warning",completed:"success",cancelled:"danger",pending:"info",confirmed:"success",delivered:"success"};return i.jsx(oe,{variant:C[x]||"default",children:x.replace("_"," ")})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(R,{variant:"secondary",onClick:e,children:[i.jsx(Qg,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.name}),i.jsx("p",{className:"text-gray-600",children:r.address})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(R,{onClick:()=>u(!0),children:[i.jsx(Xn,{className:"h-4 w-4 mr-2"}),"New Work Order"]}),i.jsxs(R,{onClick:()=>h(!0),children:[i.jsx(nt,{className:"h-4 w-4 mr-2"}),"Order Gas"]}),i.jsxs(R,{variant:"secondary",onClick:()=>v(!0),children:[i.jsx(iu,{className:"h-4 w-4 mr-2"}),"Visitor Pass"]})]})]}),i.jsx("div",{className:"border-b border-gray-200",children:i.jsx("nav",{className:"flex space-x-8",children:k.map(x=>{const C=x.icon;return i.jsxs("button",{onClick:()=>a(x.id),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${s===x.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(C,{className:"h-5 w-5"}),x.label]},x.id)})})}),i.jsxs("div",{children:[s==="overview"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(ee,{children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Units"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:y.length})]})}),i.jsx(ee,{children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Open Work Orders"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:b.filter(x=>!["completed","closed","cancelled"].includes(x.status)).length})]})}),i.jsx(ee,{children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Gas Orders (30d)"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:j.length})]})})]}),s==="work-orders"&&i.jsx("div",{className:"space-y-4",children:b.length===0?i.jsx(ee,{children:i.jsxs("div",{className:"p-8 text-center",children:[i.jsx("p",{className:"text-gray-500",children:"No work orders yet"}),i.jsxs(R,{onClick:()=>u(!0),className:"mt-4",children:[i.jsx(fe,{className:"h-4 w-4 mr-2"}),"Create Work Order"]})]})}):b.map(x=>i.jsx(ee,{children:i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-medium text-gray-900",children:x.title}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.description}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx(oe,{variant:x.priority==="critical"?"danger":x.priority==="high"?"warning":"default",children:x.priority}),i.jsx(oe,{variant:"default",children:x.category})]})]}),i.jsx("div",{children:_(x.status)})]})})},x.id))}),s==="gas"&&i.jsx("div",{className:"space-y-4",children:j.length===0?i.jsx(ee,{children:i.jsxs("div",{className:"p-8 text-center",children:[i.jsx("p",{className:"text-gray-500",children:"No gas orders yet"}),i.jsxs(R,{onClick:()=>h(!0),className:"mt-4",children:[i.jsx(fe,{className:"h-4 w-4 mr-2"}),"Order Gas"]})]})}):j.map(x=>i.jsx(ee,{children:i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"font-medium text-gray-900",children:["Order #",x.id.slice(0,8)]}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Total: $",x.total.toFixed(2)]})]}),i.jsx("div",{children:_(x.status)})]})})},x.id))}),s==="units"&&i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(x=>i.jsx(ee,{children:i.jsxs("div",{className:"p-4",children:[i.jsxs("h3",{className:"font-medium text-gray-900",children:["Unit ",x.unit_number]}),i.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600",children:[x.bedrooms&&i.jsxs("p",{children:[x.bedrooms," bed  ",x.bathrooms," bath"]}),x.sqft&&i.jsxs("p",{children:[x.sqft," sqft"]}),i.jsx(oe,{variant:x.status==="occupied"?"success":"default",children:x.status})]})]})},x.id))}),s==="visitor-passes"&&i.jsx(ee,{children:i.jsxs("div",{className:"p-8 text-center",children:[i.jsx("p",{className:"text-gray-500 mb-4",children:"Generate visitor passes for guests"}),i.jsxs(R,{onClick:()=>v(!0),children:[i.jsx(fe,{className:"h-4 w-4 mr-2"}),"Create Visitor Pass"]})]})}),s==="leases"&&i.jsx(ee,{children:i.jsx("div",{className:"p-8 text-center",children:i.jsx("p",{className:"text-gray-500",children:"Lease management coming soon"})})})]}),c&&i.jsx(mx,{propertyId:t,units:y,onClose:()=>u(!1),onSuccess:()=>{u(!1),w()}}),d&&i.jsx(px,{propertyId:t,units:y,onClose:()=>h(!1),onSuccess:()=>{h(!1),w()}}),p&&i.jsx(gx,{propertyId:t,units:y,onClose:()=>v(!1),onSuccess:()=>{v(!1)}})]})}function yx(){const{currentOrg:t}=at(),{user:e}=ce(),[r,n]=N.useState([]),[s,a]=N.useState([]),[o,l]=N.useState(!0),[c,u]=N.useState(!1),[d,h]=N.useState({title:"",description:"",category:"other",priority:"normal",property_id:""}),[p,v]=N.useState(!1),[b,f]=N.useState("all");N.useEffect(()=>{t&&j()},[t]);const j=async()=>{if(t)try{const[x,C]=await Promise.all([P.from("work_orders").select("*").eq("org_id",t.id).order("created_at",{ascending:!1}),P.from("properties").select("*").eq("org_id",t.id)]);if(x.error)throw x.error;if(C.error)throw C.error;n(x.data||[]),a(C.data||[])}catch(x){console.error("Error loading data:",x)}finally{l(!1)}},m=x=>{const C=new Date,A={critical:4,high:24,normal:72,low:168};return C.setHours(C.getHours()+(A[x]||72)),C},y=async x=>{if(x.preventDefault(),!(!t||!e)){v(!0);try{const{error:C}=await P.from("work_orders").insert({org_id:t.id,property_id:d.property_id,created_by:e.id,title:d.title,description:d.description,category:d.category,priority:d.priority,status:"new",sla_due_at:m(d.priority).toISOString()});if(C)throw C;u(!1),h({title:"",description:"",category:"other",priority:"normal",property_id:""}),await j()}catch(C){console.error("Error creating work order:",C),alert("Failed to create work order")}finally{v(!1)}}},g=x=>{const C={new:"info",triaged:"info",assigned:"info",in_progress:"warning",awaiting_parts:"warning",on_hold:"warning",completed:"success",closed:"default",cancelled:"danger"};return i.jsx(oe,{variant:C[x]||"default",children:x.replace("_"," ")})},w=x=>{const C={critical:"danger",high:"warning",normal:"info",low:"default"};return i.jsx(oe,{variant:C[x]||"default",children:x})},k=x=>!x.sla_due_at||["completed","closed","cancelled"].includes(x.status)?!1:new Date(x.sla_due_at)<new Date,_=b==="all"?r:r.filter(x=>x.status===b);return o?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Work Orders"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Manage maintenance requests and tasks"})]}),i.jsxs(R,{onClick:()=>u(!0),children:[i.jsx(fe,{className:"h-4 w-4 mr-2"}),"Create Work Order"]})]}),i.jsx(ee,{children:i.jsx(wt,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[i.jsx(Cl,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter by status:"}),i.jsx("div",{className:"flex space-x-2",children:["all","new","in_progress","completed"].map(x=>i.jsx("button",{onClick:()=>f(x),className:`px-3 py-1 rounded-lg text-sm ${b===x?"bg-blue-100 text-blue-700 font-medium":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:x==="all"?"All":x.replace("_"," ")},x))})]})})}),_.length===0?i.jsx(ee,{children:i.jsxs(wt,{className:"py-12 text-center",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No work orders found"}),i.jsx("p",{className:"text-gray-600 mb-4",children:b==="all"?"Create your first work order to get started":"No work orders with this status"}),b==="all"&&i.jsxs(R,{onClick:()=>u(!0),children:[i.jsx(fe,{className:"h-4 w-4 mr-2"}),"Create Work Order"]})]})}):i.jsx("div",{className:"space-y-4",children:_.map(x=>{const C=s.find(S=>S.id===x.property_id),A=k(x);return i.jsx(ee,{className:`hover:shadow-md transition-shadow ${A?"border-red-300 border-2":""}`,children:i.jsx(wt,{className:"py-4",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:x.title}),w(x.priority),g(x.status),A&&i.jsx(oe,{variant:"danger",children:"OVERDUE"})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:x.description}),i.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[i.jsxs("span",{children:[i.jsx("span",{className:"font-medium",children:"Category:"})," ",x.category]}),C&&i.jsxs("span",{children:[i.jsx("span",{className:"font-medium",children:"Property:"})," ",C.name]}),x.sla_due_at&&i.jsxs("span",{children:[i.jsx("span",{className:"font-medium",children:"Due:"})," ",new Date(x.sla_due_at).toLocaleString()]})]})]}),i.jsx("div",{className:"ml-4",children:x.cost>0&&i.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",x.cost.toFixed(2)]})})]})})},x.id)})}),i.jsx(it,{isOpen:c,onClose:()=>u(!1),title:"Create Work Order",size:"lg",children:i.jsxs("form",{onSubmit:y,className:"space-y-4",children:[i.jsx(B,{label:"Title",value:d.title,onChange:x=>h({...d,title:x.target.value}),placeholder:"Leaking faucet in unit 301",required:!0}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("textarea",{value:d.description,onChange:x=>h({...d,description:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Describe the issue in detail...",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property"}),i.jsxs("select",{value:d.property_id,onChange:x=>h({...d,property_id:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[i.jsx("option",{value:"",children:"Select a property"}),s.map(x=>i.jsx("option",{value:x.id,children:x.name},x.id))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),i.jsxs("select",{value:d.category,onChange:x=>h({...d,category:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[i.jsx("option",{value:"plumbing",children:"Plumbing"}),i.jsx("option",{value:"electrical",children:"Electrical"}),i.jsx("option",{value:"hvac",children:"HVAC"}),i.jsx("option",{value:"painting",children:"Painting"}),i.jsx("option",{value:"carpentry",children:"Carpentry"}),i.jsx("option",{value:"appliance",children:"Appliance"}),i.jsx("option",{value:"pest",children:"Pest Control"}),i.jsx("option",{value:"landscaping",children:"Landscaping"}),i.jsx("option",{value:"other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),i.jsxs("select",{value:d.priority,onChange:x=>h({...d,priority:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[i.jsx("option",{value:"low",children:"Low (7 days)"}),i.jsx("option",{value:"normal",children:"Normal (3 days)"}),i.jsx("option",{value:"high",children:"High (24 hours)"}),i.jsx("option",{value:"critical",children:"Critical (4 hours)"})]})]})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx(R,{type:"submit",isLoading:p,className:"flex-1",children:"Create Work Order"}),i.jsx(R,{type:"button",variant:"secondary",onClick:()=>u(!1),className:"flex-1",children:"Cancel"})]})]})})]})}function vx(){const{currentOrg:t,orgMember:e}=at(),{user:r}=ce(),[n,s]=N.useState([]),[a,o]=N.useState([]),[l,c]=N.useState(!0),[u,d]=N.useState(!1),[h,p]=N.useState(!1),[v,b]=N.useState(""),[f,j]=N.useState({property_id:"",purpose:"",notes:"",starts_at:"",ends_at:"",max_uses:1}),[m,y]=N.useState(!1);N.useEffect(()=>{t&&g()},[t]);const g=async()=>{if(t)try{const[S,I]=await Promise.all([P.from("visitor_passes").select("*").in("property_id",await w()).order("created_at",{ascending:!1}),P.from("properties").select("*").eq("org_id",t.id)]);if(S.error)throw S.error;if(I.error)throw I.error;s(S.data||[]),o(I.data||[])}catch(S){console.error("Error loading data:",S)}finally{c(!1)}},w=async()=>{if(!t)return[];const{data:S}=await P.from("properties").select("id").eq("org_id",t.id);return(S==null?void 0:S.map(I=>I.id))||[]},k=()=>Math.floor(1e3+Math.random()*9e3).toString(),_=async S=>{if(S.preventDefault(),!!r){y(!0);try{const I=k(),{error:re}=await P.from("visitor_passes").insert({...f,code:I,created_by:r.id,status:"active"});if(re)throw re;d(!1),j({property_id:"",purpose:"",notes:"",starts_at:"",ends_at:"",max_uses:1}),await g()}catch(I){console.error("Error creating pass:",I),alert("Failed to create visitor pass")}finally{y(!1)}}},x=async()=>{if(!(!v||!r))try{const{data:S,error:I}=await P.from("visitor_passes").select("*").eq("code",v).maybeSingle();if(I)throw I;let re="invalid",St=!1;if(S){const sn=new Date,Mi=new Date(S.starts_at),an=new Date(S.ends_at);S.status==="revoked"?re="invalid":sn<Mi||sn>an?re="outside_time_window":S.used_count>=S.max_uses?re="max_uses_exceeded":(re="success",St=!0),await P.from("visitor_events").insert({visitor_pass_id:S.id,validated_by:r.id,result:re}),St&&await P.from("visitor_passes").update({used_count:S.used_count+1,status:S.used_count+1>=S.max_uses?"used":"active"}).eq("id",S.id)}alert(re==="success"?"Access granted!":`Access denied: ${re.replace("_"," ")}`),b(""),p(!1),await g()}catch(S){console.error("Error validating pass:",S),alert("Validation failed")}},C=S=>{const I=new Date,re=new Date(S.ends_at);return S.status==="revoked"?i.jsx(oe,{variant:"danger",children:"Revoked"}):S.status==="used"?i.jsx(oe,{variant:"default",children:"Used"}):I>re?i.jsx(oe,{variant:"warning",children:"Expired"}):S.used_count>=S.max_uses?i.jsx(oe,{variant:"default",children:"Max Uses Reached"}):i.jsx(oe,{variant:"success",children:"Active"})};if(l)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});const A=(e==null?void 0:e.role)==="security";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Visitor Passes"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Manage visitor access codes"})]}),i.jsxs("div",{className:"flex space-x-3",children:[A&&i.jsxs(R,{variant:"secondary",onClick:()=>p(!0),children:[i.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Validate Code"]}),!A&&i.jsxs(R,{onClick:()=>d(!0),children:[i.jsx(fe,{className:"h-4 w-4 mr-2"}),"Generate Pass"]})]})]}),n.length===0?i.jsx(ee,{children:i.jsxs(wt,{className:"py-12 text-center",children:[i.jsx(Qe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No visitor passes yet"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Generate passes for your visitors"}),!A&&i.jsxs(R,{onClick:()=>d(!0),children:[i.jsx(fe,{className:"h-4 w-4 mr-2"}),"Generate Pass"]})]})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(S=>{const I=a.find(re=>re.id===S.property_id);return i.jsx(ee,{children:i.jsxs(wt,{className:"pt-6",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:S.code}),C(S)]}),I&&i.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[i.jsx("span",{className:"font-medium",children:"Property:"})," ",I.name]}),S.purpose&&i.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[i.jsx("span",{className:"font-medium",children:"Purpose:"})," ",S.purpose]}),i.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-4 pt-4 border-t border-gray-200",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Valid from:"})," ",new Date(S.starts_at).toLocaleString()]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Valid until:"})," ",new Date(S.ends_at).toLocaleString()]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Uses:"})," ",S.used_count," / ",S.max_uses]})]})]})},S.id)})}),i.jsx(it,{isOpen:u,onClose:()=>d(!1),title:"Generate Visitor Pass",children:i.jsxs("form",{onSubmit:_,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property"}),i.jsxs("select",{value:f.property_id,onChange:S=>j({...f,property_id:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[i.jsx("option",{value:"",children:"Select a property"}),a.map(S=>i.jsx("option",{value:S.id,children:S.name},S.id))]})]}),i.jsx(B,{label:"Purpose",value:f.purpose,onChange:S=>j({...f,purpose:S.target.value}),placeholder:"Delivery, guest visit, etc."}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),i.jsx("textarea",{value:f.notes,onChange:S=>j({...f,notes:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2,placeholder:"Additional information..."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(B,{type:"datetime-local",label:"Starts At",value:f.starts_at,onChange:S=>j({...f,starts_at:S.target.value}),required:!0}),i.jsx(B,{type:"datetime-local",label:"Ends At",value:f.ends_at,onChange:S=>j({...f,ends_at:S.target.value}),required:!0})]}),i.jsx(B,{type:"number",label:"Max Uses",value:f.max_uses,onChange:S=>j({...f,max_uses:parseInt(S.target.value)||1}),min:"1",required:!0}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx(R,{type:"submit",isLoading:m,className:"flex-1",children:"Generate Pass"}),i.jsx(R,{type:"button",variant:"secondary",onClick:()=>d(!1),className:"flex-1",children:"Cancel"})]})]})}),i.jsx(it,{isOpen:h,onClose:()=>p(!1),title:"Validate Visitor Code",size:"sm",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx(B,{label:"Enter Code",value:v,onChange:S=>b(S.target.value),placeholder:"4-digit code",maxLength:4,className:"text-center text-2xl"}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsxs(R,{onClick:x,className:"flex-1",children:[i.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Validate"]}),i.jsx(R,{variant:"secondary",onClick:()=>{b(""),p(!1)},className:"flex-1",children:"Cancel"})]})]})})]})}function wx(){const{currentOrg:t}=at(),{user:e}=ce(),[r,n]=N.useState([]),[s,a]=N.useState([]),[o,l]=N.useState([]),[c,u]=N.useState([]),[d,h]=N.useState(!0),[p,v]=N.useState("");N.useEffect(()=>{b()},[t]);const b=async()=>{if(!(!t||!e))try{const[w,k,_]=await Promise.all([P.from("vendor_products").select(`
            *,
            product:products(*),
            vendor:vendors(*)
          `).eq("available",!0).gt("stock_quantity",0),P.from("orders").select("*").eq("org_id",t.id).eq("user_id",e.id).order("created_at",{ascending:!1}),P.from("properties").select("*").eq("org_id",t.id)]);if(w.error)throw w.error;if(k.error)throw k.error;if(_.error)throw _.error;n(w.data||[]),a(k.data||[]),l(_.data||[])}catch(w){console.error("Error loading data:",w)}finally{h(!1)}},f=w=>{u(k=>{const _=k.find(x=>x.vendorProduct.id===w.id);return _?_.quantity>=w.stock_quantity?k:k.map(x=>x.vendorProduct.id===w.id?{...x,quantity:x.quantity+1}:x):[...k,{vendorProduct:w,quantity:1}]})},j=w=>{u(k=>{const _=k.find(x=>x.vendorProduct.id===w);return _&&_.quantity>1?k.map(x=>x.vendorProduct.id===w?{...x,quantity:x.quantity-1}:x):k.filter(x=>x.vendorProduct.id!==w)})},m=()=>c.reduce((w,k)=>w+k.vendorProduct.price*k.quantity,0),y=async()=>{if(!t||!e||!p){alert("Please select a delivery property");return}if(c.length===0){alert("Cart is empty");return}try{const w=c.map(x=>({vendor_product_id:x.vendorProduct.id,product_id:x.vendorProduct.product_id,name:x.vendorProduct.product.name,quantity:x.quantity,price:x.vendorProduct.price,vendor:x.vendorProduct.vendor.company_name})),k=m(),{error:_}=await P.from("orders").insert({org_id:t.id,property_id:p,user_id:e.id,total:k,status:"pending",items:w});if(_)throw _;alert("Order placed successfully!"),u([]),v(""),await b()}catch(w){console.error("Error placing order:",w),alert("Failed to place order")}},g=w=>({pending:"bg-amber-100 text-amber-800",confirmed:"bg-blue-100 text-blue-800",out_for_delivery:"bg-violet-100 text-violet-800",delivered:"bg-emerald-100 text-emerald-800",cancelled:"bg-rose-100 text-rose-800"})[w]||"bg-gray-100 text-gray-800";return d?i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsx("div",{className:"relative",children:i.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2 tracking-tight",children:"Gas Store"}),i.jsx("p",{className:"text-lg text-gray-600",children:"Order cooking gas cylinders from verified vendors"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:i.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center",children:[i.jsx(au,{className:"h-5 w-5 mr-2"}),"Available Products"]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(w=>i.jsxs("div",{className:"group bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-xl p-5 hover:shadow-lg hover:scale-[1.02] transition-all duration-200",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-gray-900 text-lg mb-1",children:w.product.name}),w.product.size&&i.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:w.product.size})]}),i.jsx(nt,{className:"h-5 w-5 text-gray-400"})]}),w.product.description&&i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:w.product.description}),i.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-3 space-y-1",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"text-gray-600 flex items-center",children:[i.jsx(au,{className:"h-3 w-3 mr-1"}),"Vendor"]}),i.jsx("span",{className:"font-medium text-gray-900",children:w.vendor.company_name})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"text-gray-600 flex items-center",children:[i.jsx(Qe,{className:"h-3 w-3 mr-1"}),"Delivery"]}),i.jsxs("span",{className:"font-medium text-gray-900",children:[w.delivery_time_hours,"h"]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"text-gray-600 flex items-center",children:[i.jsx(nt,{className:"h-3 w-3 mr-1"}),"In Stock"]}),i.jsx("span",{className:"font-medium text-gray-900",children:w.stock_quantity})]})]}),i.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[i.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["$",w.price.toFixed(2)]}),i.jsxs("button",{onClick:()=>f(w),className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-medium hover:from-blue-700 hover:to-blue-800 transition-all duration-200 flex items-center shadow-sm hover:shadow-md",children:[i.jsx(fe,{className:"h-4 w-4 mr-1"}),"Add"]})]})]},w.id))}),r.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(nt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg",children:"No products available"}),i.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Check back later for new inventory"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[i.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 px-6 py-4",children:i.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center",children:[i.jsx(Pl,{className:"h-5 w-5 mr-2"}),"Recent Orders"]})}),i.jsx("div",{className:"p-6",children:s.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Rn,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg",children:"No orders yet"}),i.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Your order history will appear here"})]}):i.jsx("div",{className:"space-y-3",children:s.slice(0,5).map(w=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-xl hover:shadow-md transition-all duration-200",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"font-semibold text-gray-900",children:["Order #",w.id.slice(0,8)]}),i.jsx("p",{className:"text-sm text-gray-600",children:new Date(w.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),i.jsxs("div",{className:"text-right ml-4",children:[i.jsxs("p",{className:"font-bold text-gray-900 text-lg",children:["$",w.total.toFixed(2)]}),i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${g(w.status)}`,children:w.status.replace("_"," ")})]})]},w.id))})})]})]}),i.jsx("div",{children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden sticky top-24",children:[i.jsx("div",{className:"bg-gradient-to-r from-violet-600 to-violet-700 px-6 py-4",children:i.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center",children:[i.jsx(Rn,{className:"h-5 w-5 mr-2"}),"Your Cart"]})}),i.jsx("div",{className:"p-6",children:c.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Rn,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"Cart is empty"}),i.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Add items to get started"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-4 mb-6",children:c.map(w=>i.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[i.jsx("div",{className:"flex items-start justify-between mb-3",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-900",children:w.vendorProduct.product.name}),i.jsx("p",{className:"text-xs text-gray-600 mt-1",children:w.vendorProduct.vendor.company_name}),i.jsxs("p",{className:"text-sm font-medium text-gray-700 mt-1",children:["$",w.vendorProduct.price.toFixed(2)," each"]})]})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3 bg-white border border-gray-300 rounded-lg px-2 py-1",children:[i.jsx("button",{onClick:()=>j(w.vendorProduct.id),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:i.jsx(Qh,{className:"h-4 w-4 text-gray-600"})}),i.jsx("span",{className:"font-semibold text-gray-900 w-8 text-center",children:w.quantity}),i.jsx("button",{onClick:()=>f(w.vendorProduct),className:"p-1 hover:bg-gray-100 rounded transition-colors",disabled:w.quantity>=w.vendorProduct.stock_quantity,children:i.jsx(fe,{className:"h-4 w-4 text-gray-600"})})]}),i.jsxs("span",{className:"font-bold text-gray-900",children:["$",(w.vendorProduct.price*w.quantity).toFixed(2)]})]})]},w.vendorProduct.id))}),i.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-violet-50 rounded-xl p-4 mb-6",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"Total:"}),i.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["$",m().toFixed(2)]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Delivery Property"}),i.jsxs("select",{value:p,onChange:w=>v(w.target.value),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[i.jsx("option",{value:"",children:"Select property"}),o.map(w=>i.jsx("option",{value:w.id,children:w.name},w.id))]})]}),i.jsx("button",{onClick:y,disabled:!p,className:"w-full py-3 px-6 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-violet-700 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:"Place Order"})]})})]})})]})]})})}function bx(){const{currentOrg:t,orgMember:e}=at(),{user:r}=ce(),[n,s]=N.useState([]),[a,o]=N.useState(!0),[l,c]=N.useState(!1),[u,d]=N.useState(null),[h,p]=N.useState({company_name:"",trades:"",service_radius_km:50}),[v,b]=N.useState(!1);N.useEffect(()=>{t&&f()},[t]);const f=async()=>{if(t)try{const{data:g,error:w}=await P.from("vendors").select(`
          *,
          user:users(name, email, phone)
        `).or(`org_id.eq.${t.id},org_id.is.null`).order("created_at",{ascending:!1});if(w)throw w;s(g||[])}catch(g){console.error("Error loading vendors:",g)}finally{o(!1)}},j=async g=>{if(g.preventDefault(),!(!r||!t)){b(!0);try{const w=h.trades.split(",").map(_=>_.trim()).filter(_=>_.length>0),{error:k}=await P.from("vendors").insert({user_id:r.id,org_id:t.id,company_name:h.company_name,trades:w,service_radius_km:h.service_radius_km,verified:!1,rating:0,total_jobs:0});if(k)throw k;c(!1),p({company_name:"",trades:"",service_radius_km:50}),await f()}catch(w){console.error("Error creating vendor:",w),alert("Failed to create vendor profile")}finally{b(!1)}}},m=async(g,w)=>{try{const{error:k}=await P.from("vendors").update({verified:w}).eq("id",g);if(k)throw k;await f()}catch(k){console.error("Error updating vendor:",k),alert("Failed to update vendor verification")}};if(a)return i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})});const y=(e==null?void 0:e.role)==="owner"||(e==null?void 0:e.role)==="staff";return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100",children:[i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2 tracking-tight",children:"Vendors"}),i.jsx("p",{className:"text-lg text-gray-600",children:"Manage service providers and contractors"})]}),i.jsxs(R,{onClick:()=>c(!0),children:[i.jsx(fe,{className:"h-4 w-4 mr-2"}),"Add Vendor"]})]}),n.length===0?i.jsx(ee,{children:i.jsxs(wt,{className:"py-12 text-center",children:[i.jsx(Ii,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No vendors yet"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Add vendors to help with property maintenance"}),i.jsxs(R,{onClick:()=>c(!0),children:[i.jsx(fe,{className:"h-4 w-4 mr-2"}),"Add Vendor"]})]})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(g=>i.jsx(ee,{className:"cursor-pointer hover:shadow-xl hover:scale-[1.02] transition-all duration-200",onClick:()=>d(g),children:i.jsxs(wt,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-gray-900 text-xl mb-1",children:g.company_name}),g.user&&i.jsx("p",{className:"text-sm text-gray-600",children:g.user.name})]}),g.verified?i.jsxs(oe,{variant:"success",className:"flex items-center",children:[i.jsx(Ae,{className:"h-3 w-3 mr-1"}),"Verified"]}):i.jsx(oe,{variant:"warning",children:"Unverified"})]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(qe,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"truncate",children:g.trades.join(", ")||"No trades listed"})]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(El,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[g.service_radius_km," km service radius"]})]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(Yh,{className:"h-4 w-4 mr-2 fill-yellow-400 text-yellow-400"}),i.jsxs("span",{children:[g.rating.toFixed(1)," (",g.total_jobs," jobs)"]})]})]}),g.user&&i.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-1",children:[i.jsx("p",{className:"text-xs text-gray-600",children:g.user.email}),g.user.phone&&i.jsx("p",{className:"text-xs text-gray-600",children:g.user.phone})]})]})},g.id))})]}),i.jsx(it,{isOpen:l,onClose:()=>c(!1),title:"Add Vendor",children:i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsx(B,{label:"Company Name",value:h.company_name,onChange:g=>p({...h,company_name:g.target.value}),placeholder:"ABC Plumbing Services",required:!0}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trades / Services"}),i.jsx(B,{value:h.trades,onChange:g=>p({...h,trades:g.target.value}),placeholder:"Plumbing, Electrical, HVAC (comma-separated)",required:!0}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter trades separated by commas"})]}),i.jsx(B,{type:"number",label:"Service Radius (km)",value:h.service_radius_km,onChange:g=>p({...h,service_radius_km:parseInt(g.target.value)||50}),min:"1",required:!0}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx(R,{type:"submit",isLoading:v,className:"flex-1",children:"Add Vendor"}),i.jsx(R,{type:"button",variant:"secondary",onClick:()=>c(!1),className:"flex-1",children:"Cancel"})]})]})}),i.jsx(it,{isOpen:!!u,onClose:()=>d(null),title:"Vendor Details",children:u&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:u.company_name}),u.verified?i.jsxs(oe,{variant:"success",className:"flex items-center w-fit",children:[i.jsx(Ae,{className:"h-3 w-3 mr-1"}),"Verified"]}):i.jsx(oe,{variant:"warning",children:"Unverified"})]}),u.user&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:"Contact Information"}),i.jsxs("p",{className:"text-sm text-gray-600",children:[i.jsx("span",{className:"font-medium",children:"Name:"})," ",u.user.name]}),i.jsxs("p",{className:"text-sm text-gray-600",children:[i.jsx("span",{className:"font-medium",children:"Email:"})," ",u.user.email]}),u.user.phone&&i.jsxs("p",{className:"text-sm text-gray-600",children:[i.jsx("span",{className:"font-medium",children:"Phone:"})," ",u.user.phone]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:"Service Details"}),i.jsxs("p",{className:"text-sm text-gray-600",children:[i.jsx("span",{className:"font-medium",children:"Trades:"})," ",u.trades.join(", ")]}),i.jsxs("p",{className:"text-sm text-gray-600",children:[i.jsx("span",{className:"font-medium",children:"Service Radius:"})," ",u.service_radius_km," km"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:"Performance"}),i.jsxs("p",{className:"text-sm text-gray-600",children:[i.jsx("span",{className:"font-medium",children:"Rating:"})," ",u.rating.toFixed(1)," / 5.0"]}),i.jsxs("p",{className:"text-sm text-gray-600",children:[i.jsx("span",{className:"font-medium",children:"Total Jobs:"})," ",u.total_jobs]})]}),y&&i.jsx("div",{className:"pt-4 border-t border-gray-200 flex space-x-3",children:u.verified?i.jsxs(R,{variant:"secondary",onClick:()=>{m(u.id,!1),d(null)},className:"flex-1",children:[i.jsx(mi,{className:"h-4 w-4 mr-2"}),"Unverify Vendor"]}):i.jsxs(R,{onClick:()=>{m(u.id,!0),d(null)},className:"flex-1",children:[i.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Verify Vendor"]})}),i.jsx(R,{variant:"secondary",onClick:()=>d(null),className:"w-full",children:"Close"})]})})]})}function jx(){const{user:t}=ce(),[e,r]=N.useState(null),[n,s]=N.useState([]),[a,o]=N.useState([]),[l,c]=N.useState(!0),[u,d]=N.useState(!1),[h,p]=N.useState(null),[v,b]=N.useState({product_id:"",price:0,stock_quantity:0,delivery_time_hours:24,available:!0,notes:""}),[f,j]=N.useState(!1);N.useEffect(()=>{t&&m()},[t]);const m=async()=>{if(t)try{const{data:_,error:x}=await P.from("vendors").select("*").eq("user_id",t.id).maybeSingle();if(x)throw x;if(r(_),_){const[C,A]=await Promise.all([P.from("products").select("*").eq("active",!0).eq("is_gas_cylinder",!0),P.from("vendor_products").select("*, product:products(*)").eq("vendor_id",_.id)]);if(C.error)throw C.error;if(A.error)throw A.error;s(C.data||[]),o(A.data||[])}}catch(_){console.error("Error loading data:",_)}finally{c(!1)}},y=async _=>{if(_.preventDefault(),!!e){j(!0);try{if(h){const{error:x}=await P.from("vendor_products").update({price:v.price,stock_quantity:v.stock_quantity,delivery_time_hours:v.delivery_time_hours,available:v.available,notes:v.notes,updated_at:new Date().toISOString()}).eq("id",h.id);if(x)throw x}else{const{error:x}=await P.from("vendor_products").insert({vendor_id:e.id,...v});if(x)throw x}d(!1),p(null),b({product_id:"",price:0,stock_quantity:0,delivery_time_hours:24,available:!0,notes:""}),await m()}catch(x){console.error("Error saving product:",x),alert("Failed to save product")}finally{j(!1)}}},g=_=>{p(_),b({product_id:_.product_id,price:_.price,stock_quantity:_.stock_quantity,delivery_time_hours:_.delivery_time_hours,available:_.available,notes:_.notes||""}),d(!0)},w=async _=>{if(confirm("Are you sure you want to remove this product from your inventory?"))try{const{error:x}=await P.from("vendor_products").delete().eq("id",_);if(x)throw x;await m()}catch(x){console.error("Error deleting product:",x),alert("Failed to delete product")}};if(l)return i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})});if(!e)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md text-center",children:[i.jsx(nt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Vendor Profile Required"}),i.jsx("p",{className:"text-gray-600",children:"You need to create a vendor profile first to manage your inventory."})]})});const k=n.filter(_=>!a.some(x=>x.product_id===_.id));return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100",children:[i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2 tracking-tight",children:"My Inventory"}),i.jsx("p",{className:"text-lg text-gray-600",children:"Manage your gas cylinder products"})]}),i.jsxs("button",{onClick:()=>{p(null),b({product_id:"",price:0,stock_quantity:0,delivery_time_hours:24,available:!0,notes:""}),d(!0)},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-violet-700 transition-all duration-200 flex items-center shadow-lg hover:shadow-xl",children:[i.jsx(fe,{className:"h-5 w-5 mr-2"}),"Add Product"]})]}),a.length===0?i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-12 text-center",children:[i.jsx(nt,{className:"h-20 w-20 text-gray-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No products yet"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Add products to start selling gas cylinders"}),i.jsxs("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-violet-700 transition-all duration-200 inline-flex items-center shadow-lg",children:[i.jsx(fe,{className:"h-5 w-5 mr-2"}),"Add Your First Product"]})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(_=>i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-all duration-200",children:[i.jsx("div",{className:`h-2 ${_.available?"bg-gradient-to-r from-emerald-500 to-emerald-600":"bg-gradient-to-r from-gray-400 to-gray-500"}`}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-gray-900 text-xl mb-1",children:_.product.name}),_.product.size&&i.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:_.product.size})]}),_.available&&_.stock_quantity>0?i.jsxs("span",{className:"flex items-center text-emerald-600 text-sm font-semibold",children:[i.jsx(Ae,{className:"h-4 w-4 mr-1"}),"Active"]}):i.jsx("span",{className:"text-gray-400 text-sm font-semibold",children:"Inactive"})]}),i.jsxs("div",{className:"space-y-3 mb-6",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Price"}),i.jsxs("span",{className:"font-bold text-gray-900",children:["$",_.price.toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Stock"}),i.jsxs("span",{className:`font-semibold ${_.stock_quantity>10?"text-emerald-600":_.stock_quantity>0?"text-amber-600":"text-rose-600"}`,children:[_.stock_quantity," units"]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Delivery Time"}),i.jsxs("span",{className:"font-semibold text-gray-900",children:[_.delivery_time_hours,"h"]})]})]}),_.notes&&i.jsx("p",{className:"text-sm text-gray-600 mb-4 p-3 bg-gray-50 rounded-lg",children:_.notes}),i.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-gray-200",children:[i.jsxs("button",{onClick:()=>g(_),className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-50 to-violet-50 text-blue-700 rounded-lg font-medium hover:from-blue-100 hover:to-violet-100 transition-all duration-200 flex items-center justify-center",children:[i.jsx(tx,{className:"h-4 w-4 mr-1"}),"Edit"]}),i.jsxs("button",{onClick:()=>w(_.id),className:"flex-1 px-4 py-2 bg-rose-50 text-rose-700 rounded-lg font-medium hover:bg-rose-100 transition-all duration-200 flex items-center justify-center",children:[i.jsx(nx,{className:"h-4 w-4 mr-1"}),"Remove"]})]})]})]},_.id))})]}),u&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-violet-600 px-6 py-4",children:i.jsx("h2",{className:"text-2xl font-bold text-white",children:h?"Edit Product":"Add Product"})}),i.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Product"}),i.jsxs("select",{value:v.product_id,onChange:_=>b({...v,product_id:_.target.value}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,disabled:!!h,children:[i.jsx("option",{value:"",children:"Select a product"}),h?i.jsx("option",{value:h.product_id,children:h.product.name}):k.map(_=>i.jsxs("option",{value:_.id,children:[_.name," ",_.size?`(${_.size})`:""]},_.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Price ($)"}),i.jsx("input",{type:"number",step:"0.01",value:v.price,onChange:_=>b({...v,price:parseFloat(_.target.value)||0}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Stock Quantity"}),i.jsx("input",{type:"number",value:v.stock_quantity,onChange:_=>b({...v,stock_quantity:parseInt(_.target.value)||0}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Delivery Time (hours)"}),i.jsx("input",{type:"number",value:v.delivery_time_hours,onChange:_=>b({...v,delivery_time_hours:parseInt(_.target.value)||24}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,min:"1"})]}),i.jsx("div",{children:i.jsxs("label",{className:"flex items-center space-x-3",children:[i.jsx("input",{type:"checkbox",checked:v.available,onChange:_=>b({...v,available:_.target.checked}),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),i.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Available for purchase"})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes (optional)"}),i.jsx("textarea",{value:v.notes,onChange:_=>b({...v,notes:_.target.value}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",rows:3,placeholder:"Any additional information..."})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{type:"submit",disabled:f,className:"flex-1 py-3 px-6 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-violet-700 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-200 shadow-lg",children:f?"Saving...":h?"Update Product":"Add Product"}),i.jsx("button",{type:"button",onClick:()=>{d(!1),p(null)},className:"flex-1 py-3 px-6 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200 transition-all duration-200",children:"Cancel"})]})]})]})})]})}function _x(){const{user:t}=ce(),[e,r]=N.useState(null),[n,s]=N.useState({openJobs:0,awaitingApproval:0,scheduledToday:0,overdue:0,unpaidInvoices:0,avgRating:0,totalEarnings:0,activeQuotes:0}),[a,o]=N.useState([]),[l,c]=N.useState([]),[u,d]=N.useState(!0);N.useEffect(()=>{t&&h()},[t]);const h=async()=>{if(t)try{const{data:f,error:j}=await P.from("vendors").select("*").eq("user_id",t.id).maybeSingle();if(j)throw j;if(!f){d(!1);return}r(f);const[m,y,g,w]=await Promise.all([P.from("work_orders").select("*").eq("assigned_vendor_id",f.id).order("created_at",{ascending:!1}),P.from("invoices").select("*").eq("vendor_id",f.id),P.from("quotes").select("*").eq("vendor_id",f.id),P.from("vendor_notifications").select("*").eq("vendor_id",f.id).eq("read",!1).order("created_at",{ascending:!1}).limit(5)]);if(m.error)throw m.error;if(y.error)throw y.error;if(g.error)throw g.error;if(w.error)throw w.error;const k=m.data||[],_=y.data||[],x=g.data||[],C=new Date;C.setHours(0,0,0,0);const A=new Date(C);A.setDate(A.getDate()+1),s({openJobs:k.filter(S=>["assigned","in_progress"].includes(S.status)).length,awaitingApproval:k.filter(S=>S.status==="completed").length,scheduledToday:k.filter(S=>{if(!S.sla_due_at)return!1;const I=new Date(S.sla_due_at);return I>=C&&I<A}).length,overdue:k.filter(S=>!S.sla_due_at||S.status==="completed"||S.status==="closed"?!1:new Date(S.sla_due_at)<C).length,unpaidInvoices:_.filter(S=>["sent","overdue"].includes(S.status)).length,avgRating:f.rating,totalEarnings:_.filter(S=>S.status==="paid").reduce((S,I)=>S+I.total,0),activeQuotes:x.filter(S=>S.status==="submitted").length}),o(k.slice(0,5)),c(w.data||[])}catch(f){console.error("Error loading dashboard:",f)}finally{d(!1)}};if(u)return i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})});if(!e)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md text-center",children:[i.jsx(nt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Vendor Profile Required"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"You need to create a vendor profile to access the vendor dashboard."}),i.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-violet-700 transition-all duration-200 shadow-lg",children:"Create Vendor Profile"})]})});const p=[{title:"Open Jobs",value:n.openJobs,icon:qe,color:"from-blue-500 to-blue-600",bgColor:"from-blue-50 to-blue-100",textColor:"text-blue-700"},{title:"Awaiting Approval",value:n.awaitingApproval,icon:Qe,color:"from-amber-500 to-amber-600",bgColor:"from-amber-50 to-amber-100",textColor:"text-amber-700"},{title:"Scheduled Today",value:n.scheduledToday,icon:ru,color:"from-emerald-500 to-emerald-600",bgColor:"from-emerald-50 to-emerald-100",textColor:"text-emerald-700"},{title:"Overdue",value:n.overdue,icon:It,color:"from-rose-500 to-rose-600",bgColor:"from-rose-50 to-rose-100",textColor:"text-rose-700"},{title:"Unpaid Invoices",value:n.unpaidInvoices,icon:$e,color:"from-violet-500 to-violet-600",bgColor:"from-violet-50 to-violet-100",textColor:"text-violet-700"},{title:"Average Rating",value:n.avgRating.toFixed(1),icon:Yh,color:"from-yellow-500 to-yellow-600",bgColor:"from-yellow-50 to-yellow-100",textColor:"text-yellow-700",suffix:"/5.0"},{title:"Total Earnings",value:`$${n.totalEarnings.toLocaleString()}`,icon:Sl,color:"from-green-500 to-green-600",bgColor:"from-green-50 to-green-100",textColor:"text-green-700"},{title:"Active Quotes",value:n.activeQuotes,icon:Pl,color:"from-cyan-500 to-cyan-600",bgColor:"from-cyan-50 to-cyan-100",textColor:"text-cyan-700"}],v=f=>({assigned:"bg-blue-100 text-blue-800",in_progress:"bg-violet-100 text-violet-800",awaiting_parts:"bg-amber-100 text-amber-800",completed:"bg-emerald-100 text-emerald-800",on_hold:"bg-gray-100 text-gray-800"})[f]||"bg-gray-100 text-gray-800",b=f=>({critical:"text-rose-600",high:"text-orange-600",normal:"text-blue-600",low:"text-gray-600"})[f]||"text-gray-600";return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2 tracking-tight",children:"Vendor Dashboard"}),i.jsxs("p",{className:"text-lg text-gray-600",children:["Welcome back, ",e.company_name]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:p.map(f=>{const j=f.icon;return i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-all duration-200",children:[i.jsx("div",{className:`h-2 bg-gradient-to-r ${f.color}`}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${f.bgColor}`,children:i.jsx(j,{className:`h-6 w-6 ${f.textColor}`})})}),i.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:f.title}),i.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[f.value,f.suffix&&i.jsx("span",{className:"text-lg text-gray-600",children:f.suffix})]})]})]},f.title)})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-violet-600 px-6 py-4",children:i.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center",children:[i.jsx(qe,{className:"h-5 w-5 mr-2"}),"Recent Jobs"]})}),i.jsx("div",{className:"p-6",children:a.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(qe,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg",children:"No jobs yet"}),i.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Check the Jobs Board for new opportunities"})]}):i.jsx("div",{className:"space-y-3",children:a.map(f=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-xl hover:shadow-md transition-all duration-200 cursor-pointer",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx("h3",{className:"font-bold text-gray-900",children:f.title}),i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${v(f.status)}`,children:f.status.replace("_"," ")})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:f.category}),i.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[i.jsxs("span",{className:`flex items-center ${b(f.priority)}`,children:[i.jsx(It,{className:"h-3 w-3 mr-1"}),f.priority]}),f.sla_due_at&&i.jsxs("span",{className:"flex items-center",children:[i.jsx(Qe,{className:"h-3 w-3 mr-1"}),"Due ",new Date(f.sla_due_at).toLocaleDateString()]})]})]}),i.jsx(Ae,{className:"h-5 w-5 text-gray-400"})]},f.id))})})]}),i.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("button",{className:"px-6 py-4 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-violet-700 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center",children:[i.jsx(qe,{className:"h-5 w-5 mr-2"}),"Find Jobs"]}),i.jsxs("button",{className:"px-6 py-4 bg-white border-2 border-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-200 flex items-center justify-center",children:[i.jsx($e,{className:"h-5 w-5 mr-2"}),"My Quotes"]}),i.jsxs("button",{className:"px-6 py-4 bg-white border-2 border-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-200 flex items-center justify-center",children:[i.jsx(ru,{className:"h-5 w-5 mr-2"}),"Today's Schedule"]}),i.jsxs("button",{className:"px-6 py-4 bg-white border-2 border-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-200 flex items-center justify-center",children:[i.jsx(nt,{className:"h-5 w-5 mr-2"}),"Documents"]})]})]}),i.jsx("div",{children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[i.jsx("div",{className:"bg-gradient-to-r from-violet-600 to-pink-600 px-6 py-4",children:i.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center",children:[i.jsx(It,{className:"h-5 w-5 mr-2"}),"Notifications"]})}),i.jsx("div",{className:"p-6",children:l.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(It,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg",children:"All caught up!"}),i.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"No new notifications"})]}):i.jsx("div",{className:"space-y-3",children:l.map(f=>i.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-violet-50 border border-blue-200 rounded-xl hover:shadow-md transition-all duration-200 cursor-pointer",children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:f.title}),i.jsx("p",{className:"text-sm text-gray-600",children:f.message}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(f.created_at).toLocaleString()})]},f.id))})})]})})]})]})})}function Nx(){const{user:t}=ce(),[e,r]=N.useState(null),[n,s]=N.useState([]),[a,o]=N.useState([]),[l,c]=N.useState(!0),[u,d]=N.useState(null),[h,p]=N.useState(!1),[v,b]=N.useState(!1),[f,j]=N.useState({amount:0,notes:"",validUntil:""}),[m,y]=N.useState({category:"",priority:"",search:"",minPrice:"",maxPrice:"",maxDistance:""});N.useEffect(()=>{t&&g()},[t]),N.useEffect(()=>{w()},[n,m]);const g=async()=>{if(t)try{const{data:x,error:C}=await P.from("vendors").select("*").eq("user_id",t.id).maybeSingle();if(C)throw C;if(!x){c(!1);return}r(x);const{data:A,error:S}=await P.from("work_orders").select(`
          *,
          property:properties(*)
        `).in("status",["new","triaged"]).is("assigned_vendor_id",null).order("created_at",{ascending:!1});if(S)throw S;s(A||[])}catch(x){console.error("Error loading jobs:",x)}finally{c(!1)}},w=()=>{let x=[...n];if(m.category&&(x=x.filter(C=>C.category===m.category)),m.priority&&(x=x.filter(C=>C.priority===m.priority)),m.search){const C=m.search.toLowerCase();x=x.filter(A=>A.title.toLowerCase().includes(C)||A.description.toLowerCase().includes(C))}if(m.minPrice){const C=parseFloat(m.minPrice);x=x.filter(A=>A.cost>=C)}if(m.maxPrice){const C=parseFloat(m.maxPrice);x=x.filter(A=>A.cost<=C)}o(x)},k=async()=>{if(!(!e||!u))try{const{error:x}=await P.from("quotes").insert({work_order_id:u.id,vendor_id:e.id,amount:f.amount,notes:f.notes,valid_until:f.validUntil||null,status:"submitted"});if(x)throw x;alert("Quote submitted successfully!"),p(!1),d(null),j({amount:0,notes:"",validUntil:""}),await g()}catch(x){console.error("Error submitting quote:",x),alert("Failed to submit quote")}};if(l)return i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})});if(!e)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md text-center",children:[i.jsx(qe,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Vendor Profile Required"}),i.jsx("p",{className:"text-gray-600",children:"Create a vendor profile to access the jobs board."})]})});const _=x=>({critical:"bg-rose-100 text-rose-800 border-rose-300",high:"bg-orange-100 text-orange-800 border-orange-300",normal:"bg-blue-100 text-blue-800 border-blue-300",low:"bg-gray-100 text-gray-800 border-gray-300"})[x]||"bg-gray-100 text-gray-800 border-gray-300";return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100",children:[i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2 tracking-tight",children:"Jobs Board"}),i.jsx("p",{className:"text-lg text-gray-600",children:"Find new work opportunities"})]}),i.jsxs("button",{onClick:()=>b(!v),className:"px-6 py-3 bg-white border-2 border-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-200 flex items-center shadow-md",children:[i.jsx(Cl,{className:"h-5 w-5 mr-2"}),"Filters"]})]}),v&&i.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Category"}),i.jsxs("select",{value:m.category,onChange:x=>y({...m,category:x.target.value}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"All Categories"}),i.jsx("option",{value:"plumbing",children:"Plumbing"}),i.jsx("option",{value:"electrical",children:"Electrical"}),i.jsx("option",{value:"hvac",children:"HVAC"}),i.jsx("option",{value:"painting",children:"Painting"}),i.jsx("option",{value:"carpentry",children:"Carpentry"}),i.jsx("option",{value:"appliance",children:"Appliance"}),i.jsx("option",{value:"pest",children:"Pest Control"}),i.jsx("option",{value:"landscaping",children:"Landscaping"}),i.jsx("option",{value:"other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Priority"}),i.jsxs("select",{value:m.priority,onChange:x=>y({...m,priority:x.target.value}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"All Priorities"}),i.jsx("option",{value:"critical",children:"Critical"}),i.jsx("option",{value:"high",children:"High"}),i.jsx("option",{value:"normal",children:"Normal"}),i.jsx("option",{value:"low",children:"Low"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Search"}),i.jsxs("div",{className:"relative",children:[i.jsx(Gh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx("input",{type:"text",value:m.search,onChange:x=>y({...m,search:x.target.value}),placeholder:"Search jobs...",className:"w-full pl-10 pr-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Min Price"}),i.jsx("input",{type:"number",value:m.minPrice,onChange:x=>y({...m,minPrice:x.target.value}),placeholder:"$0",className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Max Price"}),i.jsx("input",{type:"number",value:m.maxPrice,onChange:x=>y({...m,maxPrice:x.target.value}),placeholder:"Any",className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500"})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{onClick:()=>y({category:"",priority:"",search:"",minPrice:"",maxPrice:"",maxDistance:""}),className:"w-full px-4 py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200 transition-all duration-200",children:"Clear Filters"})})]})}),i.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mb-4",children:i.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-200",children:i.jsxs("p",{className:"text-sm font-semibold text-gray-700",children:["Showing ",a.length," of ",n.length," jobs"]})})}),a.length===0?i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-12 text-center",children:[i.jsx(qe,{className:"h-20 w-20 text-gray-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No jobs found"}),i.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters or check back later"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(x=>i.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-xl hover:scale-[1.02] transition-all duration-200 cursor-pointer",onClick:()=>d(x),children:i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"flex items-start justify-between mb-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-gray-900 text-lg mb-2",children:x.title}),i.jsxs("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold border ${_(x.priority)}`,children:[x.priority," priority"]})]})}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:x.description}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(qe,{className:"h-4 w-4 mr-2 text-gray-400"}),i.jsx("span",{className:"font-medium",children:x.category})]}),x.property&&i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(El,{className:"h-4 w-4 mr-2 text-gray-400"}),i.jsx("span",{children:x.property.name})]}),x.sla_due_at&&i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(Qe,{className:"h-4 w-4 mr-2 text-gray-400"}),i.jsxs("span",{children:["Due ",new Date(x.sla_due_at).toLocaleDateString()]})]}),i.jsxs("div",{className:"flex items-center text-sm font-semibold text-emerald-600",children:[i.jsx(Sl,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:["Budget: $",x.cost.toLocaleString()]})]})]}),i.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-gray-200",children:[i.jsxs("button",{onClick:C=>{C.stopPropagation(),d(x),p(!0)},className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-lg font-medium hover:from-blue-700 hover:to-violet-700 transition-all duration-200 flex items-center justify-center",children:[i.jsx(su,{className:"h-4 w-4 mr-1"}),"Send Quote"]}),i.jsx("button",{onClick:C=>{C.stopPropagation()},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200",children:i.jsx(ex,{className:"h-4 w-4"})})]})]})},x.id))})]}),i.jsx(it,{isOpen:!!u&&!h,onClose:()=>d(null),title:"Job Details",children:u&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:u.title}),i.jsxs("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold border ${_(u.priority)}`,children:[u.priority," priority"]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Description"}),i.jsx("p",{className:"text-gray-600",children:u.description})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Category"}),i.jsx("p",{className:"text-gray-600",children:u.category})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Budget"}),i.jsxs("p",{className:"text-emerald-600 font-bold",children:["$",u.cost.toLocaleString()]})]}),u.sla_due_at&&i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Due Date"}),i.jsx("p",{className:"text-gray-600",children:new Date(u.sla_due_at).toLocaleDateString()})]}),u.property&&i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Location"}),i.jsx("p",{className:"text-gray-600",children:u.property.name})]})]}),i.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[i.jsxs("button",{onClick:()=>{p(!0)},className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-violet-700 transition-all duration-200",children:[i.jsx(su,{className:"h-4 w-4 mr-2 inline"}),"Send Quote"]}),i.jsx("button",{onClick:()=>d(null),className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200 transition-all duration-200",children:"Close"})]})]})}),i.jsx(it,{isOpen:h,onClose:()=>{p(!1),j({amount:0,notes:"",validUntil:""})},title:"Submit Quote",children:i.jsxs("div",{className:"space-y-4",children:[u&&i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:u.title}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Budget: $",u.cost.toLocaleString()]})]}),i.jsx(B,{type:"number",label:"Quote Amount ($)",value:f.amount,onChange:x=>j({...f,amount:parseFloat(x.target.value)||0}),placeholder:"0.00",required:!0}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Valid Until (Optional)"}),i.jsx("input",{type:"date",value:f.validUntil,onChange:x=>j({...f,validUntil:x.target.value}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes"}),i.jsx("textarea",{value:f.notes,onChange:x=>j({...f,notes:x.target.value}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500",rows:4,placeholder:"Add any details about your quote, timeline, or requirements..."})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{onClick:k,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-violet-700 transition-all duration-200",children:"Submit Quote"}),i.jsx("button",{onClick:()=>{p(!1),j({amount:0,notes:"",validUntil:""})},className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200 transition-all duration-200",children:"Cancel"})]})]})})]})}function kx(){const{user:t}=ce(),[e,r]=N.useState(null),[n,s]=N.useState([]),[a,o]=N.useState(!0),[l,c]=N.useState("all");N.useEffect(()=>{t&&u()},[t]);const u=async()=>{if(t)try{const{data:b,error:f}=await P.from("vendors").select("*").eq("user_id",t.id).maybeSingle();if(f)throw f;if(!b){o(!1);return}r(b);const{data:j,error:m}=await P.from("work_orders").select(`
          *,
          property:properties(*)
        `).eq("assigned_vendor_id",b.id).order("created_at",{ascending:!1});if(m)throw m;s(j||[])}catch(b){console.error("Error loading jobs:",b)}finally{o(!1)}};if(a)return i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})});if(!e)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md text-center",children:[i.jsx(qe,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Vendor Profile Required"}),i.jsx("p",{className:"text-gray-600",children:"Create a vendor profile to view your jobs."})]})});const d={all:"All Jobs",assigned:"Assigned",in_progress:"In Progress",awaiting_parts:"Awaiting Parts",on_hold:"On Hold",completed:"Completed",closed:"Closed"},h=l==="all"?n:n.filter(b=>b.status===l),p=b=>({assigned:"bg-blue-100 text-blue-800",in_progress:"bg-violet-100 text-violet-800",awaiting_parts:"bg-amber-100 text-amber-800",on_hold:"bg-gray-100 text-gray-800",completed:"bg-emerald-100 text-emerald-800",closed:"bg-slate-100 text-slate-800"})[b]||"bg-gray-100 text-gray-800",v=b=>({critical:"text-rose-600",high:"text-orange-600",normal:"text-blue-600",low:"text-gray-600"})[b]||"text-gray-600";return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2 tracking-tight",children:"My Jobs"}),i.jsx("p",{className:"text-lg text-gray-600",children:"Manage your assigned work orders"})]}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:Object.entries(d).map(([b,f])=>{const j=b==="all"?n.length:n.filter(m=>m.status===b).length;return i.jsxs("button",{onClick:()=>c(b),className:`px-4 py-2 rounded-xl font-semibold transition-all duration-200 ${l===b?"bg-gradient-to-r from-blue-600 to-violet-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200"}`,children:[f," (",j,")"]},b)})}),h.length===0?i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-12 text-center",children:[i.jsx(qe,{className:"h-20 w-20 text-gray-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No jobs found"}),i.jsx("p",{className:"text-gray-600",children:"No jobs match the selected filter"})]}):i.jsx("div",{className:"grid grid-cols-1 gap-4",children:h.map(b=>i.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-all duration-200",children:i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:b.title}),i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${p(b.status)}`,children:b.status.replace("_"," ")})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:b.description}),i.jsxs("div",{className:"flex items-center flex-wrap gap-4 text-sm",children:[i.jsxs("span",{className:"flex items-center text-gray-600",children:[i.jsx(qe,{className:"h-4 w-4 mr-1"}),b.category]}),i.jsxs("span",{className:`flex items-center font-semibold ${v(b.priority)}`,children:[i.jsx(It,{className:"h-4 w-4 mr-1"}),b.priority]}),b.sla_due_at&&i.jsxs("span",{className:"flex items-center text-gray-600",children:[i.jsx(Qe,{className:"h-4 w-4 mr-1"}),"Due ",new Date(b.sla_due_at).toLocaleDateString()]}),b.property&&i.jsx("span",{className:"text-gray-600",children:b.property.name})]})]}),i.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-violet-700 transition-all duration-200 shadow-lg",children:"View Details"})]})})},b.id))})]})})}function Sx(){const{user:t}=ce(),[e,r]=N.useState(null),[n,s]=N.useState([]),[a,o]=N.useState(!0),[l,c]=N.useState("all");N.useEffect(()=>{t&&u()},[t]);const u=async()=>{if(t)try{const{data:f}=await P.from("vendors").select("*").eq("user_id",t.id).maybeSingle();if(!f)return;r(f);const{data:j,error:m}=await P.from("quotes").select(`
          *,
          work_order:work_orders(*)
        `).eq("vendor_id",f.id).order("created_at",{ascending:!1});if(m)throw m;s(j||[])}catch(f){console.error("Error loading quotes:",f)}finally{o(!1)}};if(a)return i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})});if(!e)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md text-center",children:[i.jsx($e,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Vendor Profile Required"}),i.jsx("p",{className:"text-gray-600",children:"Create a vendor profile to manage quotes."})]})});const d={all:"All Quotes",submitted:"Pending Decision",accepted:"Won",rejected:"Lost",withdrawn:"Withdrawn",expired:"Expired"},h=l==="all"?n:n.filter(f=>f.status===l),p=f=>({submitted:"bg-amber-100 text-amber-800",accepted:"bg-emerald-100 text-emerald-800",rejected:"bg-rose-100 text-rose-800",withdrawn:"bg-gray-100 text-gray-800",expired:"bg-slate-100 text-slate-800"})[f]||"bg-gray-100 text-gray-800",v=f=>{switch(f){case"accepted":return i.jsx(Ae,{className:"h-5 w-5"});case"rejected":return i.jsx(mi,{className:"h-5 w-5"});case"submitted":return i.jsx(Qe,{className:"h-5 w-5"});default:return i.jsx($e,{className:"h-5 w-5"})}},b={total:n.length,submitted:n.filter(f=>f.status==="submitted").length,accepted:n.filter(f=>f.status==="accepted").length,rejected:n.filter(f=>f.status==="rejected").length,totalValue:n.filter(f=>f.status==="accepted").reduce((f,j)=>f+j.amount,0)};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2 tracking-tight",children:"My Quotes"}),i.jsx("p",{className:"text-lg text-gray-600",children:"Manage your quote submissions"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx($e,{className:"h-8 w-8 text-blue-600"})}),i.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Quotes"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:b.total})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx(Qe,{className:"h-8 w-8 text-amber-600"})}),i.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Pending"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:b.submitted})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx(Ae,{className:"h-8 w-8 text-emerald-600"})}),i.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Won"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:b.accepted})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx(Pl,{className:"h-8 w-8 text-green-600"})}),i.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Value"}),i.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",b.totalValue.toLocaleString()]})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:Object.entries(d).map(([f,j])=>{const m=f==="all"?n.length:n.filter(y=>y.status===f).length;return i.jsxs("button",{onClick:()=>c(f),className:`px-4 py-2 rounded-xl font-semibold transition-all duration-200 ${l===f?"bg-gradient-to-r from-blue-600 to-violet-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200"}`,children:[j," (",m,")"]},f)})}),h.length===0?i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-12 text-center",children:[i.jsx($e,{className:"h-20 w-20 text-gray-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No quotes found"}),i.jsx("p",{className:"text-gray-600",children:"No quotes match the selected filter"})]}):i.jsx("div",{className:"grid grid-cols-1 gap-4",children:h.map(f=>{var j,m;return i.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-all duration-200",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:((j=f.work_order)==null?void 0:j.title)||"Unknown Job"}),i.jsxs("span",{className:`flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-semibold ${p(f.status)}`,children:[v(f.status),i.jsx("span",{children:f.status})]})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:((m=f.work_order)==null?void 0:m.description)||"No description"}),f.notes&&i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",children:i.jsx("p",{className:"text-sm text-gray-700",children:f.notes})}),i.jsxs("div",{className:"flex items-center flex-wrap gap-4 text-sm text-gray-600",children:[i.jsxs("span",{children:["Submitted: ",new Date(f.submitted_at).toLocaleDateString()]}),f.valid_until&&i.jsxs("span",{children:["Valid Until: ",new Date(f.valid_until).toLocaleDateString()]})]})]}),i.jsxs("div",{className:"text-right ml-6",children:[i.jsxs("p",{className:"text-3xl font-bold text-emerald-600",children:["$",f.amount.toLocaleString()]}),i.jsx("p",{className:"text-sm text-gray-600",children:f.currency})]})]}),f.status==="submitted"&&i.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[i.jsx("button",{className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-all",children:"Edit Quote"}),i.jsx("button",{className:"flex-1 px-4 py-2 bg-rose-50 text-rose-700 rounded-lg font-medium hover:bg-rose-100 transition-all",children:"Withdraw"})]})]})},f.id)})})]})})}function Cx(){const{user:t}=ce(),[e,r]=N.useState(null),[n,s]=N.useState([]),[a,o]=N.useState(!0);N.useEffect(()=>{t&&l()},[t]);const l=async()=>{if(t)try{const{data:j}=await P.from("vendors").select("*").eq("user_id",t.id).maybeSingle();if(!j)return;r(j);const{data:m,error:y}=await P.from("vendor_documents").select("*").eq("vendor_id",j.id).order("uploaded_at",{ascending:!1});if(y)throw y;s(m||[])}catch(j){console.error("Error loading documents:",j)}finally{o(!1)}},c=j=>j.status==="verified"?i.jsxs("span",{className:"flex items-center space-x-1 px-3 py-1 bg-emerald-100 text-emerald-800 rounded-full text-xs font-semibold",children:[i.jsx(Ae,{className:"h-4 w-4"}),i.jsx("span",{children:"Verified"})]}):j.status==="expired"?i.jsxs("span",{className:"flex items-center space-x-1 px-3 py-1 bg-rose-100 text-rose-800 rounded-full text-xs font-semibold",children:[i.jsx(mi,{className:"h-4 w-4"}),i.jsx("span",{children:"Expired"})]}):j.status==="rejected"?i.jsxs("span",{className:"flex items-center space-x-1 px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-semibold",children:[i.jsx(mi,{className:"h-4 w-4"}),i.jsx("span",{children:"Rejected"})]}):i.jsxs("span",{className:"flex items-center space-x-1 px-3 py-1 bg-amber-100 text-amber-800 rounded-full text-xs font-semibold",children:[i.jsx(Qe,{className:"h-4 w-4"}),i.jsx("span",{children:"Pending Review"})]}),u=j=>{if(!j.expires_at)return null;const m=new Date(j.expires_at),y=new Date,g=Math.floor((m.getTime()-y.getTime())/(1e3*60*60*24));return g<0?i.jsxs("span",{className:"text-rose-600 font-semibold",children:["Expired ",Math.abs(g)," days ago"]}):g<=7?i.jsxs("span",{className:"text-rose-600 font-semibold",children:["Expires in ",g," days!"]}):g<=30?i.jsxs("span",{className:"text-amber-600 font-semibold",children:["Expires in ",g," days"]}):i.jsxs("span",{className:"text-gray-600",children:["Expires ",m.toLocaleDateString()]})};if(a)return i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})});if(!e)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md text-center",children:[i.jsx($e,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Vendor Profile Required"}),i.jsx("p",{className:"text-gray-600",children:"Create a vendor profile to manage documents."})]})});const d=[{kind:"license",title:"Business License",description:"Required for all vendors"},{kind:"insurance",title:"Liability Insurance",description:"Required for all vendors"},{kind:"w9",title:"W-9 Tax Form",description:"Required for payment processing"}],h=j=>n.find(m=>m.kind===j),p=n.filter(j=>j.status==="verified").length,v=n.filter(j=>j.status==="pending").length,b=n.filter(j=>j.status==="expired").length,f=p>=3&&b===0;return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2 tracking-tight",children:"Documents & Compliance"}),i.jsx("p",{className:"text-lg text-gray-600",children:"Manage your compliance documents and verification status"})]}),i.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mb-8",children:i.jsx("div",{className:`px-6 py-4 ${f?"bg-gradient-to-r from-emerald-600 to-green-600":"bg-gradient-to-r from-amber-600 to-orange-600"}`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[f?i.jsx(Ae,{className:"h-8 w-8 text-white"}):i.jsx(It,{className:"h-8 w-8 text-white"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:f?"Fully Verified":"Verification Required"}),i.jsx("p",{className:"text-white text-opacity-90",children:f?"You can accept jobs on the platform":"Complete verification to accept jobs"})]})]}),i.jsxs("div",{className:"text-white text-right",children:[i.jsxs("p",{className:"text-3xl font-bold",children:[p,"/3"]}),i.jsx("p",{className:"text-sm text-white text-opacity-90",children:"Verified"})]})]})})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx(Ae,{className:"h-8 w-8 text-emerald-600"})}),i.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Verified"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:p})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx(Qe,{className:"h-8 w-8 text-amber-600"})}),i.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Pending Review"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:v})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx(It,{className:"h-8 w-8 text-rose-600"})}),i.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Expired/Action Needed"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:b})]})]}),i.jsx("div",{className:"space-y-4",children:d.map(j=>{const m=h(j.kind);return i.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:j.title}),m&&c(m)]}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:j.description}),m&&m.expires_at&&i.jsx("p",{className:"text-sm",children:u(m)})]}),m?i.jsxs("button",{className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-violet-700 transition-all duration-200 shadow-lg",children:[i.jsx(ou,{className:"h-5 w-5 inline mr-2"}),"Re-upload"]}):i.jsxs("button",{className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-xl font-semibold hover:from-emerald-700 hover:to-green-700 transition-all duration-200 shadow-lg",children:[i.jsx(ou,{className:"h-5 w-5 inline mr-2"}),"Upload"]})]}),m&&i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"File:"}),i.jsx("span",{className:"font-medium text-gray-900",children:m.file_name||"Unknown"})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Uploaded:"}),i.jsx("span",{className:"font-medium text-gray-900",children:new Date(m.uploaded_at).toLocaleDateString()})]}),m.verified_at&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Verified:"}),i.jsx("span",{className:"font-medium text-emerald-600",children:new Date(m.verified_at).toLocaleDateString()})]}),m.notes&&i.jsx("div",{className:"pt-2 border-t border-gray-200",children:i.jsxs("p",{className:"text-sm text-gray-600",children:[i.jsx("span",{className:"font-medium",children:"Notes:"})," ",m.notes]})})]})]})},j.kind)})}),i.jsx("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(It,{className:"h-6 w-6 text-blue-600 flex-shrink-0 mt-1"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Important Information"}),i.jsxs("ul",{className:"space-y-1 text-sm text-gray-700",children:[i.jsx("li",{children:" All required documents must be verified before you can accept jobs"}),i.jsx("li",{children:" You'll receive email reminders 30, 7, and 1 day before document expiry"}),i.jsx("li",{children:" Expired documents will temporarily hide you from the jobs board"}),i.jsx("li",{children:" Documents typically reviewed within 1-2 business days"})]})]})]})})]})})}function Ex(){const{user:t}=ce(),[e,r]=N.useState(null),[n,s]=N.useState([]),[a,o]=N.useState(!0),[l,c]=N.useState("all");N.useEffect(()=>{t&&u()},[t]);const u=async()=>{if(t)try{const{data:f}=await P.from("vendors").select("*").eq("user_id",t.id).maybeSingle();if(!f)return;r(f);const{data:j,error:m}=await P.from("invoices").select("*").eq("vendor_id",f.id).order("created_at",{ascending:!1});if(m)throw m;s(j||[])}catch(f){console.error("Error loading invoices:",f)}finally{o(!1)}};if(a)return i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})});if(!e)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md text-center",children:[i.jsx($e,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Vendor Profile Required"}),i.jsx("p",{className:"text-gray-600",children:"Create a vendor profile to manage invoices."})]})});const d={all:"All Invoices",draft:"Draft",sent:"Sent",partial:"Partially Paid",paid:"Paid",overdue:"Overdue",void:"Void"},h=l==="all"?n:n.filter(f=>f.status===l),p=f=>({draft:"bg-gray-100 text-gray-800",sent:"bg-blue-100 text-blue-800",partial:"bg-amber-100 text-amber-800",paid:"bg-emerald-100 text-emerald-800",overdue:"bg-rose-100 text-rose-800",void:"bg-slate-100 text-slate-800"})[f]||"bg-gray-100 text-gray-800",v=f=>{switch(f){case"paid":return i.jsx(Ae,{className:"h-5 w-5"});case"sent":case"partial":return i.jsx(Qe,{className:"h-5 w-5"});default:return i.jsx($e,{className:"h-5 w-5"})}},b={total:n.length,draft:n.filter(f=>f.status==="draft").length,sent:n.filter(f=>f.status==="sent").length,paid:n.filter(f=>f.status==="paid").length,totalRevenue:n.filter(f=>f.status==="paid").reduce((f,j)=>f+j.total,0),outstanding:n.filter(f=>["sent","partial","overdue"].includes(f.status)).reduce((f,j)=>f+j.total,0)};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2 tracking-tight",children:"Invoices & Payouts"}),i.jsx("p",{className:"text-lg text-gray-600",children:"Track your payments and earnings"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx($e,{className:"h-8 w-8 text-blue-600"})}),i.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Invoices"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:b.total})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx(Qe,{className:"h-8 w-8 text-amber-600"})}),i.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Pending"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:b.sent})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx(Ae,{className:"h-8 w-8 text-emerald-600"})}),i.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Paid"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:b.paid})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx(Sl,{className:"h-8 w-8 text-green-600"})}),i.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Revenue"}),i.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",b.totalRevenue.toLocaleString()]})]})]}),i.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Outstanding Balance"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Awaiting payment from clients"})]}),i.jsxs("p",{className:"text-4xl font-bold text-amber-600",children:["$",b.outstanding.toLocaleString()]})]})}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:Object.entries(d).map(([f,j])=>{const m=f==="all"?n.length:n.filter(y=>y.status===f).length;return i.jsxs("button",{onClick:()=>c(f),className:`px-4 py-2 rounded-xl font-semibold transition-all duration-200 ${l===f?"bg-gradient-to-r from-blue-600 to-violet-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200"}`,children:[j," (",m,")"]},f)})}),h.length===0?i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-12 text-center",children:[i.jsx($e,{className:"h-20 w-20 text-gray-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No invoices found"}),i.jsx("p",{className:"text-gray-600",children:"No invoices match the selected filter"})]}):i.jsx("div",{className:"grid grid-cols-1 gap-4",children:h.map(f=>i.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-all duration-200",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:f.invoice_number}),i.jsxs("span",{className:`flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-semibold ${p(f.status)}`,children:[v(f.status),i.jsx("span",{children:f.status})]})]}),i.jsxs("div",{className:"flex items-center flex-wrap gap-4 text-sm text-gray-600",children:[i.jsxs("span",{children:["Issued: ",new Date(f.issued_at).toLocaleDateString()]}),f.due_at&&i.jsxs("span",{children:["Due: ",new Date(f.due_at).toLocaleDateString()]}),f.paid_at&&i.jsxs("span",{className:"text-emerald-600 font-semibold",children:["Paid: ",new Date(f.paid_at).toLocaleDateString()]})]})]}),i.jsxs("div",{className:"text-right ml-6",children:[i.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",f.total.toLocaleString()]}),i.jsx("p",{className:"text-sm text-gray-600",children:f.currency})]})]}),i.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[i.jsxs("button",{className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-lg font-medium hover:from-blue-700 hover:to-violet-700 transition-all flex items-center justify-center",children:[i.jsx(Yg,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),f.status==="draft"&&i.jsx("button",{className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-all",children:"Edit Invoice"}),f.status==="draft"&&i.jsx("button",{className:"flex-1 px-4 py-2 bg-emerald-100 text-emerald-700 rounded-lg font-medium hover:bg-emerald-200 transition-all",children:"Send to Client"})]})]})},f.id))})]})})}function Px(){const{user:t,loading:e}=ce(),{loading:r}=at(),[n,s]=N.useState("login"),[a,o]=N.useState("dashboard"),[l,c]=N.useState(null);if(N.useEffect(()=>{const d=new URLSearchParams(window.location.hash.substring(1)),h=d.get("access_token"),p=d.get("type");h&&p==="recovery"&&s("reset-password")},[]),e||t&&r)return i.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(!t)return n==="reset-password"?i.jsx(ox,{onComplete:()=>s("login")}):n==="signup"?i.jsx(ax,{onSwitch:s}):i.jsx(ix,{onSwitch:s});const u=()=>{if(l)return i.jsx(xx,{propertyId:l,onBack:()=>c(null)});switch(a){case"dashboard":return i.jsx(lu,{onPropertyClick:d=>c(d)});case"properties":return i.jsx(fx,{});case"work-orders":return i.jsx(yx,{});case"visitor-passes":return i.jsx(vx,{});case"gas-store":return i.jsx(wx,{});case"vendors":return i.jsx(bx,{});case"vendor-inventory":return i.jsx(jx,{});case"vendor-dashboard":return i.jsx(_x,{});case"vendor-jobs-board":return i.jsx(Nx,{});case"vendor-my-jobs":return i.jsx(kx,{});case"vendor-quotes":return i.jsx(Sx,{});case"vendor-documents":return i.jsx(Cx,{});case"vendor-invoices":return i.jsx(Ex,{});case"analytics":case"settings":return i.jsxs("div",{className:"text-center py-12",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Coming Soon"}),i.jsx("p",{className:"text-gray-600",children:"This feature is under development"})]});default:return i.jsx(lu,{})}};return i.jsx(ux,{currentPage:a,onNavigate:o,children:u()})}function Tx(){return i.jsx(qg,{children:i.jsx(Vg,{children:i.jsx(Px,{})})})}bh(document.getElementById("root")).render(i.jsx(N.StrictMode,{children:i.jsx(Tx,{})}));
